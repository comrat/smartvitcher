var log=null,$manifest$author$email="poberyaa@gmail.com",$manifest$author$name="Alexey Pobery",$manifest$author$site="https://github.com/comrat",$manifest$cssAutoClassificator=!1,$manifest$cssDisableTransformations=!1,$manifest$cssDisableTransitions=!1,$manifest$disableAnimations=!1,$manifest$expectRunContextEvent=!1,$manifest$html5$prefix="",$manifest$iconColor="#F4511E",$manifest$log$disable=!1,$manifest$requireExplicitRecursiveVisibilityStyle=!1,$manifest$requireVerticalTextAlignmentStyle=!1,$manifest$resolutionHeight=720,$manifest$resolutionWidth=1280,$manifest$style$font$family="Arial",$manifest$style$font$lineHeight=1.2,$manifest$style$font$pixelSize=16,$manifest$style$font$pointSize=0,$manifest$system$fingerprint=!1,$manifest$title="smartvitcher",$manifest$trace$focus=!1,$manifest$trace$keys=!1,$manifest$trace$listeners=!1,$manifest$useNativeFocusForInput=!0,$manifest$version="0.0.1",$manifest$virtual$height=720,$manifest$virtual$width=1280,qml=function(){var t={},S=t;S.core||(S.core={});var P=S.core;S.src||(S.src={});var e=S.src;S.src.clips||(S.src.clips={});var i=S.src.clips;S.src.player||(S.src.player={});var n=S.src.player;S.src.streams||(S.src.streams={});var o=S.src.streams;S.src.common||(S.src.common={});var l=S.src.common;S.src.videos||(S.src.videos={});var r=S.src.videos;S.webos||(S.webos={});S.webos;S.controls||(S.controls={});S.controls;S.controls.core||(S.controls.core={});var h=S.controls.core;S.controls.web||(S.controls.web={});var a=S.controls.web;S.controls.web.api||(S.controls.web.api={});var u=S.controls.web.api;S.controls.pure||(S.controls.pure={});S.controls.pure;S.controls.input||(S.controls.input={});var s=S.controls.input;S.video||(S.video={});S.video;S.video.html5||(S.video.html5={});S.video.html5;S.html5||(S.html5={});var c=S.html5;S.core.core=function(){var i=S;P.device=0,P.vendor="",P.__videoBackends={},"undefined"!=typeof navigator?(i.core.os=navigator.platform,i.core.userAgent=navigator.userAgent,i.core.language=navigator.language):(i.core.os="unknown",i.core.userAgent="Unknown");var t=function(t,e){i.core.userAgent.indexOf(t)<0||(i.core.vendor=e.vendor,i.core.device=e.device,i.core.os=e.os)};i.core.vendor||(t("Blackberry",{vendor:"blackberry",device:2,os:"blackberry"}),t("Android",{vendor:"google",device:2,os:"android"}),t("iPhone",{vendor:"apple",device:2,os:"iOS"}),t("iPad",{vendor:"apple",device:2,os:"iOS"}),t("iPod",{vendor:"apple",device:2,os:"iOS"})),0<=i.core.userAgent.indexOf("Chromium")?i.core.browser="Chromium":0<=i.core.userAgent.indexOf("Chrome")?i.core.browser="Chrome":0<=i.core.userAgent.indexOf("Opera")?i.core.browser="Opera":0<=i.core.userAgent.indexOf("Firefox")?i.core.browser="Firefox":0<=i.core.userAgent.indexOf("Safari")?i.core.browser="Safari":0<=i.core.userAgent.indexOf("MSIE")?i.core.browser="IE":0<=i.core.userAgent.indexOf("YaBrowser")?i.core.browser="Yandex":i.core.browser="",S._backend=function(){return S.html5.html},S.core.__locationBackend=function(){return S.html5.location},S.core.__localStorageBackend=function(){return S.html5.localstorage},S.core.__videoBackends.html5=function(){return S.video.html5.backend},("webOS"in window||"webos"in window)&&(S.core.__videoBackends.webos=function(){return S.webos.video},S.core.__deviceBackend=function(){return S.webos.device},(log=console.log.bind(console))("WebOS detected"),i.core.vendor="LG",i.core.device=1,i.core.os="webOS",i.core.keyCodes={37:"Left",38:"Up",39:"Right",40:"Down",13:"Select",33:"ChannelUp",34:"ChannelDown",27:"Back",19:"Pause",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",461:"Back",403:"Red",404:"Green",405:"Yellow",406:"Blue",457:"Menu",412:"Rewind",417:"FastForward",457:"Info",413:"Stop",415:"Play"},log("webos initialized"),i.closeApp=function(){window.close?window.close():window.webOS.platformBack()},i.platformBack=function(){window.webOS.platformBack()}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},o=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o},null===log&&(log=function(){for(var t="",e=0;e<arguments.length;++e)t+=arguments[e]+" ";console.log(t)})),null===log&&(log=console.log.bind(console));var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32","":"",transparent:"0000"};i.core.safeCall=function(e,i,n){return function(t){return function(t,e,i,n){try{return t.apply(e,i)}catch(t){n(t)}}(t,e,i,n)}},i.core.assign=function(t,e,i){for(var n=(e=e.split(".")).length-1,o=0;o<n;++o)t=t[e[o]];t[e[n]]=i},P.getKeyCodeByName=function(t){var e=P.keyCodes;for(var i in e)if(e[i]===t)return~~i};var e=P.CoreObject=function(t){this._local=Object.create(t?t._local:null)},n=e.prototype;n.componentName="core.CoreObject",n.constructor=e,n.$c=function(){},n.$s=function(){},n.__init=function(){var t={};this.$c(t),this.$s(t),this.completed()},n.__complete=function(){},n._get=function(t,e){if(t in this)return this[t];if(t in this._local)return this._local[t];if(e)return null;throw new Error("invalid property requested: '"+t+"'")};var l=P.Color=function(t){if(Array.isArray(t))return this.r=t[0],this.g=t[1],this.b=t[2],void(this.a=void 0!==t[3]?t[3]:255);if("string"!=typeof t)return this.r=this.b=this.a=255,this.g=0,void log("invalid color specification: "+t,(new Error).stack);var e;if("#"===t[0])e=t.substring(1);else{if("rgba"===t.substring(0,4)){var i=t.indexOf("("),n=t.lastIndexOf(")");return t=t.substring(i+1,n).split(","),this.r=parseInt(t[0],10),this.g=parseInt(t[1],10),this.b=parseInt(t[2],10),void(this.a=Math.floor(255*parseFloat(t[3])))}e=c[t]}if(!e)return this.r=this.b=this.a=255,this.g=0,void log("invalid color specification: "+t,(new Error).stack);var o=e.length;if(3===o||4===o){var r=parseInt(e[0],16),a=parseInt(e[1],16),s=(i=parseInt(e[2],16),4===o?parseInt(e[3],16):15);this.r=r<<4|r,this.g=a<<4|a,this.b=i<<4|i,this.a=s<<4|s}else{if(6!==o&&8!==o)throw new Error("invalid color specification: "+t);this.r=parseInt(e.substring(0,2),16),this.g=parseInt(e.substring(2,4),16),this.b=parseInt(e.substring(4,6),16),this.a=8===o?parseInt(e.substring(6,8),16):255}};l.interpolate=function(t,e,i){t instanceof l||(t=new l(t)),e instanceof l||(e=new l(e));var n=function(t,e,i){return Math.floor(i*(t-e)+e)},o=n(t.r,e.r,i),r=n(t.g,e.g,i),a=n(t.b,e.b,i),s=n(t.a,e.a,i);return new l([o,r,a,s])},l.normalize=function(t){return t instanceof l?t:new l(t)};var o=l.prototype;o.constructor=P.Color,o.rgba=o.toString=function(){var t=this.a;return 255==t?"rgb("+this.r+","+this.g+","+this.b+")":"rgba("+this.r+","+this.g+","+this.b+","+t/255+")"};var r=function(t){var e=t>>4&15,i=15&t;return e+=9<e?87:48,i+=9<i?87:48,String.fromCharCode(e,i)};o.hex=function(){return"#"+r(this.r)+r(this.g)+r(this.b)+r(this.a)},o.ahex=function(){return"#"+r(this.a)+r(this.r)+r(this.g)+r(this.b)},i.addLazyProperty=function(e,n,o){var i=function(t){var e=t.__properties,i=e[n];return void 0!==i?(void 0===i.value&&(i.value=o(t)),i):e[n]=new a(o(t))};Object.defineProperty(e,n,{get:function(){return i(this).value},set:function(t){if(!i(this).forwardSet(this,n,t,null))throw new Error("could not set lazy property "+n+" in "+e.componentName)},enumerable:!0})},i.addConstProperty=function(t,e,i){Object.defineProperty(t,e,{get:function(){return i.call(this)},set:function(t){throw new Error("could not set const property")},enumerable:!0})};var a=function(t){this.value=t,this.onChanged=[]},s=(i.PropertyStorage=a).prototype;s.getAnimation=function(t,e){var i=this.animation;return i&&i.enabled()&&0<i.duration&&!i._native&&i._context._completed?i:null},s.__removeUpdater=function(t){for(var e=this.deps,i=0,n=e.length;i<n;i+=2){var o=e[i],r=e[i+1];o.removeOnChanged(r,t)}},s.removeUpdater=function(){var t=this.callback;void 0!==t&&(this.__removeUpdater(t),this.deps=this.callback=void 0)},s.replaceUpdater=function(t,e,i){var n=this.callback;void 0!==n&&this.__removeUpdater(n),this.callback=e,this.deps=i;for(var o=t.connectOnChanged,r=0,a=i.length;r<a;r+=2){var s=i[r],c=i[r+1];o.call(t,s,c,e)}e()},s.forwardSet=function(n,o,t,e){var i=this.getCurrentValue(e);if(null!==i&&i instanceof Object){var r;if(void 0===(r=i.defaultProperty))return!1;var a=i[r];return t!==a&&(i[r]=t,this.callOnChanged(n,o,t,a)),!0}if(t instanceof Object)return void 0===(r=t.defaultProperty)||n.connectOnChanged(t,r,function(t,e){var i=n.__properties[o];void 0!==i&&i.callOnChanged(n,o,t,e)}),!1},s.discard=function(){var t=this.getAnimation();t&&t.complete(),this.onChanged=[]},s.getSimpleValue=function(t){var e=this.value;return void 0!==e?e:t},s.getCurrentValue=function(t){var e=this.interpolatedValue;return void 0!==e?e:this.getSimpleValue(t)},s.setCurrentValue=function(t,e,i,n){var o=this.value;this.interpolatedValue=void 0,this.value=i,n&&this.callOnChanged(t,e,i,o)},s.set=function(t,e,i,n,o){var r=this.value;void 0===r&&(r=n),r!==i&&(this.forwardSet(t,e,i,n)||(this.value=i,o&&this.callOnChanged(t,e,i,r)))};var h=function(t,e,i,n){var o=t["__changed__"+e],r=void 0!==o,a=void 0!==n;if(r||a){var s=P.safeCall(t,[i],function(t){log("on "+e+" changed callback failed: ",t,t.stack)});r&&o.forEach(s),a&&n.forEach(s)}};s.callOnChanged=function(t,e,i){h(t,e,i,this.onChanged)},s.removeOnChanged=function(t){var e=this.onChanged,i=e.indexOf(t);if(0<=i)return e.splice(i,1)};var g=i.getDefaultValueForType=function(t){switch(t){case"enum":case"int":return 0;case"bool":return!1;case"real":return 0;case"string":return"";case"array":return[];case"color":case"Color":return"#0000";default:return t[0].toUpperCase()===t[0]?null:void 0}},_=(i.convertTo=function(t,e){switch(t){case"enum":case"int":return~~e;case"bool":return!!e;case"real":return+e;case"string":return String(e);default:return e}},i.getConvertFunction=function(t){switch(t){case"enum":case"int":return function(t){return~~t};case"bool":return function(t){return!!t};case"real":return function(t){return+t};case"string":return function(t){return String(t)};default:return function(t){return t}}});i.addProperty=function(t,e,d,p){var u=_(e),i=function(t){switch(t){case"int":case"real":case"color":case"Color":return!0;default:return!1}}(e);p=void 0!==p?u(p):g(e);var f=function(t){var e=this.__properties,i=e[d];if(void 0===i){if(t===p)return;i=e[d]=new a(p)}return i};Object.defineProperty(t,d,{get:i?function(){var t=this.__properties[d];return void 0!==t?t.getCurrentValue(p):p}:function(){var t=this.__properties[d];return void 0!==t?t.getSimpleValue(p):p},set:i?function(t){t=u(t);var e=f.call(this,t);if(void 0!==e){var i=e.getAnimation();if(i&&e.value!==t){var n=this._context,o=n.backend;e.frameRequest&&o.cancelAnimationFrame(e.frameRequest),e.started=Date.now();var r=e.getCurrentValue(p),a=t,s=this,c=function(){e.frameRequest&&(o.cancelAnimationFrame(e.frameRequest),e.frameRequest=void 0),e.frameRequestDelayed&&(clearTimeout(e.frameRequestDelayed),e.frameRequestDelayed=void 0),i.complete=function(){},e.interpolatedValue=void 0,e.started=void 0,i.running=!1,e.callOnChanged(s,d,a,r)},l=i.duration,h=n.wrapNativeCallback(function(){var t=1*(Date.now()-e.started)/l;1<=t||!i.active()?c():(e.interpolatedValue=u(i.interpolate(a,r,t)),e.callOnChanged(s,d,e.getCurrentValue(p),r),e.frameRequest=o.requestAnimationFrame(h))});i.delay<=0?e.frameRequest=o.requestAnimationFrame(h):e.frameRequestDelayed=setTimeout(h,i.delay),i.running=!0,i.complete=c}e.set(this,d,t,p,!i)}}:function(t){t=u(t);var e=f.call(this,t);void 0!==e&&e.set(this,d,t,p,!0)},enumerable:!0})},i.addAliasProperty=function(i,n,t,e){var o=t();i.connectOnChanged(o,e,function(t){var e=i.__properties[n];void 0!==e?e.callOnChanged(i,n,t):h(i,n,t)}),Object.defineProperty(i,n,{get:function(){return o[e]},set:function(t){o[e]=t},enumerable:!0})},P.createSignal=function(t){return function(){this.emitWithArgs(t,arguments)}},P.createSignalForwarder=function(t,e){return function(){t.emitWithArgs(e,arguments)}},P.EventBinder=function(t){this.target=t,this.callbacks={},this.enabled=!1},P.EventBinder.prototype.on=function(t,e){if(t in this.callbacks)throw new Error("double adding of event ("+t+")");this.callbacks[t]=e,this.enabled&&this.target.on(t,e)},P.EventBinder.prototype.constructor=P.EventBinder,P.EventBinder.prototype.enable=function(t){if(t!=this.enabled){var e=this.target;if(this.enabled=t)for(var i in this.callbacks)e.on(i,this.callbacks[i]);else for(var i in this.callbacks)e.removeListener(i,this.callbacks[i])}};var d=function(t,e,i,n){var o=t+i,r=e[o];if(void 0!==r)if(e.hasOwnProperty(o))r.push(n);else{var a=r.slice();a.push(n),e[o]=a}else e[o]=[n]};P._protoOn=function(t,e,i){d("__on__",t,e,i)},P._protoOnChanged=function(t,e,i){d("__changed__",t,e,i)},P._protoOnKey=function(t,e,i){d("__key__",t,e,i)};var p=function(t){this._callback=t,this._queue=[],this.history=[]},u=p.prototype;return u.constructor=p,u.unshift=function(){var t=this._queue;t.unshift.apply(t,arguments)},u.push=function(){var t=this._queue;t.push.apply(t,arguments)},u.enumerate=function(t,e){var i=[this,e],n=this._queue;for(n.unshift(t);n.length;){var o=n.shift();if(this.history.push(o),this._callback.apply(o,i))break}},i.forEach=function(t,e,i){return new p(e).enumerate(t,i),i},i.createObject=function(t){t.__init();var e=t.parent;"_updateVisibilityForChild"in e&&e._updateVisibilityForChild(t,e.recursiveVisible),"_tryFocus"in e&&e._tryFocus(),t._context.scheduleComplete()},i}();var d=S.core.core,p=P.CoreObject,f=p.prototype,g=P.EventEmitter=function(t,e){p.apply(this,arguments),this._eventHandlers={},this._onConnections=[]},_=g.prototype=Object.create(f);_.constructor=g,_.componentName="core.EventEmitter",_.discard=function(){for(var t in this.removeAllOn(),this._eventHandlers)this.removeAllListeners(t)},_.removeAllOn=function(){for(var t=this._onConnections,e=0,i=t.length;e<i;e+=3)t[e].removeListener(t[e+1],t[e+2]);this._onConnections=[]},_.removeAllListeners=function(t){delete this._eventHandlers[t]},_.emit=function(e){if(""===e)throw new Error("empty listener name");var t=this["__on__"+e],i=this._eventHandlers[e];if(void 0!==t||void 0!==i){for(var n=arguments.length,o=new Array(n-1),r=0,a=1;a<n;)o[r++]=arguments[a++];var s=P.safeCall(this,o,function(t){log("event/signal "+e+" handler failed:",t,t.stack)});void 0!==t&&t.forEach(s),void 0!==i&&i.forEach(s)}},_.emitWithArgs=function(e,t){if(""===e)throw new Error("empty listener name");var i=this["__on__"+e],n=this._eventHandlers[e];if(void 0!==i||void 0!==n){var o=P.safeCall(this,t,function(t){log("event/signal "+e+" handler failed:",t,t.stack)});void 0!==i&&i.forEach(o),void 0!==n&&n.forEach(o)}},_.removeListener=function(t,e){if(t in this._eventHandlers&&null!=e&&""!==t){var i=this._eventHandlers[t],n=i.indexOf(e);0<=n?i.splice(n,1):$manifest$trace$listeners&&log("failed to remove listener for",t,"from",this),i.length||this.removeAllListeners(t)}else $manifest$trace$listeners&&log("invalid removeListener("+t+", "+e+") invocation",(new Error).stack)},_.on=function(t,e){if(""===t)throw new Error("empty listener name");var i=this._eventHandlers,n=i[t];void 0!==n?n.push(e):i[t]=[e]},_.connectOn=function(t,e,i){t.on(e,i),this._onConnections.push(t,e,i)},_.$c=function(t){f.$c.call(this,t.$b={})},_.$s=function(t){f.$s.call(this,t.$b),delete t.$b,this.completed()};var m=P.EventEmitter,v=m.prototype,y=P.Object=function(t,e){m.apply(this,arguments),this.parent=t,this.children=[],this.__properties={},this.__attachedObjects=[],t&&t.__attachedObjects.push(this);this._context=t?t._context:null;if(e){var i=this._local;i.model=e,i._delegate=this}this._changedConnections=[],this._properties={}},$=y.prototype=Object.create(v);$._propertyToStyle={width:"width",height:"height",x:"left",y:"top",viewX:"left",viewY:"top",opacity:"opacity",border:"border",radius:"border-radius",rotate:"transform",boxshadow:"box-shadow",transform:"transform",visible:"visibility",visibleInView:"visibility",background:"background",color:"color",backgroundImage:"background-image",font:"font"},$.constructor=y,$.componentName="core.Object",$.completed=function(){this.__complete!==P.CoreObject.prototype.__complete&&this._registerDelayedAction("complete")&&this._context.__onCompleted(this)},$.discard=function(){this.removeAllOnChanged();var t=this.__attachedObjects;this.__attachedObjects=[],t.forEach(function(t){t.discard()});var e=this.parent;if(e){var i=e.__attachedObjects.indexOf(this);0<=i&&e.__attachedObjects.splice(i,1)}this.children=[],this._local={};var n=this.__properties;for(var o in n)n[o].discard();this._properties={},P.EventEmitter.prototype.discard.apply(this)},$.removeAllOnChanged=function(){for(var t=this._changedConnections,e=0,i=t.length;e<i;e+=3)t[e].removeOnChanged(t[e+1],t[e+2]);this._changedConnections=[]},$.getComponentPath=function(){for(var t=[],e=this;e;){var i=e.componentName;if(e.parent){var n=e.parent.children.indexOf(e);0<=n&&(i+="@"+n)}t.unshift(i),e=e.parent}return t.join(" → ")},$._tryFocus=function(){return!1},$.addChild=function(t){this.children.push(t)},$.removeChild=function(t){var e=this.children,i=e.indexOf(t);0<=i&&e.splice(i,1)},$._cancelDelayedAction=function(t){this._registeredDelayedActions[t]=!1},$._setId=function(t){for(var e=this;e;)e._local[t]=this,e=e.parent},$._registerDelayedAction=function(t){var e=this._registeredDelayedActions;return void 0===e&&(e=this._registeredDelayedActions={}),!0!==e[t]&&(e[t]=!0)},$.resetAnimation=function(t){var e=this.__properties[t];if(void 0!==e&&e.animation){var i=e.animation;i.disable();var n=i.target;i.target=n,e.animation=null,i.enable(),i.target=n}},$._removeUpdater=function(t){var e=this.__properties[t];void 0!==e&&e.removeUpdater()},$.getAnimation=function(t){var e=this.__properties[t];return e?e.animation:null},$.updateAnimation=function(t,e){this._context.backend.setAnimation(this,t,e)},$.setAnimation=function(t,e){this._get("context",!0);if(!$manifest$disableAnimations){if(null===e)return this.resetAnimation(t);var i=this._context.backend;if("contentX"!==t&&"contentY"!==t||log("WARNING: you're trying to animate contentX/contentY property, this will always use animation frames, ignoring CSS transitions, please use content.x/content.y instead"),e.target=this,e.property=t,this._createPropertyStorage(t).animation=e,i.setAnimation(this,t,e))e._native=!0;else{var n=this[t];n&&"object"==typeof n&&"_animateAll"in n&&n._animateAll(e)}}},$.removeOnChanged=function(t,e){var i,n=this.__properties[t];void 0!==n&&(i=n.removeOnChanged(e)),$manifest$trace$listeners&&!i&&log("failed to remove changed listener for",t,"from",this)},$.onChanged=function(t,e){this._createPropertyStorage(t).onChanged.push(e)},$._replaceUpdater=function(t,e,i){this._createPropertyStorage(t).replaceUpdater(this,e,i)},$._createPropertyStorage=function(t,e){var i=this.__properties[t];return void 0!==i?i:this.__properties[t]=new P.core.PropertyStorage(e)},$._setProperty=function(t,e,i){var n=this._createPropertyStorage(t,e),o=n.animation;void 0!==o&&o.disable(),n.setCurrentValue(this,t,e,i),void 0!==o&&o.enable()},$.connectOnChanged=function(t,e,i){t.onChanged(e,i),this._changedConnections.push(t,e,i)},$.$c=function(t){v.$c.call(this,t.$b={})},$.$s=function(t){v.$s.call(this,t.$b),delete t.$b,this.completed()};var b=P.Object,w=b.prototype,x=P.System=function(t,e){b.apply(this,arguments),this.vendor=P.vendor,this.device=P.device,this.os=P.os,this.browser=P.browser,this.userAgent=P.userAgent,this.language=P.language;var i=this._context;i.language=this.language.replace("-","_"),this.webkit=0<=this.userAgent.toLowerCase().indexOf("webkit"),this.support3dTransforms=i.backend.capabilities.csstransforms3d||!1,this.supportTransforms=i.backend.capabilities.csstransforms||!1,this.supportTransitions=i.backend.capabilities.csstransitions||!1,this.resolutionWidth=$manifest$resolutionWidth,this.resolutionHeight=$manifest$resolutionHeight},C=x.prototype=Object.create(w);C.constructor=x,C.componentName="core.System",d.addProperty(C,"string","userAgent"),d.addProperty(C,"string","language"),d.addProperty(C,"string","browser"),d.addProperty(C,"string","vendor"),d.addProperty(C,"string","os"),d.addProperty(C,"bool","webkit"),d.addProperty(C,"bool","support3dTransforms"),d.addProperty(C,"bool","supportTransforms"),d.addProperty(C,"bool","supportTransitions"),d.addProperty(C,"bool","portrait"),d.addProperty(C,"bool","landscape"),d.addProperty(C,"bool","pageActive",!0),d.addProperty(C,"int","screenWidth"),d.addProperty(C,"int","screenHeight"),d.addProperty(C,"int","contextWidth"),d.addProperty(C,"int","contextHeight"),d.addProperty(C,"int","resolutionWidth"),d.addProperty(C,"int","resolutionHeight"),d.addProperty(C,"bool","virtualKeyboard"),C.Desktop=0,x.Desktop=0,C.Tv=1,x.Tv=1,C.Mobile=2,x.Mobile=2,d.addProperty(C,"enum","device"),C.MobileS=0,x.MobileS=0,C.MobileM=1,x.MobileM=1,C.MobileL=2,x.MobileL=2,C.Tablet=3,x.Tablet=3,C.Laptop=4,x.Laptop=4,C.LaptopL=5,x.LaptopL=5,C.Laptop4K=6,x.Laptop4K=6,d.addProperty(C,"enum","layoutType"),C._updateLayoutType=function(){if(this.contextWidth&&this.contextHeight){var t=this.contextWidth;t<=320?this.layoutType=this.MobileS:t<=375?this.layoutType=this.MobileM:t<=425?this.layoutType=this.MobileL:t<=768?this.layoutType=this.Tablet:this.contextWidth<=1024?this.layoutType=this.Laptop:this.contextWidth<=1440?this.layoutType=this.LaptopL:this.layoutType=this.Laptop4K}};var k=function(t){this._updateLayoutType()};P._protoOnChanged(C,"contextHeight",k),P._protoOnChanged(C,"contextWidth",k),C.$c=function(t){w.$c.call(this,t.$b={})},C.$s=function(t){var e=this;w.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("portrait",function(){e.portrait=e.parent.width<e.parent.height},[e.parent,"height",e.parent,"width"]),e._replaceUpdater("contextWidth",function(){e.contextWidth=e._context.width},[e._context,"width"]),e._replaceUpdater("virtualKeyboard",function(){e.virtualKeyboard=e.device===S.core.System.prototype.Tv||e.device===S.core.System.prototype.Mobile},[e,"device"]),e._replaceUpdater("landscape",function(){e.landscape=!e.portrait},[e,"portrait"]),e._replaceUpdater("contextHeight",function(){e.contextHeight=e._context.height},[e._context,"height"]),e.completed()};var A=P.Object,O=A.prototype,I=P.Item=function(t,e){if(A.apply(this,arguments),this._pressedHandlers={},this._topPadding=0,t){if(this.element)throw new Error("double ctor call");this._createElement(this.getTag(),this.getClass())}},U=I.prototype=Object.create(O);U.constructor=I,U.componentName="core.Item",U.anchorsMarginsUpdated=P.createSignal("anchorsMarginsUpdated"),U.newBoundingBox=P.createSignal("newBoundingBox"),d.addProperty(U,"int","x"),d.addProperty(U,"int","y"),d.addProperty(U,"int","z"),d.addProperty(U,"int","width"),d.addProperty(U,"int","height"),d.addProperty(U,"bool","clip"),d.addLazyProperty(U,"radius",function(t,e){var i,n={lazy$radius:i=new P.Radius(t,e)};return i.$c(n.$c$lazy$radius={}),(i=n.lazy$radius).$s(n.$c$lazy$radius),delete n.$c$lazy$radius,i.completed(),i}),d.addProperty(U,"bool","fullscreen"),d.addProperty(U,"bool","focus"),d.addProperty(U,"bool","focused"),d.addProperty(U,"bool","activeFocus"),d.addProperty(U,"Item","focusedChild"),d.addProperty(U,"bool","visible",!0),d.addProperty(U,"bool","visibleInView",!0),d.addProperty(U,"bool","recursiveVisible",!1),d.addProperty(U,"real","opacity",1),d.addLazyProperty(U,"anchors",function(t,e){var i,n={lazy$anchors:i=new P.Anchors(t,e)};return i.$c(n.$c$lazy$anchors={}),(i=n.lazy$anchors).$s(n.$c$lazy$anchors),delete n.$c$lazy$anchors,i.completed(),i}),d.addLazyProperty(U,"effects",function(t,e){var i,n={lazy$effects:i=new P.Effects(t,e)};return i.$c(n.$c$lazy$effects={}),(i=n.lazy$effects).$s(n.$c$lazy$effects),delete n.$c$lazy$effects,i.completed(),i}),d.addLazyProperty(U,"transform",function(t,e){var i,n={lazy$transform:i=new P.Transform(t,e)};return i.$c(n.$c$lazy$transform={}),(i=n.lazy$transform).$s(n.$c$lazy$transform),delete n.$c$lazy$transform,i.completed(),i}),d.addProperty(U,"bool","cssTranslatePositioning"),d.addProperty(U,"bool","cssNullTranslate3D"),d.addProperty(U,"bool","cssDelegateAlwaysVisibleOnAcceleratedSurfaces",!0),d.addProperty(U,"bool","cssPointerTouchEvents",!1),d.addConstProperty(U,"left",function(){return[this,0]}),d.addConstProperty(U,"top",function(){return[this,1]}),d.addConstProperty(U,"right",function(){return[this,2]}),d.addConstProperty(U,"bottom",function(){return[this,3]}),d.addConstProperty(U,"horizontalCenter",function(){return[this,4]}),d.addConstProperty(U,"verticalCenter",function(){return[this,5]}),d.addProperty(U,"int","viewX"),d.addProperty(U,"int","viewY"),d.addProperty(U,"int","keyProcessDelay"),U.discard=function(){P.Object.prototype.discard.apply(this),this.focusedChild=null,this._pressedHandlers={},this.element&&this.element.discard()},U._tryFocus=function(){if(!this.visible)return!1;if(this.focusedChild&&this.focusedChild._tryFocus())return!0;for(var t=this.children,e=0;e<t.length;++e){var i=t[e];if(i._tryFocus())return this._focusChild(i),!0}return this.focus},U.setFocus=function(){this.forceActiveFocus()},U._updateStyle=function(){var t=this.element;t&&t.updateStyle()},U.toScreen=function(){for(var t=this,e=0,i=0,n=this.width+(this._borderWidthAdjust||0)+(this._borderInnerWidthAdjust||0),o=this.height+(this._borderHeightAdjust||0)+(this._borderInnerHeightAdjust||0);t;){if(e+=t.x+t.viewX+(t._borderXAdjust||0),i+=t.y+t.viewY+(t._borderYAdjust||0),t.hasOwnProperty("view")){var r=t.view.content;e+=r.x,i+=r.y}t=t.parent}return[e,i,e+n,i+o,e+n/2,i+o/2]},U.hasActiveFocus=function(){for(var t=this;t.parent;){if(t.parent.focusedChild!=t)return!1;t=t.parent}return!0},U.forceActiveFocus=function(){for(var t=this;t.parent;)t.parent._focusChild(t),t=t.parent;this._tryFocus()&&this._propagateFocusToParents()},U._propagateFocusToParents=function(){for(var t=this;t.parent&&(!t.parent.focusedChild||!t.parent.focusedChild.visible);)t.parent._focusChild(t),t=t.parent},U._updateVisibility=function(){var t=this.visible&&this.visibleInView,e=!0,i=this.view;if(void 0!==i){var n=i.content;n.cssDelegateAlwaysVisibleOnAcceleratedSurfaces&&(n.cssTranslatePositioning||n.cssNullTranslate3D)&&!$manifest$cssDisableTransformations&&(e=!1)}e&&this.style("visibility",t?"inherit":"hidden"),this.recursiveVisible=t&&(null===this.parent||this.parent.recursiveVisible)},U._setSizeAdjust=function(){var t=this.x+this.viewX+(this._borderXAdjust||0),e=this.y+this.viewY+(this._borderYAdjust||0);this.cssTranslatePositioning&&!$manifest$cssDisableTransformations?(this.transform.translateX=t,this.transform.translateY=e):(this.style("left",t),this.style("top",e)),this.newBoundingBox()},U.getClass=function(){return""},U.getTag=function(){return"div"},U._focusTree=function(t){this.activeFocus=t,this.focusedChild&&this.focusedChild._focusTree(t)},U.addChild=function(t){P.Object.prototype.addChild.apply(this,arguments),t._tryFocus()&&t._propagateFocusToParents()},U._focusChild=function(t){if(t.parent!==this)throw new Error("invalid object passed as child");this.focusedChild!==t&&(this.focusedChild&&(this.focusedChild._focusTree(!1),this.focusedChild.focused=!1),this.focusedChild=t,this.focusedChild&&(this.focusedChild._focusTree(this.hasActiveFocus()),this.focusedChild.focused=!0))},U.focusChild=function(t){this._propagateFocusToParents(),this._focusChild(t)},U._updateVisibilityForChild=function(t,e){t.recursiveVisible=e&&t.visible&&t.visibleInView},U._attachElement=function(t){this.element&&this.element.discard(),this.element=t;var e=this.parent;e&&e.element.append(t)},U._processKey=function(e,t){$manifest$trace$keys&&log(this.getComponentPath(),"_processKey",e,t);var i=t.timeStamp;if(this.keyProcessDelay){if(this._lastEvent&&i>this._lastEvent&&i-this._lastEvent<this.keyProcessDelay)return!0;this._lastEvent=i}var n=P.safeCall(this,[e,t],function(t){log("on "+e+" handler failed:",t,t.stack)}),o=this["__key__"+e];if(e in this._pressedHandlers&&this.invokeKeyHandlers(e,t,this._pressedHandlers[e],n))return!0;if(o&&this.invokeKeyHandlers(e,t,o,n))return!0;o=this.__key__Key;return!!("Key"in this._pressedHandlers&&this.invokeKeyHandlers(e,t,this._pressedHandlers.Key,n))||!(!o||!this.invokeKeyHandlers(e,t,o,n))},U.invokeKeyHandlers=function(t,e,i,n){for(var o=i.length-1;0<=o;--o){if(n(i[o]))return $manifest$trace$keys&&log("key "+t+" handled in "+(performance.now()-e.timeStamp).toFixed(3)+" ms by",this,(new Error).stack),!0}return!1},U.onPressed=function(t,i){var e;this._get("key",!0);e="Key"!=t?function(t,e){return e.accepted=!0,i(t,e),e.accepted}:i,t in this._pressedHandlers?this._pressedHandlers[t].push(e):this._pressedHandlers[t]=[e]},U.style=function(t,e){var i=this.element;if(i)return i.style(t,e);log("WARNING: style skipped:",t,e)},U._enqueueNextChildInFocusChain=function(t,e){this._tryFocus();var i=this.focusedChild;i&&i.visible&&(t.unshift(i),e.unshift(i))},U.registerStyle=function(t,e){var i="position: absolute; visibility: inherit; opacity: 1.0;";i+="border-style: solid; border-width: 0px; border-radius: 0px; box-sizing: border-box; border-color: rgba(0,0,0,1);",i+="white-space: nowrap; transform: none;",i+="left: 0px; top: 0px; width: 0px; height: 0px;",i+="font-family: "+$manifest$style$font$family+"; line-height: "+$manifest$style$font$lineHeight+"; ",i+="pointer-events: none; touch-action: none; ",$manifest$style$font$pixelSize?i+="font-size: "+$manifest$style$font$pixelSize+"px; ":$manifest$style$font$pointSize&&(i+="font-size: "+$manifest$style$font$pointSize+"pt; "),t.addRule(e,i)},U._createElement=function(t,e){var i=this._get("context",!0);null===(i=this._context)&&(i=this),i.registerStyle(this,t,e),this._attachElement(i.createElement(t,e))},P._protoOnChanged(U,"cssNullTranslate3D",function(t){$manifest$cssDisableTransformations||this.style("transform",t?"translateZ(0)":"")}),P._protoOnChanged(U,"focus",function(t){this.parent&&this.parent._tryFocus()}),P._protoOnChanged(U,"height",function(t){this.style("height",t-this._topPadding+(this._borderHeightAdjust||0)),this.newBoundingBox()}),P._protoOnChanged(U,"width",function(t){this.style("width",t+(this._borderWidthAdjust||0)),this.newBoundingBox()}),P._protoOnChanged(U,"fullscreen",function(t){var e=this._context.backend;"enterFullscreenMode"in e?t?e.enterFullscreenMode(this.element):e.exitFullscreenMode():log("enterFullscreenMode is not available in current backend, fullscreen: "+t)}),P._protoOnChanged(U,"recursiveVisible",function(t){for(var e=this.children,i=0,n=e.length;i<n;++i){var o=e[i];this._updateVisibilityForChild(o,t)}!t&&this.parent&&this.parent._tryFocus(),$manifest$requireExplicitRecursiveVisibilityStyle&&this.style("-pure-recursive-visibility",t)}),P._protoOnChanged(U,"cssPointerTouchEvents",function(t){var e=t?"auto":"none";this.style("pointer-events",e),this.style("touch-action",e)});k=function(t){var e=this.x+this.viewX;this.cssTranslatePositioning&&!$manifest$cssDisableTransformations?this.transform.translateX=e:this.style("left",e),this.newBoundingBox()};P._protoOnChanged(U,"x",k),P._protoOnChanged(U,"viewX",k);var T=function(t){var e=this.y+this.viewY;this.cssTranslatePositioning&&!$manifest$cssDisableTransformations?this.transform.translateY=e:this.style("top",e),this.newBoundingBox()};P._protoOnChanged(U,"viewY",T),P._protoOnChanged(U,"y",T),P._protoOnChanged(U,"opacity",function(t){this.element&&this.style("opacity",t)});var z=function(t){this._updateVisibility()};P._protoOnChanged(U,"visible",z),P._protoOnChanged(U,"visibleInView",z),P._protoOnChanged(U,"clip",function(t){this.style("overflow",t?"hidden":"visible")}),P._protoOnChanged(U,"z",function(t){this.style("z-index",t)}),U.$c=function(t){O.$c.call(this,t.$b={})},U.$s=function(t){O.$s.call(this,t.$b),delete t.$b,this.completed()};var E=P.Item,L=E.prototype,R=h.BaseActivity=function(t,e){E.apply(this,arguments)},M=R.prototype=Object.create(L);M.constructor=R,M.componentName="controls.core.BaseActivity",M.started=P.createSignal("started"),M.stopped=P.createSignal("stopped"),d.addProperty(M,"bool","active"),d.addProperty(M,"string","name"),d.addProperty(M,"Item","manager"),M.clear=function(){this.manager.clear()},M.pop=function(t){this.manager.pop(t)},M.init=function(t,e){},M.closeAllExcept=function(t){this.manager.closeAllExcept(t)},M.removeActivity=function(t){this.manager.removeActivity(t)},M.push=function(t,e,i){this.manager.push(t,e,i)},M.replaceTopActivity=function(t,e,i){this.manager.replaceTopActivity(t,e,i)},M.popWithState=function(t){this.manager.popWithState(t)},M.setIntent=function(t,e){this.manager.setIntent(t,e)},M.setState=function(t,e){this.manager.setState(t,e)},P._protoOnKey(M,"Back",function(t,e){return this.manager.pop(),!0}),M.$c=function(t){L.$c.call(this,t.$b={})},M.$s=function(t){var e=this;L.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("visible",function(){e.visible=e.active},[e,"active"]),e._removeUpdater("manager"),e.manager=e.parent,e.completed()};var D=h.BaseActivity,F=D.prototype,H=h.Activity=function(t,e){D.apply(this,arguments)},j=H.prototype=Object.create(F);j.constructor=H,j.componentName="controls.core.Activity",j.getActivity=function(){return this},j.stop=function(){this.active=!1,this.stopped()},j.start=function(){this.active=!0,this.started()},j.$c=function(t){F.$c.call(this,t.$b={})},j.$s=function(t){F.$s.call(this,t.$b),delete t.$b,this.completed()};var N=h.Activity,V=N.prototype,W=l.PageActivity=function(t,e){N.apply(this,arguments)},B=W.prototype=Object.create(V);B.constructor=W,B.componentName="src.common.PageActivity",P._protoOnKey(B,"Left",function(t,e){this._get("menu",!0).setFocus()}),B.$c=function(t){V.$c.call(this,t.$b={});var e=new P.Rectangle(this);(t._this$child0=e).$c(t.$c$_this$child0={}),this.addChild(e)},B.$s=function(t){V.$s.call(this,t.$b),delete t.$b,this.anchors._removeUpdater("fill"),this.anchors.fill=this.parent;var e=t._this$child0;e.$s(t.$c$_this$child0),delete t.$c$_this$child0,e._replaceUpdater("color",function(){e.color=e._get("consts").backgroundColor},[e._get("consts"),"backgroundColor"]),e.anchors._removeUpdater("fill"),e.anchors.fill=e.parent,e.completed(),this.completed()};var Y=l.PageActivity,q=Y.prototype,X=n.TwitchPlayerPage=function(t,e){Y.apply(this,arguments)},G=X.prototype=Object.create(q);G.constructor=X,G.componentName="src.player.TwitchPlayerPage",G.init=function(t,e){var i=this._get("embed",!0),n=(this._context.location,"&parent="+localhost.hostname),o="";o=e&&"clips"==e.lastActivity?"https://clips.twitch.tv/embed?clip="+t.id:e&&"streams"==e.lastActivity?"https://player.twitch.tv/?channel="+t.user_name:"https://player.twitch.tv/?video="+t.id,i.source=o+n},P._protoOn(G,"stopped",function(){this._get("embed",!0).source=""}),G.$c=function(t){q.$c.call(this,t.$b={});var e=new a.IFrame(this);(t._this$child0=e).$c(t.$c$_this$child0={}),e._setId("embed"),this.addChild(e)},G.$s=function(t){q.$s.call(this,t.$b),delete t.$b,this._removeUpdater("name"),this.name="player";var e=t._this$child0;e.$s(t.$c$_this$child0),delete t.$c$_this$child0,e.anchors._removeUpdater("fill"),e.anchors.fill=e.parent,e.completed(),this.completed()};var K=P.Object,J=K.prototype,Z=P.Shadow=function(t,e){K.apply(this,arguments)},Q=Z.prototype=Object.create(J);Q.constructor=Z,Q.componentName="core.Shadow",d.addProperty(Q,"real","x"),d.addProperty(Q,"real","y"),d.addProperty(Q,"color","color","black"),d.addProperty(Q,"real","blur"),d.addProperty(Q,"real","spread"),Q._empty=function(){return!(this.x||this.y||this.blur||this.spread)},Q._getFilterStyle=function(){var t=this.x+"px "+this.y+"px "+this.blur+"px ";return 0<this.spread&&(t+=this.spread+"px "),t+=P.Color.normalize(this.color)};k=function(t){this.parent._updateStyle(!0)};P._protoOnChanged(Q,"x",k),P._protoOnChanged(Q,"spread",k),P._protoOnChanged(Q,"y",k),P._protoOnChanged(Q,"blur",k),P._protoOnChanged(Q,"color",k),Q.$c=function(t){J.$c.call(this,t.$b={})},Q.$s=function(t){J.$s.call(this,t.$b),delete t.$b,this.completed()};var tt=P.Item,et=tt.prototype,it=P.Rectangle=function(t,e){tt.apply(this,arguments),this._context.backend.initRectangle(this)},nt=it.prototype=Object.create(et);(nt._propertyToStyle=Object.create(et._propertyToStyle)).color="background-color",nt.constructor=it,nt.componentName="core.Rectangle",d.addProperty(nt,"color","color","#0000"),d.addLazyProperty(nt,"border",function(t,e){var i,n={lazy$border:i=new P.Border(t,e)};return i.$c(n.$c$lazy$border={}),(i=n.lazy$border).$s(n.$c$lazy$border),delete n.$c$lazy$border,i.completed(),i}),d.addProperty(nt,"Gradient","gradient"),P._protoOnChanged(nt,"color",function(t){this.style("background-color",P.Color.normalize(t))}),nt.$c=function(t){et.$c.call(this,t.$b={})},nt.$s=function(t){et.$s.call(this,t.$b),delete t.$b,this.completed()};var ot=P.Rectangle,rt=ot.prototype,at=h.Highlighter=function(t,e){ot.apply(this,arguments)},st=at.prototype=Object.create(rt);st.constructor=at,st.componentName="controls.core.Highlighter",d.addProperty(st,"Object","target"),d.addProperty(st,"string","updatePositionProperty","currentIndex"),st._updatePos=function(){var t=this.target,e=t.getItemPosition(t[this.updatePositionProperty]);t.orientation===S.core.ListView.prototype.Horizontal?(this.x=t.x+e[0]-t.contentX,this.y=t.y,this.width=e[2]):(this.x=t.x,this.y=t.y+e[1]-t.contentY,this.height=e[3])},st.__complete=function(){rt.__complete.call(this);var t=this.target;this.connectOnChanged(t,this.updatePositionProperty,this._updatePos.bind(this)),this.connectOnChanged(t,"count",this._updatePos.bind(this)),this.connectOnChanged(t,"activeFocus",this._updatePos.bind(this)),this.connectOnChanged(t,"contentHeight",this._updatePos.bind(this)),this.connectOnChanged(t,"contentWidth",this._updatePos.bind(this)),this._updatePos()},st.$c=function(t){rt.$c.call(this,t.$b={})},st.$s=function(t){var e=this;rt.$s.call(this,t.$b),delete t.$b,e._removeUpdater("color"),e.color="#fff",e._removeUpdater("width"),e.width=100,e._removeUpdater("height"),e.height=100,e.completed()};var ct=P.Item,lt=ct.prototype,ht=P.BaseViewContent=function(t,e){ct.apply(this,arguments),this.style("will-change","scroll-position, transform, left, top")},dt=ht.prototype=Object.create(lt);dt.constructor=ht,dt.componentName="core.BaseViewContent",dt._updateScrollPositions=function(t,e,i){this._setProperty("x",-t),this._setProperty("y",-e),(void 0===i||i)&&this.parent._scheduleLayout()};k=function(t){this.parent._scheduleLayout()};P._protoOnChanged(dt,"x",k),P._protoOnChanged(dt,"y",k),dt.$c=function(t){lt.$c.call(this,t.$b={})},dt.$s=function(t){lt.$s.call(this,t.$b),delete t.$b,this.completed()};var pt=P.Object,ut=pt.prototype,ft=l.Consts=function(t,e){pt.apply(this,arguments)},gt=ft.prototype=Object.create(ut);gt.constructor=ft,gt.componentName="src.common.Consts",d.addProperty(gt,"int","animationDuration",300),d.addProperty(gt,"Color","backgroundColor","#000"),d.addProperty(gt,"Color","textColor","#fff"),d.addProperty(gt,"Color","accentTextColor","#F4511E"),d.addProperty(gt,"Color","panelColor","#424242"),d.addProperty(gt,"Color","accentPanelColor","#F4511E"),d.addProperty(gt,"Color","focusPanelColor","#BF360C"),gt.$c=function(t){ut.$c.call(this,t.$b={})},gt.$s=function(t){ut.$s.call(this,t.$b),delete t.$b,this.completed()};var _t=P.Object,mt=_t.prototype,vt=P.Animation=function(t,e){_t.apply(this,arguments),this._disabled=0,this._native=!1},yt=vt.prototype=Object.create(mt);yt.constructor=vt,yt.componentName="core.Animation",d.addProperty(yt,"int","delay",0),d.addProperty(yt,"int","duration",200),d.addProperty(yt,"bool","cssTransition",!0),d.addProperty(yt,"bool","running",!1),d.addProperty(yt,"string","easing","ease"),d.addProperty(yt,"Object","target"),d.addProperty(yt,"string","property"),d.addProperty(yt,"variant","from"),d.addProperty(yt,"variant","to"),yt._updateAnimation=function(){this.target&&this.target.updateAnimation(this.property,this)},yt.active=function(){return this.enabled()&&0<this.duration},yt.disable=function(){++this._disabled,this._updateAnimation()},yt.enable=function(){--this._disabled,this._updateAnimation()},yt.enabled=function(){return 0===this._disabled},yt.complete=function(){},yt.interpolate=function(t,e,i){return i*(t-e)+e};k=function(t){this._updateAnimation()};P._protoOnChanged(yt,"easing",k),P._protoOnChanged(yt,"duration",k),P._protoOnChanged(yt,"delay",k),P._protoOnChanged(yt,"cssTransition",k),P._protoOnChanged(yt,"running",k),yt.$c=function(t){mt.$c.call(this,t.$b={})},yt.$s=function(t){mt.$s.call(this,t.$b),delete t.$b,this.completed()};var $t=P.Item,bt=$t.prototype,wt=l.SearchTextInput=function(t,e){$t.apply(this,arguments)},xt=wt.prototype=Object.create(bt);xt.constructor=wt,xt.componentName="src.common.SearchTextInput",xt.search=P.createSignal("search"),P._protoOnChanged(xt,"activeFocus",function(t){var e=this._get("searchInput",!0);t&&e.setFocus()}),xt.$c=function(t){var e=this;bt.$c.call(this,t.$b={});var i=new s.TextInput(e);(t._this$child0=i).$c(t.$c$_this$child0={}),i._setId("searchInput"),e.addChild(i);var n=new P.Image(e);(t._this$child1=n).$c(t.$c$_this$child1={}),e.addChild(n);var o=new P.Timer(e);(t._this$child2=o).$c(t.$c$_this$child2={}),o._setId("searchDelayTimer"),e.addChild(o)},xt.$s=function(t){var e=this;bt.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("width",function(){e.width=1e3*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("height",function(){e.height=50*e._context.virtualScale},[e._context,"virtualScale"]);var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i._replaceUpdater("radius",function(){i.radius=i.height/2},[i,"height"]),i.placeholder._removeUpdater("text"),i.placeholder.text="User, game",i._replaceUpdater("color",function(){i.color=i._get("consts").textColor},[i._get("consts"),"textColor"]),i._replaceUpdater("height",function(){i.height=i.parent.height},[i.parent,"height"]),i._replaceUpdater("width",function(){i.width=900*i._context.virtualScale},[i._context,"virtualScale"]),i._removeUpdater("horizontalAlignment"),i.horizontalAlignment=S.core.Text.prototype.AlignHCenter,i._replaceUpdater("backgroundColor",function(){i.backgroundColor=i._get("consts").panelColor},[i._get("consts"),"panelColor"]),i.font._replaceUpdater("pixelSize",function(){i.font.pixelSize=32*i._context.virtualScale},[i._context,"virtualScale"]),i._replaceUpdater("x",function(){i.x=90*i._context.virtualScale},[i._context,"virtualScale"]),i.onChanged("text",function(t){this._get("searchDelayTimer",!0).restart()}.bind(i)),i.completed();var n=t._this$child1;n.$s(t.$c$_this$child1),delete t.$c$_this$child1,n._replaceUpdater("x",function(){n.x=20*n._context.virtualScale},[n._context,"virtualScale"]),n._replaceUpdater("height",function(){n.height=n.parent.height},[n.parent,"height"]),n._removeUpdater("source"),n.source="res/search.png",n._replaceUpdater("width",function(){n.width=n.height},[n,"height"]),n.completed();var o=t._this$child2;o.$s(t.$c$_this$child2),delete t.$c$_this$child2,o._removeUpdater("interval"),o.interval=2e3,o.on("triggered",function(){var t=this._get("searchInput",!0);this.parent.search(t.text)}.bind(o)),o.completed(),e.completed()};var Ct=P.Item,St=Ct.prototype,Pt=h.ActivityManager=function(t,e){Ct.apply(this,arguments),this._activityStack=[]},kt=Pt.prototype=Object.create(St);kt.constructor=Pt,kt.componentName="controls.core.ActivityManager",d.addProperty(kt,"int","count"),d.addProperty(kt,"bool","keepLastActivity",!0),d.addProperty(kt,"string","currentActivity"),kt._initTopIntent=function(){if(this._activityStack.length){var t=this._activityStack[this._activityStack.length-1],e=this.children;log("initTopIntent: "+t.name);for(var i=0;i<e.length;++i){var n=e[i];if(n&&n instanceof S.controls.core.BaseActivity)if(n.name===t.name){log("Init:",t);var o=t.state||{};o.lastActivity||(o.lastActivity=this.currentActivity),n.init(t.intent,o),n.index=this._activityStack.length-1,n.start(),n.setFocus(),this.currentActivity=n.name}else n.stop()}}else log("Activity stack is empty")},kt.initTopIntent=function(){try{this._initTopIntent()}catch(t){log("initTopIntent failed:",t),this.pop()}},kt.clear=function(){for(var t=this.children,e=0;e<t.length;++e){var i=t[e];i&&i instanceof S.controls.core.Activity&&i.stop()}this._activityStack=[]},kt.pop=function(t){if(this.keepLastActivity&&1<this.count||!this.keepLastActivity&&0<this.count){var e=1;return e=void 0===t?1:t>this.count-1&&this.keepLastActivity?this.count-1:t>this.count&&!this.keepLastActivity?this.count:t,this._activityStack.splice(-e,e),this.count-=e,this.initTopIntent(),!0}return log("No activity to pop"),!1},kt.setIntent=function(t,e){if(e){var i=this.createActivity(e);i&&(i.intent=t)}else this._activityStack[this._activityStack.length-1].intent=t},kt.removeActivity=function(t){if(t==this.currentActivity)this.pop();else{for(var e=-1,i=0;i<this._activityStack.length;++i)if(this._activityStack[i].name==t){e=i;break}if(e<0)return void log("Activity",t,"not found");this._activityStack.splice(e,1)}},kt.isActivityInStack=function(e){var t=this._activityStack.filter(function(t){return t.name==e});return t&&0<t.length},kt.findActivity=function(e){var t=this.children.filter(function(t){return t instanceof S.controls.core.BaseActivity&&t.name==e}),i=null;return t&&t.length&&(i=t[0].getActivity()),i||log("Activity for name",e,"not found"),i},kt.createActivity=function(e){var t=this.findActivity(e);if(t)return t;var i=this.children.filter(function(t){return t instanceof S.controls.core.LazyActivity&&t.name==e});return i&&i.length?(t=i[0]).createActivity():(log("Activity for name",e,"not found"),null)},kt.closeAllExcept=function(t){var e=this.findActivity(t);e?(this.count=1,this._activityStack=[e]):(log("Activity",t,"not found, close all"),this.count=0,this._activityStack=[]),this.currentActivity!=t&&this.initTopIntent()},kt.replaceTopActivity=function(t,e,i){return 0<this.count?(this._activityStack.pop(),this._activityStack.push({name:t,intent:e,state:i}),this.initTopIntent(),!0):(log("No activity to pop"),!1)},kt.push=function(t,e,i){this._activityStack.push({name:t,intent:e,state:i}),this.count++,this.initTopIntent()},kt.popWithState=function(t){return this.keepLastActivity&&1<this.count||!this.keepLastActivity&&0<this.count?(this._activityStack.pop(),--this.count,this.setState(t),this.initTopIntent(),!0):(log("No activity to pop"),!1)},kt.setState=function(t,e){if(e){var i=this.createActivity(e);i&&(i.state=t)}else this._activityStack[this._activityStack.length-1].state=t},kt.$c=function(t){St.$c.call(this,t.$b={})},kt.$s=function(t){St.$s.call(this,t.$b),delete t.$b,this.completed()};var At=P.Rectangle,Ot=At.prototype,It=l.AppMenu=function(t,e){At.apply(this,arguments)},Ut=It.prototype=Object.create(Ot);Ut.constructor=It,Ut.componentName="src.common.AppMenu",Ut.selected=P.createSignal("selected"),P._protoOnKey(Ut,"Right",function(t,e){for(var i=this._get("root",!0),n=i.children,o=0;o<n.length;++o){var r=n[o];if(r.name===i.currentActivity)return r.setFocus(),!0}}),Ut.$c=function(t){var a=this;Ot.$c.call(this,t.$b={});var e=new h.Highlighter(a);(t._this$child0=e).$c(t.$c$_this$child0={}),a.addChild(e);var i=new P.ListView(a);(t._this$child1=i).$c(t.$c$_this$child1={}),i.delegate=function(t,e){var i={delegate:o=new P.Rectangle(t,e)};o.$c(i.$c$delegate={});var n=new P.Image(o);(i.delegate$child0=n).$c(i.$c$delegate$child0={}),o.addChild(n);var o,r=new P.Text(o);return(i.delegate$child1=r).$c(i.$c$delegate$child1={}),o.addChild(r),(o=i.delegate).$s(i.$c$delegate),delete i.$c$delegate,o._replaceUpdater("width",function(){o.width=o.parent.width},[o.parent,"width"]),o._replaceUpdater("height",function(){o.height=70*o._context.virtualScale},[o._context,"virtualScale"]),(n=i.delegate$child0).$s(i.$c$delegate$child0),delete i.$c$delegate$child0,n._replaceUpdater("y",function(){n.y=10*n._context.virtualScale},[n._context,"virtualScale"]),n._replaceUpdater("x",function(){n.x=10*n._context.virtualScale},[n._context,"virtualScale"]),n._replaceUpdater("height",function(){n.height=50*n._context.virtualScale},[n._context,"virtualScale"]),n._replaceUpdater("source",function(){n.source=n._get("model").icon},[n._get("_delegate"),"_row"]),n._replaceUpdater("width",function(){n.width=50*n._context.virtualScale},[n._context,"virtualScale"]),n.completed(),(r=i.delegate$child1).$s(i.$c$delegate$child1),delete i.$c$delegate$child1,r._replaceUpdater("color",function(){r.color=r._get("consts").textColor},[r._get("consts"),"textColor"]),r._replaceUpdater("text",function(){r.text=a._context.qsTr(r._get("model").text)},[r._context,"language",r._get("_delegate"),"_row"]),r._replaceUpdater("height",function(){r.height=r.parent.height},[r.parent,"height"]),r._replaceUpdater("width",function(){r.width=r.parent.width},[r.parent,"width"]),r._removeUpdater("verticalAlignment"),r.verticalAlignment=S.core.Text.prototype.AlignVCenter,r.font._replaceUpdater("pixelSize",function(){r.font.pixelSize=24*r._context.virtualScale},[r._context,"virtualScale"]),r._replaceUpdater("x",function(){r.x=75*r._context.virtualScale},[r._context,"virtualScale"]),r.completed(),o.completed(),o};var n=new P.ListModel(i);(t._this_child1$model=n).$c(t.$c$_this_child1$model={}),i.model=n,i._setId("menuView"),a.addChild(i);var o=new P.Timer(a);(t._this$child2=o).$c(t.$c$_this$child2={}),o._setId("indexDelay"),a.addChild(o)},Ut.$s=function(t){var e=this;Ot.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("color",function(){e.color=e._get("consts").accentPanelColor},[e._get("consts"),"accentPanelColor"]),e._replaceUpdater("width",function(){e.width=e.activeFocus?230*e._context.virtualScale:70*e._context.virtualScale},[e._context,"virtualScale",e,"activeFocus"]),e._removeUpdater("clip"),e.clip=!0,e._replaceUpdater("height",function(){e.height=e.parent.height},[e.parent,"height"]);var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i._replaceUpdater("color",function(){i.color=i._get("consts").focusPanelColor},[i._get("consts"),"focusPanelColor"]),i._replaceUpdater("width",function(){i.width=i.parent.width},[i.parent,"width"]),i._removeUpdater("cssTranslatePositioning"),i.cssTranslatePositioning=!0,i._replaceUpdater("target",function(){i.target=i._get("menuView")},[i,"menuView"]);var n,o={behavior__this_child0_on_width:n=new P.Animation(i)};n.$c(o.$c$behavior__this_child0_on_width={}),(n=o.behavior__this_child0_on_width).$s(o.$c$behavior__this_child0_on_width),delete o.$c$behavior__this_child0_on_width,n._replaceUpdater("duration",function(){n.duration=n._get("consts").animationDuration},[n._get("consts"),"animationDuration"]),n.completed(),i.setAnimation("width",n);var r,a={behavior__this_child0_on_transform:r=new P.Animation(i)};r.$c(a.$c$behavior__this_child0_on_transform={}),(r=a.behavior__this_child0_on_transform).$s(a.$c$behavior__this_child0_on_transform),delete a.$c$behavior__this_child0_on_transform,r._replaceUpdater("duration",function(){r.duration=r._get("consts").animationDuration},[r._get("consts"),"animationDuration"]),r.completed(),i.setAnimation("transform",r),i.completed();var s=t._this$child1;s.$s(t.$c$_this$child1),delete t.$c$_this$child1,s._removeUpdater("keyNavigationWraps"),s.keyNavigationWraps=!1,s._replaceUpdater("height",function(){s.height=s.parent.height},[s.parent,"height"]),s._replaceUpdater("width",function(){s.width=200*s._context.virtualScale},[s._context,"virtualScale"]),s._replaceUpdater("y",function(){s.y=100*s._context.virtualScale},[s._context,"virtualScale"]);var c=t._this_child1$model;c.$s(t.$c$_this_child1$model),delete t.$c$_this_child1$model,c.assign([{activity:"videos",icon:"res/menu/videos.png",text:"VIDEOS"},{activity:"clips",icon:"res/menu/clips.png",text:"CLIPS"},{activity:"streams",icon:"res/menu/streams.png",text:"STREAMS"}]),c.completed(),s.onChanged("currentIndex",function(t){this._get("indexDelay",!0).restart()}.bind(s)),s.completed();var l=t._this$child2;l.$s(t.$c$_this$child2),delete t.$c$_this$child2,l._removeUpdater("interval"),l.interval=700,l.on("triggered",function(){var t=this._get("menuView",!0);this.parent.selected(t.model.get(t.currentIndex))}.bind(l)),l.completed();var h,d={behavior__this_on_width:h=new P.Animation(e)};h.$c(d.$c$behavior__this_on_width={}),(h=d.behavior__this_on_width).$s(d.$c$behavior__this_on_width),delete d.$c$behavior__this_on_width,h._replaceUpdater("duration",function(){h.duration=h._get("consts").animationDuration},[h._get("consts"),"animationDuration"]),h.completed(),e.setAnimation("width",h),e.completed()};var Tt=l.PageActivity,zt=Tt.prototype,Et=e.ContentPage=function(t,e){Tt.apply(this,arguments)},Lt=Et.prototype=Object.create(zt);Lt.constructor=Et,Lt.componentName="src.ContentPage",Lt.initContentPage=function(t,e){var i=this._get("contentGrid",!0);this._getContentFunc=t,this._altGetContentFunc=e,0==i.count&&i.findVideos("121930779",!1,t),i.setFocus()},Lt.$c=function(t){var e=this;zt.$c.call(this,t.$b={});var i=new l.SearchTextInput(e);(t._this$child0=i).$c(t.$c$_this$child0={}),i._setId("searchLine"),e.addChild(i);var n=new P.Text(e);(t._this$child1=n).$c(t.$c$_this$child1={}),e.addChild(n);var o=new P.Item(e);(t._this$child2=o).$c(t.$c$_this$child2={});var r=new l.VideoGrid(o);(t._this_child2$child0=r).$c(t.$c$_this_child2$child0={}),r._setId("contentGrid"),o.addChild(r),e.addChild(o),e._setId("contentPageProto")},Lt.$s=function(t){zt.$s.call(this,t.$b),delete t.$b;var e=t._this$child0;e.$s(t.$c$_this$child0),delete t.$c$_this$child0,e._replaceUpdater("y",function(){e.y=30*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("x",function(){e.x=160*e._context.virtualScale},[e._context,"virtualScale"]),e.searchGame=function(t,e){var i=this._get("contentGrid",!0),n=this._get("api",!0),o=this._get("contentPageProto",!0);n.searchGame(t,function(t){t&&t.data&&t.data.length&&i.findVideos(t.data[0].id,e,o._altGetContentFunc)},function(){})}.bind(e),e.on("search",function(e){var i=this._get("contentGrid",!0),t=this._get("api",!0),n=this._get("contentPageProto",!0);if(e){var o=this;i.clear(),t.getUsers(e,function(t){t&&t.data&&0!=t.data.length?(i.findVideos(t.data[0].id,!1,n._getContentFunc),o.searchGame(e,!0)):o.searchGame(e,!1)},function(){o.searchGame(e,!0)})}}.bind(e)),e.onPressed("Down",function(t,e){this._get("contentGrid",!0).setFocus()}.bind(e)),e.completed();var i=t._this$child1;i.$s(t.$c$_this$child1),delete t.$c$_this$child1,i._replaceUpdater("color",function(){i.color=i._get("consts").textColor},[i._get("consts"),"textColor"]),i._replaceUpdater("text",function(){i.text=i._get("contentGrid").busy?"Loading...":"No content"},[i._get("contentGrid"),"busy"]),i._replaceUpdater("visible",function(){i.visible=0==i._get("contentGrid").count},[i._get("contentGrid"),"count"]),i.anchors._removeUpdater("centerIn"),i.anchors.centerIn=i.parent,i.font._removeUpdater("pixelSize"),i.font.pixelSize=32,i.completed();var n=t._this$child2;n.$s(t.$c$_this$child2),delete t.$c$_this$child2,n._replaceUpdater("y",function(){n.y=100*n._context.virtualScale},[n._context,"virtualScale"]),n._replaceUpdater("width",function(){n.width=n.parent.width},[n.parent,"width"]),n._removeUpdater("clip"),n.clip=!0,n._replaceUpdater("height",function(){n.height=600*n._context.virtualScale},[n._context,"virtualScale"]),n.onPressed("Up",function(t,e){this._get("searchLine",!0).setFocus()}.bind(n));var o=t._this_child2$child0;o.$s(t.$c$_this_child2$child0),delete t.$c$_this_child2$child0,o._replaceUpdater("y",function(){o.y=34*o._context.virtualScale},[o._context,"virtualScale"]),o._replaceUpdater("x",function(){o.x=160*o._context.virtualScale},[o._context,"virtualScale"]),o.on("selected",function(t){var e=this._get("root",!0),i=this.model.get(t);e.push("player",i)}.bind(o)),o.onChanged("currentRow",function(t){var e=this._get("contentPageProto",!0);t>=this.rows-3&&this._next&&!this.busy&&(this.findVideos(this.contentId,!0,e._getContentFunc),this.findVideos(this.contentId,!0,e._altGetContentFunc))}.bind(o)),o.completed(),n.completed(),this.completed()};var Rt=e.ContentPage,Mt=Rt.prototype,Dt=o.StreamsPage=function(t,e){Rt.apply(this,arguments)},Ft=Dt.prototype=Object.create(Mt);Ft.constructor=Dt,Ft.componentName="src.streams.StreamsPage",Ft.init=function(){var t=this._get("api",!0);this.initContentPage(t.getUserStreams,t.getGameStreams)},Ft.$c=function(t){Mt.$c.call(this,t.$b={})},Ft.$s=function(t){Mt.$s.call(this,t.$b),delete t.$b,this._removeUpdater("name"),this.name="streams",this.completed()};var Ht=P.Item,jt=Ht.prototype,Nt=s.BaseInput=function(t,e){Ht.apply(this,arguments),this._placeholderClass="",this.element.on("focus",function(){this.forceActiveFocus()}.bind(this)),this.element.on("blur",function(){}.bind(this)),this.element.on("change",function(){this.change()}.bind(this))},Vt=Nt.prototype=Object.create(jt);Vt.constructor=Nt,Vt.componentName="controls.input.BaseInput",Vt.change=P.createSignal("change"),d.addLazyProperty(Vt,"paddings",function(t,e){var i,n={lazy$paddings:i=new h.Paddings(t,e)};return i.$c(n.$c$lazy$paddings={}),(i=n.lazy$paddings).$s(n.$c$lazy$paddings),delete n.$c$lazy$paddings,i.completed(),i}),d.addProperty(Vt,"Color","color","#000"),d.addProperty(Vt,"Color","backgroundColor","#fff"),d.addProperty(Vt,"Font","font"),d.addProperty(Vt,"Border","border"),d.addProperty(Vt,"string","type","text"),d.addProperty(Vt,"PlaceHolder","placeholder"),d.addProperty(Vt,"bool","enabled",!0),d.addProperty(Vt,"bool","nativeFocus",$manifest$useNativeFocusForInput),d.addProperty(Vt,"string","inputMode"),d.addProperty(Vt,"string","autocomplete"),Vt.AlignLeft=0,Nt.AlignLeft=0,Vt.AlignRight=1,Nt.AlignRight=1,Vt.AlignHCenter=2,Nt.AlignHCenter=2,Vt.Justify=3,Nt.Justify=3,d.addProperty(Vt,"enum","horizontalAlignment"),Vt._getValue=function(){return this.element.getProperty("value")},Vt._updateSize=function(){var t={width:this.width,height:this.height};this.style(t)},Vt.focusBrowser=function(){var t=this._get("focusTimer",!0);this.nativeFocus&&t.restart()},Vt.blurBrowser=function(){var t=this._get("focusTimer",!0);this.nativeFocus&&(t.stop(),this.element.blur())},Vt.getTag=function(){return"input"},Vt.registerStyle=function(t){t.addRule("input","position: absolute; visibility: inherit; border-style: solid; border-width: 0px; box-sizing: border-box;"),t.addRule("input:focus","outline: none;")},Vt._updateValue=function(t){t!==this._getValue()&&this._setValue(t)},Vt._setValue=function(t){this.element.setProperty("value",t)},P._protoOnChanged(Vt,"recursiveVisible",function(t){t||this.blurBrowser()}),P._protoOnChanged(Vt,"activeFocus",function(t){t?this.focusBrowser():this.blurBrowser()}),P._protoOnChanged(Vt,"horizontalAlignment",function(t){switch(t){case this.AlignLeft:this.style("text-align","left");break;case this.AlignRight:this.style("text-align","right");break;case this.AlignHCenter:this.style("text-align","center");break;case this.AlignJustify:this.style("text-align","justify")}}),P._protoOnChanged(Vt,"autocomplete",function(t){this.element.setAttribute("autocomplete",t)}),P._protoOnChanged(Vt,"enabled",function(t){this.element.setAttribute("disabled",!t)}),P._protoOnChanged(Vt,"inputMode",function(t){this.element.setAttribute("inputmode",t)});k=function(t){this._updateSize()};P._protoOnChanged(Vt,"height",k),P._protoOnChanged(Vt,"width",k),P._protoOnChanged(Vt,"type",function(t){this.element.setAttribute("type",t)}),P._protoOnChanged(Vt,"backgroundColor",function(t){this.style("background",t)}),P._protoOnChanged(Vt,"color",function(t){this.style("color",t)}),Vt.$c=function(t){var e=this;jt.$c.call(this,t.$b={});var i=new P.Timer(e);(t._this$child0=i).$c(t.$c$_this$child0={}),i._setId("focusTimer"),e.addChild(i);var n=new h.PlaceHolder(e);(t._this$placeholder=n).$c(t.$c$_this$placeholder={}),e.placeholder=n;var o=new P.Font(e);(t._this$font=o).$c(t.$c$_this$font={}),e.font=o;var r=new P.Border(e);(t._this$border=r).$c(t.$c$_this$border={}),e.border=r},Vt.$s=function(t){jt.$s.call(this,t.$b),delete t.$b;var e=t._this$placeholder;e.$s(t.$c$_this$placeholder),delete t.$c$_this$placeholder,e.completed();var i=t._this$font;i.$s(t.$c$_this$font),delete t.$c$_this$font,i.completed();var n=t._this$border;n.$s(t.$c$_this$border),delete t.$c$_this$border,n.completed(),this._removeUpdater("cssPointerTouchEvents"),this.cssPointerTouchEvents=!0;var o=t._this$child0;o.$s(t.$c$_this$child0),delete t.$c$_this$child0,o._removeUpdater("interval"),o.interval=100,o.on("triggered",function(){this.parent.element.focus()}.bind(o)),o.completed(),this.completed()};var Wt=s.BaseInput,Bt=Wt.prototype,Yt=s.TextInput=function(t,e){Wt.apply(this,arguments),this.element.on("input",function(){this.text=this._getValue()}.bind(this))},qt=Yt.prototype=Object.create(Bt);qt.constructor=Yt,qt.componentName="controls.input.TextInput",d.addProperty(qt,"string","text"),d.addProperty(qt,"bool","passwordMode",!1),P._protoOnChanged(qt,"text",function(t){this._updateValue(t)}),qt.$c=function(t){Bt.$c.call(this,t.$b={})},qt.$s=function(t){var e=this;Bt.$s.call(this,t.$b),delete t.$b,e._removeUpdater("width"),e.width=173,e._replaceUpdater("type",function(){e.type=e.passwordMode?"password":"text"},[e,"passwordMode"]),e._removeUpdater("height"),e.height=20,e.completed()};var Xt=h.BaseActivity,Gt=Xt.prototype,Kt=h.LazyActivity=function(t,e){Xt.apply(this,arguments)},Jt=Kt.prototype=Object.create(Gt);Jt.constructor=Kt,Jt.componentName="controls.core.LazyActivity",d.addProperty(Jt,"string","component"),Jt.init=function(){S.controls.core.BaseActivity.prototype.init.apply(this,arguments);var t=this.createActivity();t&&t.init.apply(t,arguments)},Jt.start=function(){this.createActivity().start(),this.visible=!0},Jt.stop=function(){this.visible=!1;var t=this.getActivity();t&&t.stop()},Jt.getActivity=function(){return this._get("loader",!0).item},Jt.createActivity=function(){var t=this._get("loader",!0),e=t.item;if(!e){if(t.source=this.component,((e=t.item).anchors.fill=this)._context._processActions(),e.manager=this.manager,!e)throw new Error("can't create component "+this.component);var i=this;e.on("started",function(){i.started()}),e.on("stopped",function(){i.stopped()})}return t.item},Jt.$c=function(t){Gt.$c.call(this,t.$b={});var e=new P.Loader(this);(t._this$child0=e).$c(t.$c$_this$child0={}),e._setId("loader"),this.addChild(e)},Jt.$s=function(t){var e=this;Gt.$s.call(this,t.$b),delete t.$b,e.anchors._replaceUpdater("fill",function(){e.anchors.fill=e.manager},[e,"manager"]);var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i.anchors._replaceUpdater("fill",function(){i.anchors.fill=i.parent.manager},[i.parent,"manager"]),i.completed(),e.completed()};var Zt=P.Object,Qt=Zt.prototype,te=P.Radius=function(t,e){Zt.apply(this,arguments)},ee=te.prototype=Object.create(Qt);ee.defaultProperty="radius",ee.constructor=te,ee.componentName="core.Radius",d.addProperty(ee,"real","radius"),d.addProperty(ee,"real","topLeft"),d.addProperty(ee,"real","topRight"),d.addProperty(ee,"real","bottomLeft"),d.addProperty(ee,"real","bottomRight"),ee.__complete=function(){Qt.__complete.call(this);var t=this.radius,e=this.topLeft||t,i=this.topRight||t,n=this.bottomLeft||t,o=this.bottomRight||t;e==i&&n==o&&e==n?this.parent.style("border-radius",e):this.parent.style("border-radius",e+"px "+i+"px "+o+"px "+n+"px")};k=function(){log("updating border")};P._protoOn(ee,"bottomLeftUpdate",k),P._protoOn(ee,"radiusUpdate",k),P._protoOn(ee,"bottomRightUpdate",k),P._protoOn(ee,"topLeftUpdate",k),P._protoOn(ee,"topRightUpdate",k),ee.$c=function(t){Qt.$c.call(this,t.$b={})},ee.$s=function(t){Qt.$s.call(this,t.$b),delete t.$b,this.completed()};var ie=P.Object,ne=ie.prototype,oe=h.Paddings=function(t,e){ie.apply(this,arguments)},re=oe.prototype=Object.create(ne);re.constructor=oe,re.componentName="controls.core.Paddings",d.addProperty(re,"int","top"),d.addProperty(re,"int","left"),d.addProperty(re,"int","right"),d.addProperty(re,"int","bottom"),d.addProperty(re,"int","all"),P._protoOnChanged(re,"bottom",function(t){this.parent.style("padding-bottom",t)}),P._protoOnChanged(re,"left",function(t){this.parent.style("padding-left",t)}),P._protoOnChanged(re,"right",function(t){this.parent.style("padding-right",t)}),P._protoOnChanged(re,"top",function(t){this.parent.style("padding-top",t)}),re.$c=function(t){ne.$c.call(this,t.$b={})},re.$s=function(t){var e=this;ne.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("top",function(){e.top=e.all},[e,"all"]),e._replaceUpdater("right",function(){e.right=e.all},[e,"all"]),e._replaceUpdater("bottom",function(){e.bottom=e.all},[e,"all"]),e._replaceUpdater("left",function(){e.left=e.all},[e,"all"]),e.completed()};var ae=P.Item,se=ae.prototype,ce=P.Loader=function(t,e){ae.apply(this,arguments)},le=ce.prototype=Object.create(se);le.constructor=ce,le.componentName="core.Loader",le.loaded=P.createSignal("loaded"),d.addProperty(le,"string","source"),d.addProperty(le,"Object","item"),le.discard=function(){this.discardItem(),P.Item.prototype.discard.call(this)},le.discardItem=function(){var t=this.item;t&&(t.discard(),t=null)},le._load=function(){var t=this.source;if(t){log("loading "+t+"…");for(var e=t.split("."),i=S;e.length;){if(void 0===(i=i[e.shift()]))throw new Error("unknown component used: "+t)}this.item=new i(this),P.core.createObject(this.item),this.loaded()}},le.__complete=function(){se.__complete.call(this),!this.item&&this.source&&this._load()},P._protoOnChanged(le,"recursiveVisible",function(t){this.item&&this._updateVisibilityForChild(this.item,t)}),P._protoOnChanged(le,"source",function(t){this.discardItem(),this._load()}),le.$c=function(t){se.$c.call(this,t.$b={})},le.$s=function(t){se.$s.call(this,t.$b),delete t.$b,this.completed()};var he=P.Item,de=he.prototype,pe=P.BaseLayout=function(t,e){he.apply(this,arguments),this.count=0,this._padding={}},ue=pe.prototype=Object.create(de);ue.constructor=pe,ue.componentName="core.BaseLayout",d.addProperty(ue,"int","count"),d.addProperty(ue,"bool","trace"),d.addProperty(ue,"int","spacing"),d.addProperty(ue,"int","currentIndex"),d.addProperty(ue,"int","contentWidth"),d.addProperty(ue,"int","contentHeight"),d.addProperty(ue,"bool","keyNavigationWraps"),d.addProperty(ue,"bool","handleNavigationKeys"),d.addProperty(ue,"int","layoutDelay"),d.addProperty(ue,"int","prerenderDelay"),d.addProperty(ue,"bool","offlineLayout"),d.addLazyProperty(ue,"padding",function(t,e){var i,n={lazy$padding:i=new P.BaseLayoutContentPadding(t,e)};return i.$c(n.$c$lazy$padding={}),(i=n.lazy$padding).$s(n.$c$lazy$padding),delete n.$c$lazy$padding,i.completed(),i}),ue._scheduleLayout=function(){(this.recursiveVisible||this.offlineLayout)&&(0<=this.prerenderDelay&&0<=this.layoutDelay&&this.layoutDelay<this.prerenderDelay?(this._context.delayedAction("layout",this,this._doLayoutNP,this.layoutDelay),this._context.delayedAction("prerender",this,this._doLayout,this.prerenderDelay)):this._context.delayedAction("layout",this,this._doLayout,this.layoutDelay))},ue._doLayout=function(){this._attach(),this._processUpdates(),this._layout()},ue._doLayoutNP=function(){this._attach(),this._processUpdates(),this._layout(!0)},ue.__complete=function(){de.__complete.call(this),this._scheduleLayout()};k=function(){};ue._attach=k,ue._processUpdates=k;T=function(t){this._scheduleLayout()};P._protoOnChanged(ue,"recursiveVisible",T),P._protoOnChanged(ue,"spacing",T),ue.$c=function(t){de.$c.call(this,t.$b={})},ue.$s=function(t){var e=this;de.$s.call(this,t.$b),delete t.$b,e._removeUpdater("layoutDelay"),e.layoutDelay=-1,e._removeUpdater("prerenderDelay"),e.prerenderDelay=-1,e.completed()};var fe=P.Object,ge=fe.prototype,_e=P.Request=function(t,e){fe.apply(this,arguments)},me=_e.prototype=Object.create(ge);me.constructor=_e,me.componentName="core.Request",d.addProperty(me,"bool","loading",!1),me.ajax=function(t){t.done&&(t.done=this._context.wrapNativeCallback(t.done)),t.error&&(t.error=this._context.wrapNativeCallback(t.error)),this._context.backend.ajax(this,t)},me.$c=function(t){ge.$c.call(this,t.$b={})},me.$s=function(t){ge.$s.call(this,t.$b),delete t.$b,this.completed()};var ve=h.ActivityManager,ye=ve.prototype,$e=e.UiApp=function(t,e){ve.apply(this,arguments)},be=$e.prototype=Object.create(ye);be.constructor=$e,be.componentName="src.UiApp",be.__complete=function(){ye.__complete.call(this),this.push("videos")},be.$c=function(t){var e=this;ye.$c.call(this,t.$b={});var i=new l.TwitchApi(e);(t._this$child0=i).$c(t.$c$_this$child0={}),i._setId("api"),e.addChild(i);var n=new l.Consts(e);(t._this$child1=n).$c(t.$c$_this$child1={}),n._setId("consts"),e.addChild(n);var o=new h.LazyActivity(e);(t._this$child2=o).$c(t.$c$_this$child2={}),e.addChild(o);var r=new h.LazyActivity(e);(t._this$child3=r).$c(t.$c$_this$child3={}),e.addChild(r);var a=new h.LazyActivity(e);(t._this$child4=a).$c(t.$c$_this$child4={}),e.addChild(a);var s=new h.LazyActivity(e);(t._this$child5=s).$c(t.$c$_this$child5={}),e.addChild(s);var c=new l.AppMenu(e);(t._this$child6=c).$c(t.$c$_this$child6={}),c._setId("menu"),e.addChild(c),e._setId("root")},be.$s=function(t){var e=this;ye.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("width",function(){e.width=1280*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("height",function(){e.height=720*e._context.virtualScale},[e._context,"virtualScale"]);var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i.completed();var n=t._this$child1;n.$s(t.$c$_this$child1),delete t.$c$_this$child1,n.completed();var o=t._this$child2;o.$s(t.$c$_this$child2),delete t.$c$_this$child2,o._removeUpdater("component"),o.component="src.videos.VideosPage",o._removeUpdater("name"),o.name="videos",o.completed();var r=t._this$child3;r.$s(t.$c$_this$child3),delete t.$c$_this$child3,r._removeUpdater("component"),r.component="src.clips.ClipsPage",r._removeUpdater("name"),r.name="clips",r.completed();var a=t._this$child4;a.$s(t.$c$_this$child4),delete t.$c$_this$child4,a._removeUpdater("component"),a.component="src.streams.StreamsPage",a._removeUpdater("name"),a.name="streams",a.completed();var s=t._this$child5;s.$s(t.$c$_this$child5),delete t.$c$_this$child5,s._removeUpdater("component"),s.component="src.player.TwitchPlayerPage",s._removeUpdater("name"),s.name="player",s.completed();var c=t._this$child6;c.$s(t.$c$_this$child6),delete t.$c$_this$child6,c._replaceUpdater("visible",function(){c.visible=1==c._get("root").count},[c._get("root"),"count"]),c.on("selected",function(t){this._get("root",!0).replaceTopActivity(t.activity)}.bind(c)),c.completed(),e.completed()};var we=P.Object,xe=we.prototype,Ce=h.PlaceHolder=function(t,e){we.apply(this,arguments),this._placeholderClass=""},Se=Ce.prototype=Object.create(xe);Se.constructor=Ce,Se.componentName="controls.core.PlaceHolder",d.addProperty(Se,"string","text"),d.addProperty(Se,"Color","color"),d.addProperty(Se,"Font","font"),Se.getClass=function(){var t;return this._placeholderClass?t=this._placeholderClass:(t=this._placeholderClass=this._context.stylesheet.allocateClass("input"),this.parent.element.addClass(t)),t},Se.setPlaceholderColor=function(t){var e=this.getClass(),i=P.Color.normalize(t);this.parent.element.style("-pure-placeholder-color",i);["::-webkit-input-placeholder","::-moz-placeholder",":-moz-placeholder",":-ms-input-placeholder"].forEach(function(t){this._context.stylesheet.addRule("."+e+t,"color: "+i)}.bind(this))},P._protoOnChanged(Se,"text",function(t){this.parent.element.setAttribute("placeholder",t)}),P._protoOnChanged(Se,"color",function(t){this.setPlaceholderColor(t)}),Se.$c=function(t){xe.$c.call(this,t.$b={});var e=new h.PlaceholderFont(this);(t._this$font=e).$c(t.$c$_this$font={}),this.font=e},Se.$s=function(t){xe.$s.call(this,t.$b),delete t.$b;var e=t._this$font;e.$s(t.$c$_this$font),delete t.$c$_this$font,e.completed(),this.completed()};var Pe=P.BaseLayout,ke=Pe.prototype,Ae=P.BaseView=function(t,e){Pe.apply(this,arguments),this._items=[],this._modelUpdate=new P.model.ModelUpdate,this._attached=null,this._modelReset=this._onReset.bind(this),this._modelRowsInserted=this._onRowsInserted.bind(this),this._modelRowsChanged=this._onRowsChanged.bind(this),this._modelRowsRemoved=this._onRowsRemoved.bind(this)},Oe=Ae.prototype=Object.create(ke);Oe.constructor=Ae,Oe.componentName="core.BaseView",Oe.scrollEvent=P.createSignal("scrollEvent"),Oe.layoutFinished=P.createSignal("layoutFinished"),d.addProperty(Oe,"Item","highlight"),d.addProperty(Oe,"Object","model"),d.addProperty(Oe,"Item","delegate"),d.addProperty(Oe,"int","contentX"),d.addProperty(Oe,"int","contentY"),d.addProperty(Oe,"int","scrollingStep",0),d.addProperty(Oe,"int","animationDuration",0),d.addProperty(Oe,"string","animationEasing","ease"),d.addProperty(Oe,"bool","contentFollowsCurrentItem"),d.addProperty(Oe,"bool","nativeScrolling"),d.addProperty(Oe,"real","prerender",.5),d.addProperty(Oe,"string","visibilityProperty"),d.addProperty(Oe,"BaseViewContent","content"),Oe.Contain=0,Ae.Contain=0,Oe.Beginning=1,Ae.Beginning=1,Oe.Center=2,Ae.Center=2,Oe.End=3,Ae.End=3,Oe.Visible=4,Ae.Visible=4,Oe.Page=5,Ae.Page=5,d.addProperty(Oe,"enum","positionMode"),Oe.discard=function(){this._detach(),P.BaseLayout.prototype.discard.apply(this)},Oe._processUpdates=function(){this._modelUpdate.apply(this),qml.core.BaseLayout.prototype._processUpdates.apply(this),this.count=this._items.length},Oe._updateHighlightForCurrentItem=function(){this._updateHighlight(this.itemAtIndex(this.currentIndex))},Oe.focusCurrent=function(){var t=this.count;if(0!==t){var e=this.currentIndex;if(e<0||t<=e)this.keyNavigationWraps?this.currentIndex=(e+t)%t:this.currentIndex=e<0?0:t-1;else{var i=this.itemAtIndex(e);i&&this.focusChild(i),this.contentFollowsCurrentItem&&this.positionViewAtIndex(e),this._updateHighlight(i)}}},Oe._attach=function(){var t=this._get("model",!0);if(!this._attached&&this.model&&this.delegate){this.trace&&log("attaching model...");var e=P.Model,i=typeof(t=this.model);if(void 0!==e&&t instanceof e);else if(Array.isArray(t))t=new P.model.ArrayModelWrapper(t);else{if("number"!==i)throw new Error("unknown value of type '"+typeof t+"', attached to model property: "+t+("object"===i&&"componentName"in t?", component name: "+t.componentName:""));for(var n=[],o=0;o<t;++o)n.push({});t=new P.model.ArrayModelWrapper(n)}t.on("reset",this._modelReset),t.on("rowsInserted",this._modelRowsInserted),t.on("rowsChanged",this._modelRowsChanged),t.on("rowsRemoved",this._modelRowsRemoved),this._attached=t,this._onReset()}},Oe._detach=function(){var t=this._get("model",!0);(t=this._attached)&&(this.trace&&log("detaching model..."),this._attached=null,t.removeListener("reset",this._modelReset),t.removeListener("rowsInserted",this._modelRowsInserted),t.removeListener("rowsChanged",this._modelRowsChanged),t.removeListener("rowsRemoved",this._modelRowsRemoved))},Oe._onReset=function(){var t=this._get("model",!0);t=this._attached;this.trace&&log("reset",this._items.length,t.count),this._modelUpdate.reset(t),this._scheduleLayout()},Oe.__complete=function(){ke.__complete.call(this);var i=this;this.element.on("scroll",function(){var t=i.element.getScrollX(),e=i.element.getScrollY();i._updateScrollPositions(t,e),i.scrollEvent(t,e)}.bind(this))},Oe._updateItems=function(t,e){for(var i=t;i<e;++i)this._updateDelegate(i)},Oe._onRowsChanged=function(t,e){this.trace&&log("rows changed",t,e),this._modelUpdate.update(this._attached,t,e),this._scheduleLayout()},Oe._onRowsInserted=function(t,e){this.trace&&log("rows inserted",t,e),this._modelUpdate.insert(this._attached,t,e),this._scheduleLayout()},Oe._onRowsRemoved=function(t,e){this.trace&&log("rows removed",t,e),this._modelUpdate.remove(this._attached,t,e),this._scheduleLayout()},Oe._removeItems=function(t,e){var i=this._items.splice(t,e-t),n=this;i.forEach(function(t){n._discardItem(t)})},Oe._insertItems=function(t,e){var i=e-t+2,n=new Array(i);n[0]=t,n[1]=0;for(var o=2;o<i;++o)n[o]=null;Array.prototype.splice.apply(this._items,n)},Oe._updateDelegateIndex=function(t){var e=this._items[t];e&&(e._local.model.index=t,e._createPropertyStorage("_rowIndex").callOnChanged(e,"_rowIndex"))},Oe._updateDelegate=function(t){var e=this._items[t];if(e){var i=this._attached.get(t);i.index=t,e._local.model=i,e._createPropertyStorage("_row").callOnChanged(e,"_row")}},Oe.itemAtIndex=function(t){var e=this._items[t];return e||null},Oe._createDelegate=function(t,e){var i=this._items,n=i[t];if(null!=n)return n;var o=this.visibilityProperty,r=this._attached.get(t);return this.trace&&log("createDelegate",t,r),o&&!r[o]?null:(r.index=t,n=this.delegate(this,r),(i[t]=n).view=this,n.element.remove(),void 0===e?this.content.element.append(n.element):e.call(this,n),n.recursiveVisible=this.recursiveVisible&&n.visible&&n.visibleInView,n)},Oe._discardItem=function(t){null!==t&&(this.focusedChild===t&&(this.focusedChild=null),t.discard())},Oe._updateHighlight=function(t){var e=this.highlight;e&&t&&(e.viewX=t.viewX,e.viewY=t.viewY,e.width=t.width,e.height=t.height,e.newBoundingBox())},Oe.positionViewAtItemHorizontally=function(t,e,i){var n=this.contentX,o=(this.contentY,t[0]),r=(t[1],t[2]),a=(t[3],this.width),s=(this.height,o-a/2+r/2);a<r?this.contentX=i?s:o:e&&this.contentWidth>a?this.contentX=s<0?0:o>this.contentWidth-a/2-r/2?this.contentWidth-a:s:o-n<=0?this.contentX=o:a<o-n+r&&(this.contentX=o+r-a)},Oe.positionViewAtItemVertically=function(t,e,i){this.contentX;var n=this.contentY,o=(t[0],t[1]),r=(t[2],t[3]),a=(this.width,this.height),s=o-a/2+r/2;a<r?this.contentY=i?s:o:e&&this.contentHeight>a?this.contentY=s<0?0:o>this.contentHeight-a/2-r/2?this.contentHeight-a:s:o-n<=0?this.contentY=o:a<o-n+r&&(this.contentY=o+r-a)},Oe.itemAt=function(t,e){var i=this.indexAt(t,e);return 0<=i?this._items[i]:null},Oe._updateScrollPositions=function(t,e,i){this._setProperty("contentX",t),this._setProperty("contentY",e),this.content._updateScrollPositions(t,e,i)},P._protoOnChanged(Oe,"contentX",function(t){this.nativeScrolling?this.element.setScrollX(t):this.content.x=-t}),P._protoOnChanged(Oe,"contentY",function(t){this.nativeScrolling?this.element.setScrollY(t):this.content.y=-t}),P._protoOnChanged(Oe,"model",function(t){this.trace&&log("model changed to ",t),this._detach(),this._modelUpdate.clear(),this._removeItems(0,this.count),this.count=0,this._scheduleLayout()}),P._protoOnChanged(Oe,"recursiveVisible",function(e){e&&this._scheduleLayout();var i=this;this._items.forEach(function(t){null!==t&&i._updateVisibilityForChild(t,e)}),this._updateVisibilityForChild(this.content,e);var t=this.highlight;t&&this._updateVisibilityForChild(t,e)}),P._protoOnChanged(Oe,"delegate",function(t){t&&(t.visible=!1)}),P._protoOnChanged(Oe,"currentIndex",function(t){this.focusCurrent()}),P._protoOnChanged(Oe,"highlight",function(t){var e=t;e&&(e.view=this,e.element.remove(),this.content.element.prepend(e.element))}),P._protoOnChanged(Oe,"focusedChild",function(t){var e=this._items.indexOf(this.focusedChild);0<=e&&(this.currentIndex=e)});k=function(t){this._scheduleLayout()};P._protoOnChanged(Oe,"height",k),P._protoOnChanged(Oe,"width",k),P._protoOn(Oe,"layoutFinished",function(){this.focusCurrent(),this._updateHighlightForCurrentItem()}),Oe.$c=function(t){ke.$c.call(this,t.$b={});var e=new P.BaseViewContent(this);(t._this$content=e).$c(t.$c$_this$content={}),this.content=e},Oe.$s=function(t){var e=this;ke.$s.call(this,t.$b),delete t.$b,e._removeUpdater("keyNavigationWraps"),e.keyNavigationWraps=!0,e._replaceUpdater("contentFollowsCurrentItem",function(){e.contentFollowsCurrentItem=!e.nativeScrolling},[e,"nativeScrolling"]),e._replaceUpdater("cssPointerTouchEvents",function(){e.cssPointerTouchEvents=e.nativeScrolling},[e,"nativeScrolling"]);var i=t._this$content;i.$s(t.$c$_this$content),delete t.$c$_this$content,i._replaceUpdater("cssTranslatePositioning",function(){i.cssTranslatePositioning=i.parent.cssTranslatePositioning},[i.parent,"cssTranslatePositioning"]),i._replaceUpdater("cssPointerTouchEvents",function(){i.cssPointerTouchEvents=i.parent.cssPointerTouchEvents},[i.parent,"cssPointerTouchEvents"]);var n,o={behavior__this_content_on_y:n=new P.Animation(i)};n.$c(o.$c$behavior__this_content_on_y={}),(n=o.behavior__this_content_on_y).$s(o.$c$behavior__this_content_on_y),delete o.$c$behavior__this_content_on_y,n._replaceUpdater("duration",function(){n.duration=n.parent.parent.nativeScrolling?0:n.parent.parent.animationDuration},[n.parent.parent,"nativeScrolling",n.parent.parent,"animationDuration"]),n._replaceUpdater("easing",function(){n.easing=n.parent.parent.animationEasing},[n.parent.parent,"animationEasing"]),n.completed(),i.setAnimation("y",n);var r,a={behavior__this_content_on_x:r=new P.Animation(i)};r.$c(a.$c$behavior__this_content_on_x={}),(r=a.behavior__this_content_on_x).$s(a.$c$behavior__this_content_on_x),delete a.$c$behavior__this_content_on_x,r._replaceUpdater("duration",function(){r.duration=r.parent.parent.nativeScrolling?0:r.parent.parent.animationDuration},[r.parent.parent,"animationDuration",r.parent.parent,"nativeScrolling"]),r._replaceUpdater("easing",function(){r.easing=r.parent.parent.animationEasing},[r.parent.parent,"animationEasing"]),r.completed(),i.setAnimation("x",r);var s,c={behavior__this_content_on_transform:s=new P.Animation(i)};s.$c(c.$c$behavior__this_content_on_transform={}),(s=c.behavior__this_content_on_transform).$s(c.$c$behavior__this_content_on_transform),delete c.$c$behavior__this_content_on_transform,s._replaceUpdater("duration",function(){s.duration=s.parent.parent.nativeScrolling?0:s.parent.parent.animationDuration},[s.parent.parent,"animationDuration",s.parent.parent,"nativeScrolling"]),s._replaceUpdater("easing",function(){s.easing=s.parent.parent.animationEasing},[s.parent.parent,"animationEasing"]),s.completed(),i.setAnimation("transform",s),i.completed(),e._replaceUpdater("nativeScrolling",function(){e.nativeScrolling=e._context.system.device===e._context.system.Mobile},[e._context.system,"device",e._context.system,"Mobile"]),e._removeUpdater("contentWidth"),e.contentWidth=1,e._removeUpdater("contentHeight"),e.contentHeight=1,e._removeUpdater("handleNavigationKeys"),e.handleNavigationKeys=!0,e.completed()};var Ie=P.Object,Ue=Ie.prototype,Te=u.Method=function(t,e){Ie.apply(this,arguments)},ze=Te.prototype=Object.create(Ue);ze.constructor=Te,ze.componentName="controls.web.api.Method",d.addProperty(ze,"string","type","GET"),d.addProperty(ze,"string","name"),d.addProperty(ze,"string","path"),ze.args=function(){},ze.call=function(t,e){var i=this.args.length;if(e.length<i+2)throw new Error("not enough arguments for method "+this.name);i=e.length-2;var n=Array.prototype.slice.call(e,0,i),o=this.args.apply(this,n),r=e[i+0],a=e[i+1],s={},c=this.headers(s);void 0!==c&&(s=c);var l=this.pathArgs(this.path,n);t.call(l,r,a,this.type,o,s)},ze.headers=function(t){},ze.pathArgs=function(t,e){t=this.path;var i=0;return t=t.replace(/\{(\w+)\}/g,function(t){return i<e.length?e[i++]:""})},P._protoOnChanged(ze,"name",function(t){this.parent._registerMethod(this.name,this)}),ze.$c=function(t){Ue.$c.call(this,t.$b={})},ze.$s=function(t){Ue.$s.call(this,t.$b),delete t.$b,this.completed()};var Ee=P.Item,Le=Ee.prototype,Re=a.IFrame=function(t,e){Ee.apply(this,arguments);var i=this;this.element.on("load",function(){i.source=this.dom.src,i.loaded()})},Me=Re.prototype=Object.create(Le);Me.constructor=Re,Me.componentName="controls.web.IFrame",Me.loaded=P.createSignal("loaded"),Me.message=P.createSignal("message"),d.addProperty(Me,"string","source"),d.addProperty(Me,"string","origin"),Me.getTag=function(){return"iframe"},Me.postMessage=function(t){this.element.dom.contentWindow.postMessage(t,this.source)},P._protoOnChanged(Me,"source",function(t){this.origin=new URL(t).origin,this.element.dom.src=t}),Me.$c=function(t){Le.$c.call(this,t.$b={})},Me.$s=function(t){Le.$s.call(this,t.$b),delete t.$b,this._get("context")&&this._get("context").on("message",function(t){t.origin===this.origin&&(log("IFrame: incoming message from "+t.origin),this.message(t))}.bind(this)),this.completed()};var De=P.BaseView,Fe=De.prototype,He=P.ListView=function(t,e){De.apply(this,arguments),this._sizes=[],this._scrollDelta=0},je=He.prototype=Object.create(Fe);je.constructor=He,je.componentName="core.ListView",je.Vertical=0,He.Vertical=0,je.Horizontal=1,He.Horizontal=1,d.addProperty(je,"enum","orientation"),je._updateOverflow=function(){if(this.nativeScrolling){var t={};this.orientation===this.Horizontal?(t["overflow-x"]="auto",t["overflow-y"]="hidden"):(t["overflow-x"]="hidden",t["overflow-y"]="auto"),this.style(t)}},je.__complete=function(){Fe.__complete.call(this),this._updateOverflow()},je.move=function(t,e){var i,n,o=this.orientation===this.Horizontal;o&&this.contentWidth>this.width?((i=this.contentX+t)<0?i=0:i>this.contentWidth-this.width&&(i=this.contentWidth-this.width),this.contentX=i):!o&&this.contentHeight>this.height&&((n=this.contentY+e)<0?n=0:n>this.contentHeight-this.height&&(n=this.contentHeight-this.height),this.contentY=n)},je.positionViewAtIndex=function(t){this.trace&&log("positionViewAtIndex "+t);var e=this.orientation===this.Horizontal,i=this.getItemPosition(t),n=this.positionMode===this.Center;e?this.positionViewAtItemHorizontally(i,n,!0):this.positionViewAtItemVertically(i,n,!0)},je._createDelegate=function(o){var r=P.BaseView.prototype._createDelegate.apply(this,arguments),t=function(t){this._scheduleLayout();var e=this.orientation===this.Horizontal;if(this.nativeScrolling&&e==t){var i=e?r.viewX:r.viewY,n=e?r.width:r.height;i<(e?this.element.getScrollX():this.element.getScrollY())&&(this._scrollDelta+=n-this._sizes[o])}};return this.connectOnChanged(r,"width",t.bind(this,!0)),this.connectOnChanged(r,"height",t.bind(this,!1)),r},je.getItemPosition=function(t){var e=this._items,i=e[t];if(i)return[i.viewX+i.x,i.viewY+i.y,i.width,i.height];for(var n=0,o=0,r=0,a=0,s=t;0<=s;--s)if(e[s]){n=(i=e[s]).viewX+i.x,o=i.viewY+i.y,r=i.width,a=i.height;break}var c=t-s;return 0<c&&(n+=c*(r+this.spacing),o+=c*(a+this.spacing)),[n,o,r,a]},je._layout=function(t){var e=this._get("model",!0);if(e=this._attached)if(this.count=e.count,this.recursiveVisible||this.offlineLayout){var i=this.orientation===this.Horizontal,n=this._padding,o=n.left||0,r=n.top||0,a=this._items,s=this._sizes,c=a.length,l=this.width-o-(n.right||0),h=this.height-(n.bottom||0),d=!1,p=i?o:r,u=p,f=i?this.content.x:this.content.y,g=i?l:h,_=0,m=0,v=this.currentIndex,y=!t,$=t?0:this.prerender*g,b=-$,w=g+$;0!=this._scrollDelta&&(this.nativeScrolling&&(i?this.element.setScrollX(this.element.getScrollX()-this._scrollDelta):this.element.setScrollY(this.element.getScrollY()-this._scrollDelta)),this._scrollDelta=0),this.trace&&log("layout "+c+" into "+l+"x"+h+" @ "+this.content.x+","+this.content.y+", prerender: "+$+", range: "+b+":"+w);for(var x,C=i?function(t){return t.width}:function(t){return t.height},S=0,P=0;P<c&&(void 0===x||u+f<w);++P,++S){var k=a[P],A=u+f,O=s[P]||x;void 0===x&&void 0!==O&&(x=O);var I=b<=A+(void 0!==O?O:0)&&A<w||v===P;if(k||(I||void 0===O)&&(k=this._createDelegate(P),d=!0),k&&(O=x=s[P]=C(k)),k){var U=0<=A+O&&A<g;k.x+k.width>_&&(_=k.width+k.x),k.y+k.height>m&&(m=k.height+k.y),i?k.viewX=u:k.viewY=u,v!==P||k.focused||(this.focusChild(k),this.contentFollowsCurrentItem&&this.size&&this.positionViewAtIndex(P)),k.visibleInView=U,!I&&y&&(this.trace&&log("discarding delegate",P),this._discardItem(k),d=!(a[P]=null))}else{var T=u+x;i?_<T&&(_=T):m<T&&(m=T)}u+=O+this.spacing}for(;P<c;++P){(k=a[P])&&(k.visibleInView=!1,y&&(this._discardItem(k),d=!(a[P]=null)))}p<u&&(u-=this.spacing),s.length>a.length&&(s=s.slice(0,a.length)),S&&(u*=a.length/S),this.trace&&log("result: "+u+", max: "+_+"x"+m),i?(this.content.width=u,this.content.height=m,this.contentWidth=u,this.contentHeight=m):(this.content.width=_,this.content.height=u,this.contentWidth=_,this.contentHeight=u),this.layoutFinished(),d&&this._context.scheduleComplete()}else this.layoutFinished();else this.layoutFinished()},je.indexAt=function(t,e){var i=this._items;if(t+=this.contentX,e+=this.contentY,this.orientation===S.core.ListView.prototype.Horizontal)for(var n=0;n<i.length;++n){if(r=i[n]){var o=r.viewX;if(o<=t&&t<o+r.width)return n}}else for(n=0;n<i.length;++n){var r;if(r=i[n]){var a=r.viewY;if(a<=e&&e<a+r.height)return n}}return-1},P._protoOnChanged(je,"orientation",function(t){this._updateOverflow(),this._scheduleLayout(),this._sizes=[]}),P._protoOnKey(je,"Key",function(t,e){if(!this.handleNavigationKeys)return e.accepted=!1;if(this.orientation===this.Horizontal){if("Left"===t)return 0!==this.currentIndex||this.keyNavigationWraps?(0===this.currentIndex&&this.keyNavigationWraps?this.currentIndex=this.count-1:--this.currentIndex,e.accepted=!0):e.accepted=!1;if("Right"===t)return this.currentIndex!==this.count-1||this.keyNavigationWraps?(this.currentIndex===this.count-1&&this.keyNavigationWraps?this.currentIndex=0:++this.currentIndex,e.accepted=!0):e.accepted=!1}else{if("Up"===t)return 0!==this.currentIndex||this.keyNavigationWraps?(0===this.currentIndex&&this.keyNavigationWraps?this.currentIndex=this.count-1:--this.currentIndex,!0):e.accepted=!1;if("Down"===t)return this.currentIndex!==this.count-1||this.keyNavigationWraps?(this.currentIndex===this.count-1&&this.keyNavigationWraps?this.currentIndex=0:++this.currentIndex,e.accepted=!0):e.accepted=!1}}),je.$c=function(t){Fe.$c.call(this,t.$b={})},je.$s=function(t){Fe.$s.call(this,t.$b),delete t.$b,this.completed()};var Ne=P.Object,Ve=Ne.prototype,We=P.Border=function(t,e){Ne.apply(this,arguments)},Be=We.prototype=Object.create(Ve);Be.constructor=We,Be.componentName="core.Border",d.addProperty(Be,"int","width"),d.addProperty(Be,"color","color","black"),d.addLazyProperty(Be,"left",function(t,e){var i,n={lazy$left:i=new P.BorderSide(t,e)};return i.$c(n.$c$lazy$left={}),(i=n.lazy$left).$s(n.$c$lazy$left),delete n.$c$lazy$left,i._removeUpdater("name"),i.name="left",i.completed(),i}),d.addLazyProperty(Be,"right",function(t,e){var i,n={lazy$right:i=new P.BorderSide(t,e)};return i.$c(n.$c$lazy$right={}),(i=n.lazy$right).$s(n.$c$lazy$right),delete n.$c$lazy$right,i._removeUpdater("name"),i.name="right",i.completed(),i}),d.addLazyProperty(Be,"top",function(t,e){var i,n={lazy$top:i=new P.BorderSide(t,e)};return i.$c(n.$c$lazy$top={}),(i=n.lazy$top).$s(n.$c$lazy$top),delete n.$c$lazy$top,i._removeUpdater("name"),i.name="top",i.completed(),i}),d.addLazyProperty(Be,"bottom",function(t,e){var i,n={lazy$bottom:i=new P.BorderSide(t,e)};return i.$c(n.$c$lazy$bottom={}),(i=n.lazy$bottom).$s(n.$c$lazy$bottom),delete n.$c$lazy$bottom,i._removeUpdater("name"),i.name="bottom",i.completed(),i}),Be.None=0,We.None=0,Be.Hidden=1,We.Hidden=1,Be.Dotted=2,We.Dotted=2,Be.Dashed=3,We.Dashed=3,Be.Solid=4,We.Solid=4,Be.Double=5,We.Double=5,Be.Groove=6,We.Groove=6,Be.Ridge=7,We.Ridge=7,Be.Inset=8,We.Inset=8,Be.Outset=9,We.Outset=9,d.addProperty(Be,"enum","style",We.Solid),Be.Inner=0,We.Inner=0,Be.Outer=1,We.Outer=1,Be.Center=2,We.Center=2,d.addProperty(Be,"enum","type"),P._protoOnChanged(Be,"color",function(t){var e=P.Color.normalize(this.color);this.parent.style("border-color",e)}),P._protoOnChanged(Be,"width",function(t){var e=this.parent;switch(e.style("border-width",t),this.type){case this.Inner:e._borderXAdjust=0,e._borderYAdjust=0,e._borderInnerWidthAdjust=-2*t,e._borderInnerHeightAdjust=-2*t,e._setSizeAdjust();break;case this.Outer:e._borderXAdjust=-t,e._borderYAdjust=-t,e._borderWidthAdjust=0,e._borderHeightAdjust=0,e._setSizeAdjust();break;case this.Center:e._borderXAdjust=-t/2,e._borderYAdjust=-t/2,e._borderWidthAdjust=-t,e._borderHeightAdjust=-t,e._setSizeAdjust()}}),P._protoOnChanged(Be,"type",function(t){var e;switch(t){case this.Inner:e="border-box";break;case this.Outer:case this.Center:e="content-box"}this.parent.style("box-sizing",e)}),P._protoOnChanged(Be,"style",function(t){var e;switch(t){case this.None:e="none";break;case this.Hidden:e="hidden";break;case this.Dotted:e="dotted";break;case this.Dashed:e="dashed";break;case this.Solid:e="solid";break;case this.Double:e="double";break;case this.Groove:e="groove";break;case this.Ridge:e="ridge";break;case this.Inset:e="inset";break;case this.Outset:e="outset"}this.parent.style("border-style",e)}),Be.$c=function(t){Ve.$c.call(this,t.$b={})},Be.$s=function(t){Ve.$s.call(this,t.$b),delete t.$b,this.completed()};var Ye=P.Object,qe=Ye.prototype,Xe=P.Timer=function(t,e){Ye.apply(this,arguments),this._trigger=this._context.wrapNativeCallback(this.triggered.bind(this))},Ge=Xe.prototype=Object.create(qe);Ge.constructor=Xe,Ge.componentName="core.Timer",Ge.triggered=P.createSignal("triggered"),d.addProperty(Ge,"int","interval",1e3),d.addProperty(Ge,"bool","repeat"),d.addProperty(Ge,"bool","running"),d.addProperty(Ge,"bool","triggeredOnStart"),Ge._restart=function(){if(this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0),this._interval&&(clearTimeout(this._interval),this._interval=void 0),this.running){this._context;this.repeat?this._interval=setInterval(this._trigger,this.interval):this._timeout=setTimeout(this._trigger,this.interval)}},Ge.__complete=function(){qe.__complete.call(this),this.running&&this.triggeredOnStart&&this.triggered()},Ge.stop=function(){this.running=!1},Ge.start=function(){this.running=!0},Ge.restart=function(){this.stop(),this.start()},P._protoOnChanged(Ge,"running",function(t){this._restart(),t&&this.triggeredOnStart&&(this._triggered=!1,this.triggered())});k=function(t){this._restart()};P._protoOnChanged(Ge,"interval",k),P._protoOnChanged(Ge,"repeat",k),P._protoOn(Ge,"triggered",function(){this.repeat||this.triggeredOnStart&&!this._triggered||(this.running=!1),this._triggered=!0}),Ge.$c=function(t){qe.$c.call(this,t.$b={})},Ge.$s=function(t){qe.$s.call(this,t.$b),delete t.$b,this.completed()};var Ke=e.ContentPage,Je=Ke.prototype,Ze=i.ClipsPage=function(t,e){Ke.apply(this,arguments)},Qe=Ze.prototype=Object.create(Je);Qe.constructor=Ze,Qe.componentName="src.clips.ClipsPage",Qe.init=function(){var t=this._get("api",!0);this.initContentPage(t.getUserClips,t.getGameClips)},Qe.$c=function(t){Je.$c.call(this,t.$b={})},Qe.$s=function(t){Je.$s.call(this,t.$b),delete t.$b,this._removeUpdater("name"),this.name="clip",this.completed()};var ti=P.Object,ei=ti.prototype,ii=P.Effects=function(t,e){ti.apply(this,arguments)},ni=ii.prototype=Object.create(ei);ni.constructor=ii,ni.componentName="core.Effects",d.addProperty(ni,"real","blur"),d.addProperty(ni,"real","grayscale"),d.addProperty(ni,"real","sepia"),d.addProperty(ni,"real","brightness"),d.addProperty(ni,"real","contrast"),d.addProperty(ni,"real","hueRotate"),d.addProperty(ni,"real","invert"),d.addProperty(ni,"real","saturate"),d.addLazyProperty(ni,"shadow",function(t,e){var i,n={lazy$shadow:i=new P.Shadow(t,e)};return i.$c(n.$c$lazy$shadow={}),(i=n.lazy$shadow).$s(n.$c$lazy$shadow),delete n.$c$lazy$shadow,i.completed(),i}),ni._getFilterStyle=function(){var t=[];return this._addStyle(t,"blur","blur","px"),this._addStyle(t,"grayscale"),this._addStyle(t,"sepia"),this._addStyle(t,"brightness"),this._addStyle(t,"contrast"),this._addStyle(t,"hueRotate","hue-rotate","deg"),this._addStyle(t,"invert"),this._addStyle(t,"saturate"),t},ni._addStyle=function(t,e,i,n){var o=this[e];o&&t.push((i||e)+"("+o+(n||"")+") ")},ni._updateStyle=function(t){var e=this._getFilterStyle().join(""),i=this.parent,n={};n["-webkit-filter"]=e,n.filter=e,!this.shadow||this.shadow._empty()&&!t||(n["box-shadow"]=this.shadow._getFilterStyle()),i.style(n)};k=function(t){this._updateStyle()};P._protoOnChanged(ni,"saturate",k),P._protoOnChanged(ni,"brightness",k),P._protoOnChanged(ni,"grayscale",k),P._protoOnChanged(ni,"sepia",k),P._protoOnChanged(ni,"invert",k),P._protoOnChanged(ni,"hueRotate",k),P._protoOnChanged(ni,"contrast",k),P._protoOnChanged(ni,"blur",k),ni.$c=function(t){ei.$c.call(this,t.$b={})},ni.$s=function(t){ei.$s.call(this,t.$b),delete t.$b,this.completed()};var oi=P.BaseView,ri=oi.prototype,ai=P.GridView=function(t,e){oi.apply(this,arguments)},si=ai.prototype=Object.create(ri);si.constructor=ai,si.componentName="core.GridView",d.addProperty(si,"int","cellWidth",100),d.addProperty(si,"int","cellHeight",100),d.addProperty(si,"int","rows"),d.addProperty(si,"int","columns"),si.FlowLeftToRight=0,ai.FlowLeftToRight=0,si.FlowTopToBottom=1,ai.FlowTopToBottom=1,d.addProperty(si,"enum","flow"),si._updateOverflow=function(){if(this.nativeScrolling){var t={};this.flow!==this.FlowLeftToRight?(t["overflow-x"]="auto",t["overflow-y"]="hidden"):(t["overflow-x"]="hidden",t["overflow-y"]="auto"),this.style(t)}},si.moveUp=function(){if(this.flow===this.FlowLeftToRight){if(!this.keyNavigationWraps&&this.currentIndex<this.columns)return!1;this.keyNavigationWraps&&this.currentIndex-this.columns<0?this.currentIndex=this.count-1:this.currentIndex-this.columns<0?this.currentIndex=0:this.currentIndex-=this.columns}else{if(!this.keyNavigationWraps&&0===this.currentIndex)return!1;--this.currentIndex}return!0},si.moveLeft=function(){if(this.flow===this.FlowLeftToRight)if(this.keyNavigationWraps&&0===this.currentIndex)this.currentIndex=this.count-1;else{if(!this.keyNavigationWraps&&0===this.currentIndex)return!1;--this.currentIndex}else{if(!this.keyNavigationWraps&&this.currentIndex<this.rows)return!1;this.currentIndex-this.rows<0?this.currentIndex=0:this.currentIndex-=this.rows}return!0},si.moveRight=function(){if(this.flow===this.FlowLeftToRight)if(this.keyNavigationWraps&&this.currentIndex===this.count-1)this.currentIndex=0;else{if(!this.keyNavigationWraps&&this.currentIndex===this.count-1)return!1;++this.currentIndex}else{if(!this.keyNavigationWraps&&this.currentIndex>this.count-this.rows+1)return!1;this.currentIndex+this.rows>=this.count?this.currentIndex=this.count-1:this.currentIndex+=this.rows}return!0},si.moveDown=function(){if(this.flow===this.FlowLeftToRight){var t=Math.floor(this.currentIndex/this.columns),e=Math.floor(this.count/this.columns);if(!this.keyNavigationWraps&&e<=t)return!1;this.keyNavigationWraps&&this.currentIndex+this.columns>=this.count?this.currentIndex=0:this.currentIndex+this.columns>=this.count?this.currentIndex=this.count-1:this.currentIndex+=this.columns}else{if(!this.keyNavigationWraps&&this.currentIndex===this.columns-1)return!1;++this.currentIndex}return!0},si._layout=function(){var t=this._get("model",!0);if(this.recursiveVisible||this.offlineLayout)if(t=this._attached)if(this.count=t.count,this.count){var e=this.flow===this.FlowLeftToRight,i=this._items,n=this._padding,o=n.left||0,r=n.top||0,a=n.right||0,s=n.bottom||0,c=i.length,l=this.width-o-a,h=this.height-r-s;this.trace&&log("layout "+c+" into "+l+"x"+h+" @ "+this.content.x+","+this.content.y);for(var d=!1,p=n.left||0,u=n.top||0,f=this.content.x,g=this.content.y,_=e?function(){return h<=g+u}:function(){return l<=f+p},m=this.cellWidth,v=this.cellHeight,y=m+this.spacing,$=v+this.spacing,b=0;b<c&&!_();++b){if((x=this._items[b])||(x=this._createDelegate(b))&&(d=!0),0,x&&(x.viewX=p,x.viewY=u),x){this.currentIndex!==b||x.focused||(this.focusChild(x),this.contentFollowsCurrentItem&&this.positionViewAtIndex(b));var w=e?0<=g+u+x.height&&g+u<h:0<=f+p+x.width&&f+p<l;x.visibleInView=w}e?0<(p+=y)&&l<p+m&&(p=o,u+=$):0<(u+=$)&&h<u+v&&(u=r,p+=y)}for(;b<c;++b){var x;(x=i[b])&&(x.visibleInView=!1)}e?(this.columns=Math.floor((l+this.spacing)/(this.cellWidth+this.spacing)),this.rows=Math.floor((c+this.columns-1)/this.columns)):(this.rows=Math.floor((h+this.spacing)/(this.cellHeight+this.spacing)),this.columns=Math.floor((c+this.rows-1)/this.rows)),this.contentWidth=this.content.width=this.columns*(this.cellWidth+this.spacing)-this.spacing+o+a,this.contentHeight=this.content.height=this.rows*(this.cellHeight+this.spacing)-this.spacing+r+s,this.layoutFinished(),d&&this._context.scheduleComplete()}else this.layoutFinished();else this.layoutFinished()},si.__complete=function(){ri.__complete.call(this),this._updateOverflow()},si.move=function(t,e){var i,n,o=this.flow===this.FlowLeftToRight;o&&this.contentHeight>this.height?((n=this.contentY+e)<0?n=0:n>this.contentHeight-this.height&&(n=this.contentHeight-this.height),this.contentY=n):!o&&this.contentWidth>this.width&&((i=this.contentX+t)<0?i=0:i>this.contentWidth-this.width&&(i=this.contentWidth-this.width),this.contentX=i)},si.positionViewAtIndex=function(t){var e=this.contentX,i=this.contentY,n=this.getItemPosition(t),o=n[0],r=n[1],a=n[2],s=n[3],c=this.width,l=this.height;if(this.flow===this.FlowLeftToRight){if(l<s)return void(this.contentY=r-l/2+s/2);r-i<0?this.contentY=r:l<r-i+s&&(this.contentY=r+s-l)}else{if(c<a)return void(this.contentX=o-c/2+a/2);o-e<0?this.contentX=o:c<o-e+a&&(this.contentX=o+a-c)}},si.getItemPosition=function(t){var e,i,n=this.flow===this.FlowLeftToRight,o=this.cellWidth,r=this.cellHeight;if(n){if(0===this.columns)return[0,0,0,0];e=t%this.columns*o,i=Math.floor(t/this.columns)*r}else{if(0===this.rows)return[0,0,0,0];e=Math.floor(t/this.rows)*o,i=t%this.rows*r}return[e,i,o,r]},si.indexAt=function(t,e){t-=this.content.x,e-=this.content.y;var i=this.flow===this.FlowLeftToRight;return t=Math.floor(t/(this.cellWidth+this.spacing)),e=Math.floor(e/(this.cellHeight+this.spacing)),i?e*this.columns+t:t*this.rows+e},P._protoOnChanged(si,"count",function(t){0==t&&(this.rows=0,this.columns=0)});k=function(t){this._scheduleLayout()};P._protoOnChanged(si,"cellWidth",k),P._protoOnChanged(si,"cellHeight",k),P._protoOnChanged(si,"flow",function(t){this._updateOverflow(),this._scheduleLayout()}),P._protoOnKey(si,"Key",function(t,e){if(!this.handleNavigationKeys)return!1;switch(t){case"Up":return this.moveUp();case"Down":return this.moveDown();case"Left":return this.moveLeft();case"Right":return this.moveRight()}}),si.$c=function(t){ri.$c.call(this,t.$b={})},si.$s=function(t){ri.$s.call(this,t.$b),delete t.$b,this.completed()};var ci=P.Item,li=ci.prototype,hi=P.Image=function(t,e){ci.apply(this,arguments),this._context.backend.initImage(this),this._scheduleLoad()},di=hi.prototype=Object.create(li);di.constructor=hi,di.componentName="core.Image",d.addProperty(di,"int","paintedWidth"),d.addProperty(di,"int","paintedHeight"),d.addProperty(di,"int","sourceWidth"),d.addProperty(di,"int","sourceHeight"),d.addProperty(di,"string","source"),d.addProperty(di,"bool","smooth",!0),d.addProperty(di,"bool","preload",!1),di.Null=0,hi.Null=0,di.Ready=1,hi.Ready=1,di.Loading=2,hi.Loading=2,di.Error=3,hi.Error=3,d.addProperty(di,"enum","status"),di.AlignHCenter=0,hi.AlignHCenter=0,di.AlignLeft=1,hi.AlignLeft=1,di.AlignRight=2,hi.AlignRight=2,d.addProperty(di,"enum","horizontalAlignment"),di.Stretch=0,hi.Stretch=0,di.PreserveAspectFit=1,hi.PreserveAspectFit=1,di.PreserveAspectCrop=2,hi.PreserveAspectCrop=2,di.Tile=3,hi.Tile=3,di.TileVertically=4,hi.TileVertically=4,di.TileHorizontally=5,hi.TileHorizontally=5,di.Pad=6,hi.Pad=6,d.addProperty(di,"enum","fillMode"),di.AlignVCenter=0,hi.AlignVCenter=0,di.AlignTop=1,hi.AlignTop=1,di.AlignBottom=2,hi.AlignBottom=2,d.addProperty(di,"enum","verticalAlignment"),di._scheduleLoad=function(){(this.preload||this.recursiveVisible)&&this._context.delayedAction("image.load",this,this._load)},di._load=function(){if(this.status!==this.Ready&&(this.preload||this.recursiveVisible))if(this.source){this.status=this.Loading;var t=this._context,e=this._imageLoaded.bind(this);t.backend.loadImage(this,t.wrapNativeCallback(e))}else this._resetImage()},di._onError=function(){this.status=this.Error},di._resetImage=function(){this.style("background-image","")},di.getClass=function(){return"core-image"},di._imageLoaded=function(t){if(t){var e={"background-image":'url("'+this.source+'")'},i=t.width,n=t.height;switch(this.sourceWidth=i,this.sourceHeight=n,this.fillMode!==hi.PreserveAspectFit&&(this.paintedWidth=this.width,this.paintedHeight=this.height),this.horizontalAlignment){case hi.AlignHCenter:e["background-position-x"]="center";break;case hi.AlignLeft:e["background-position-x"]="left";break;case hi.AlignRight:e["background-position-x"]="right"}switch(this.verticalAlignment){case hi.AlignVCenter:e["background-position-y"]="center";break;case hi.AlignTop:e["background-position-y"]="top";break;case hi.AlignBottom:e["background-position-y"]="bottom"}switch(this.fillMode){case hi.Stretch:e["background-repeat"]="no-repeat",e["background-size"]="100% 100%";break;case hi.TileVertically:e["background-repeat"]="repeat-y",e["background-size"]="100% "+n+"px";break;case hi.TileHorizontally:e["background-repeat"]="repeat-x",e["background-size"]=i+"px 100%";break;case hi.Tile:e["background-repeat"]="repeat-y repeat-x",e["background-size"]="auto";break;case hi.PreserveAspectCrop:e["background-repeat"]="no-repeat",e["background-size"]="cover";break;case hi.Pad:e["background-repeat"]="no-repeat",e["background-position"]="0% 0%",e["background-size"]="auto";break;case hi.PreserveAspectFit:e["background-repeat"]="no-repeat",e["background-size"]="contain";var o=this.width,r=this.height,a=0,s=i/n;o&&r&&(a=o/r),a<s&&o?(this.paintedWidth=o,this.paintedHeight=o/s):(this.paintedHeight=r,this.paintedWidth=r*s)}e["image-rendering"]=this.smooth?"auto":"pixelated",this.style(e),this.status=hi.Ready}else this.status=hi.Error};k=function(t){this._scheduleLoad()};P._protoOnChanged(di,"width",k),P._protoOnChanged(di,"preload",k),P._protoOnChanged(di,"height",k),P._protoOnChanged(di,"recursiveVisible",k),P._protoOnChanged(di,"fillMode",k),P._protoOnChanged(di,"source",function(t){this.status=this.Null,this._scheduleLoad()}),di.$c=function(t){li.$c.call(this,t.$b={})},di.$s=function(t){var e=this;li.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("width",function(){e.width=e.sourceWidth},[e,"sourceWidth"]),e._replaceUpdater("height",function(){e.height=e.sourceHeight},[e,"sourceHeight"]),e.completed()};var pi=P.Rectangle,ui=pi.prototype,fi=l.VideoDelegate=function(t,e){pi.apply(this,arguments)},gi=fi.prototype=Object.create(ui);gi.constructor=fi,gi.componentName="src.common.VideoDelegate",gi.pressed=P.createSignal("pressed"),d.addProperty(gi,"string","thumbnail"),gi.updatePoster=function(){var t=this._get("videoPreview",!0);0<=this.thumbnail.indexOf("%{width}")?t.source=this.thumbnail.replace("%{width}",Math.floor(1.5*this.width)).replace("%{height}",Math.floor(1.5*this.height)):t.source=this.thumbnail.replace("{width}",Math.floor(1.5*this.width)).replace("{height}",Math.floor(1.5*this.height))},P._protoOnChanged(gi,"thumbnail",function(t){this.updatePoster()}),P._protoOn(gi,"clicked",function(){var t=this._get("model",!0);this.pressed(t.index)}),P._protoOnKey(gi,"Select",function(t,e){var i=this._get("model",!0);this.pressed(i.index)}),gi.$c=function(t){var e=this;ui.$c.call(this,t.$b={});var i=new P.Image(e);(t._this$child0=i).$c(t.$c$_this$child0={}),d.addProperty(i,"bool","ready"),i._setId("videoPreview"),e.addChild(i);var n=new P.Rectangle(e);(t._this$child1=n).$c(t.$c$_this$child1={});var o=new P.Text(n);(t._this_child1$child0=o).$c(t.$c$_this_child1$child0={}),n.addChild(o),e.addChild(n);var r=new P.Text(e);(t._this$child2=r).$c(t.$c$_this$child2={}),e.addChild(r);var a=new P.ClickMixin(e);(t._this$child3=a).$c(t.$c$_this$child3={}),e.addChild(a),e._setId("posterDelegateProto")},gi.$s=function(t){var e=this;ui.$s.call(this,t.$b),delete t.$b,e.border._replaceUpdater("color",function(){e.border.color=e._get("consts").accentTextColor},[e._get("consts"),"accentTextColor"]),e.border._removeUpdater("type"),e.border.type=S.core.Border.prototype.Outer,e._removeUpdater("clip"),e.clip=!0,e._replaceUpdater("color",function(){e.color=e._get("consts").panelColor},[e._get("consts"),"panelColor"]),e._replaceUpdater("thumbnail",function(){e.thumbnail=e._get("model").thumbnail_url},[e._get("_delegate"),"_row"]),e._replaceUpdater("height",function(){e.height=200*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("width",function(){e.width=250*e._context.virtualScale},[e._context,"virtualScale"]),e.transform._replaceUpdater("scale",function(){e.transform.scale=e.activeFocus?1.2:1},[e,"activeFocus"]),e.border._replaceUpdater("width",function(){e.border.width=e.activeFocus?3*e._context.virtualScale:0},[e._context,"virtualScale",e,"activeFocus"]),e._replaceUpdater("z",function(){e.z=e.activeFocus?e.parent.z+1:e.parent.z},[e,"activeFocus",e.parent,"z"]);var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i._replaceUpdater("ready",function(){i.ready=i.status==S.core.Image.prototype.Ready},[i,"status"]),i._replaceUpdater("width",function(){i.width=250*i._context.virtualScale},[i._context,"virtualScale"]),i._replaceUpdater("height",function(){i.height=160*i._context.virtualScale},[i._context,"virtualScale"]),i.completed();var n=t._this$child1;n.$s(t.$c$_this$child1),delete t.$c$_this$child1,n._replaceUpdater("width",function(){n.width=35*n._context.virtualScale},[n._context,"virtualScale"]),n._removeUpdater("color"),n.color="red",n._replaceUpdater("height",function(){n.height=20*n._context.virtualScale},[n._context,"virtualScale"]),n._replaceUpdater("visible",function(){n.visible="live"==n._get("model").type},[n._get("_delegate"),"_row"]),n._replaceUpdater("y",function(){n.y=5*n._context.virtualScale},[n._context,"virtualScale"]),n._replaceUpdater("x",function(){n.x=5*n._context.virtualScale},[n._context,"virtualScale"]);var o=t._this_child1$child0;o.$s(t.$c$_this_child1$child0),delete t.$c$_this_child1$child0,o._replaceUpdater("y",function(){o.y=2*o._context.virtualScale},[o._context,"virtualScale"]),o._replaceUpdater("x",function(){o.x=2*o._context.virtualScale},[o._context,"virtualScale"]),o._removeUpdater("text"),o.text="LIVE",o._replaceUpdater("color",function(){o.color=o._get("consts").textColor},[o._get("consts"),"textColor"]),o.font._replaceUpdater("pixelSize",function(){o.font.pixelSize=14*o._context.virtualScale},[o._context,"virtualScale"]),o.completed(),n.completed();var r=t._this$child2;r.$s(t.$c$_this$child2),delete t.$c$_this$child2,r._replaceUpdater("color",function(){r.color=r._get("consts").textColor},[r._get("consts"),"textColor"]),r._replaceUpdater("text",function(){r.text=r._get("model").title},[r._get("_delegate"),"_row"]),r._replaceUpdater("width",function(){r.width=r.parent.width},[r.parent,"width"]),r._removeUpdater("verticalAlignment"),r.verticalAlignment=S.core.Text.prototype.AlignVCenter,r._removeUpdater("wrapMode"),r.wrapMode=S.core.Text.prototype.WordWrap,r.font._replaceUpdater("pixelSize",function(){r.font.pixelSize=14*r._context.virtualScale},[r._context,"virtualScale"]),r._replaceUpdater("y",function(){r.y=163*r._context.virtualScale},[r._context,"virtualScale"]),r._removeUpdater("horizontalAlignment"),r.horizontalAlignment=S.core.Text.prototype.AlignHCenter,r.completed();var a=t._this$child3;a.$s(t.$c$_this$child3),delete t.$c$_this$child3,a.completed();var s,c={behavior__this_on_transform:s=new P.Animation(e)};s.$c(c.$c$behavior__this_on_transform={}),(s=c.behavior__this_on_transform).$s(c.$c$behavior__this_on_transform),delete c.$c$behavior__this_on_transform,s._replaceUpdater("duration",function(){s.duration=s._get("consts").animationDuration},[s._get("consts"),"animationDuration"]),s.completed(),e.setAnimation("transform",s),e.completed()};var _i=P.Item,mi=_i.prototype,vi=P.Context=function(t,e){_i.apply(this,arguments),this.options=arguments[2],this.l10n=this.options.l10n||{},((this._local.context=this)._context=this)._started=!1,this._completed=!1,this._processingActions=!1,this._delayedActions=[],this._completedObjects=[],this._stylesRegistered={},this._asyncInvoker=P.safeCall(this,[],function(t){log("async action failed:",t,t.stack)}),this.backend=S._backend(),this._init()},yi=vi.prototype=Object.create(mi);yi.constructor=vi,yi.componentName="core.Context",yi.message=P.createSignal("message"),d.addProperty(yi,"int","scrollY"),d.addProperty(yi,"int","keyProcessDelay"),d.addProperty(yi,"string","language"),d.addProperty(yi,"System","system"),d.addProperty(yi,"Location","location"),d.addProperty(yi,"Stylesheet","stylesheet"),d.addProperty(yi,"string","buildIdentifier"),d.addProperty(yi,"int","virtualWidth",$manifest$virtual$width),d.addProperty(yi,"int","virtualHeight",$manifest$virtual$height),d.addProperty(yi,"real","virtualScale"),yi._processActions=function(){if(this._started&&!this._processingActions){this._processingActions=!0;for(var t=this._asyncInvoker;this._delayedActions.length||this._completedObjects.length;){var e=this._delayedActions;this._delayedActions=[];for(var i=0,n=e.length;i<n;++i)t(e[i]);var o=this._completedObjects;this._completedObjects=[];for(i=0,n=o.length;i<n;++i){var r=o[i];try{r.__complete()}catch(t){log("onCompleted failed",t,t.stack)}}}this._processingActions=!1,this.backend.tick(this)}},yi._init=function(){log("Context: initializing..."),new this.backend.init(this)},yi._run=function(){log("Context: signalling layout"),this.visibleInView=!0,this.newBoundingBox(),log("Context: calling completed()"),this._started=!0,this._processActions(),this._completed=!0},yi.init=function(){this.__init(),this.backend.initSystem(this.system)},yi.run=function(){this.backend.run(this,this._run.bind(this))},yi.scheduleComplete=function(){this._get("context",!0);this.delayedAction("context:completed",this,this._processActions)},yi.tr=function(){return this.qsTr.apply(this,arguments)},yi.scheduleAction=function(t){this._delayedActions.push(t)},yi.wrapNativeCallback=function(e){var i=this;return function(){try{var t=e.apply(this,arguments);return i._processActions(),t}catch(t){throw i._processActions(),t}}},yi.start=function(t){return this.children.push(t),t.__init(),log("Context: created instance"),t},yi.registerStyle=function(t,e,i){var n=(i=this.mangleClass(i))?e+"."+i:e;n in this._stylesRegistered||(t.registerStyle(this.stylesheet,n),this._stylesRegistered[n]=!0)},yi.processKey=function(t,e){for(var i=d.forEach(this,P.Item.prototype._enqueueNextChildInFocusChain,[]),n=i.length,o=0;o<n;++o){if(i[o]._processKey(t,e))return!0}return!1},yi.updateL10n=function(t,e){this.l10n[t]=e,this.__properties.language.callOnChanged(this,"language",this.language,this.language)},yi.mangleClass=function(t){return $manifest$html5$prefix+t},yi.delayedAction=function(t,e,i,n){if(e._registerDelayedAction(t)){var o=function(){e._cancelDelayedAction(t),i.call(e)};0<n?setTimeout(this.wrapNativeCallback(o),n):0===n?this.backend.requestAnimationFrame(this.wrapNativeCallback(o)):this.scheduleAction(o)}},yi.__onCompleted=function(t){this._completedObjects.push(t)},yi.createElement=function(t,e){return this.backend.createElement(this,t,e)},yi.qsTr=function(t){var i=arguments,e=this.language,n=(this.l10n[e]||{})[t]||{};for(var o in n){t=n[o];break}return t.replace(/%(\d+)/,function(t,e){return i[e]})},yi.$c=function(t){var e=this;mi.$c.call(this,t.$b={});var i=new c.Stylesheet(e);(t._this$stylesheet=i).$c(t.$c$_this$stylesheet={}),e.stylesheet=i;var n=new P.System(e);(t._this$system=n).$c(t.$c$_this$system={}),e.system=n;var o=new P.Location(e);(t._this$location=o).$c(t.$c$_this$location={}),e.location=o},yi.$s=function(t){var e=this;mi.$s.call(this,t.$b),delete t.$b;var i=t._this$stylesheet;i.$s(t.$c$_this$stylesheet),delete t.$c$_this$stylesheet,i.completed(),e._replaceUpdater("virtualScale",function(){e.virtualScale=Math.min((e.system.resolutionWidth||e.width)/e.virtualWidth,(e.system.resolutionHeight||e.height)/e.virtualHeight)},[e.system,"resolutionWidth",e,"virtualHeight",e,"height",e,"virtualWidth",e,"width",e.system,"resolutionHeight"]);var n=t._this$system;n.$s(t.$c$_this$system),delete t.$c$_this$system,n.completed(),e._removeUpdater("visibleInView"),e.visibleInView=!1;var o=t._this$location;o.$s(t.$c$_this$location),delete t.$c$_this$location,o.completed(),e.completed()};var $i=P.Item,bi=$i.prototype,wi=P.Text=function(t,e){$i.apply(this,arguments),this._context.backend.initText(this),0<this.text.length&&this._setText(this.text)},xi=wi.prototype=Object.create(bi);xi.constructor=wi,xi.componentName="core.Text",d.addProperty(xi,"string","text"),d.addProperty(xi,"color","color"),d.addLazyProperty(xi,"shadow",function(t,e){var i,n={lazy$shadow:i=new P.Shadow(t,e)};return i.$c(n.$c$lazy$shadow={}),(i=n.lazy$shadow).$s(n.$c$lazy$shadow),delete n.$c$lazy$shadow,i.completed(),i}),d.addLazyProperty(xi,"font",function(t,e){var i,n={lazy$font:i=new P.Font(t,e)};return i.$c(n.$c$lazy$font={}),(i=n.lazy$font).$s(n.$c$lazy$font),delete n.$c$lazy$font,i.completed(),i}),d.addProperty(xi,"int","paintedWidth"),d.addProperty(xi,"int","paintedHeight"),xi.AlignTop=0,wi.AlignTop=0,xi.AlignBottom=1,wi.AlignBottom=1,xi.AlignVCenter=2,wi.AlignVCenter=2,d.addProperty(xi,"enum","verticalAlignment"),xi.Html=0,wi.Html=0,xi.Text=1,wi.Text=1,d.addProperty(xi,"enum","textFormat"),xi.AlignLeft=0,wi.AlignLeft=0,xi.AlignRight=1,wi.AlignRight=1,xi.AlignHCenter=2,wi.AlignHCenter=2,xi.AlignJustify=3,wi.AlignJustify=3,d.addProperty(xi,"enum","horizontalAlignment"),xi.NoWrap=0,wi.NoWrap=0,xi.WordWrap=1,wi.WordWrap=1,xi.WrapAnywhere=2,wi.WrapAnywhere=2,xi.Wrap=3,wi.Wrap=3,d.addProperty(xi,"enum","wrapMode"),xi._updateSize=function(){this.recursiveVisible&&(this._updateSizeNeeded||this.clip)&&this._scheduleUpdateSize()},xi._updateStyle=function(){this.shadow&&!this.shadow._empty()?this.style("text-shadow",this.shadow._getFilterStyle()):this.style("text-shadow",""),P.Item.prototype._updateStyle.apply(this,arguments)},xi._updateSizeImpl=function(){if(0===this.text.length)return this.paintedWidth=0,void(this.paintedHeight=0);this._context.backend.layoutText(this)},xi._scheduleUpdateSize=function(){this._context.delayedAction("text:update-size",this,this._updateSizeImpl)},xi._enableSizeUpdate=function(){this._updateSizeNeeded=!0,this._updateSize()},xi._updateWSHandling=function(){var t=this.textFormat===this.Text;switch(this.wrapMode){case this.NoWrap:this.style({"white-space":t?"pre":"nowrap","word-break":""});break;case this.Wrap:case this.WordWrap:this.style({"white-space":t?"pre-wrap":"normal","word-break":""});break;case this.WrapAnywhere:this.style({"white-space":t?"pre-wrap":"normal","word-break":"break-all"})}this._updateSize()},xi.getClass=function(){return"core-text"},xi._setText=function(t){this._context.backend.setText(this,t)},xi.on=function(t,e){this._updateSizeNeeded||"newBoundingBox"===t&&this._enableSizeUpdate(),P.Item.prototype.on.apply(this,arguments)},xi.onChanged=function(t,e){if(!this._updateSizeNeeded)switch(t){case"right":case"width":case"bottom":case"height":case"verticalCenter":case"horizontalCenter":this._enableSizeUpdate()}P.Item.prototype.onChanged.apply(this,arguments)},xi.registerStyle=function(t,e){t.addRule(e,"width: auto; height: auto;")},P._protoOnChanged(xi,"recursiveVisible",function(t){t&&this._updateSize()}),P._protoOnChanged(xi,"horizontalAlignment",function(t){switch(t){case this.AlignLeft:this.style("text-align","left");break;case this.AlignRight:this.style("text-align","right");break;case this.AlignHCenter:this.style("text-align","center");break;case this.AlignJustify:this.style("text-align","justify")}}),P._protoOnChanged(xi,"verticalAlignment",function(t){if(this._enableSizeUpdate(),$manifest$requireVerticalTextAlignmentStyle)switch(t){case this.AlignTop:this.style("-pure-text-vertical-align","top");break;case this.AlignVCenter:this.style("-pure-text-vertical-align","middle");break;case this.AlignBottom:this.style("-pure-text-vertical-align","bottom")}});k=function(t){this._updateWSHandling()};P._protoOnChanged(xi,"wrapMode",k),P._protoOnChanged(xi,"textFormat",k),P._protoOnChanged(xi,"text",function(t){this._setText(t),this._updateSize()});T=function(t){this._updateSize()};P._protoOnChanged(xi,"height",T),P._protoOnChanged(xi,"width",T),P._protoOnChanged(xi,"color",function(t){this.style("color",P.Color.normalize(t))}),xi.$c=function(t){bi.$c.call(this,t.$b={})},xi.$s=function(t){var e=this;bi.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("width",function(){e.width=e.paintedWidth},[e,"paintedWidth"]),e._replaceUpdater("height",function(){e.height=e.paintedHeight},[e,"paintedHeight"]),e.completed()};var Ci=P.Object,Si=Ci.prototype,Pi=u.Rest=function(t,e){Ci.apply(this,arguments),this._methods={}},ki=Pi.prototype=Object.create(Si);ki.constructor=Pi,ki.componentName="controls.web.api.Rest",ki.internetConnectionLost=P.createSignal("internetConnectionLost"),ki.error=P.createSignal("error"),d.addProperty(ki,"string","baseUrl"),ki.args=function(t){return t},ki.headers=function(t){},ki.call=function(t,e,i,n,o,r){if(t.indexOf("://")<0){var a=this.baseUrl;t="/"===a[a.length-1]||"/"===t[0]?a+t:a+"/"+t}this._call(t,e,i,n,JSON.stringify(o),r)},ki._call=function(t,n,o,r,e,i){var a=this._get("apiRequest",!0),s=i||{};e&&(e=this.args(e),s["Content-Type"]="application/json");var c=this.headers(s);void 0!==c&&(s=c);var l=t,h=this;a.ajax({method:r||"GET",headers:s,contentType:"application/json",url:l,data:e,done:function(e){if(e.target&&400<=e.target.status)return log("Error in request",e),o&&o(e),void h.error({url:l,method:r,response:e});var i=e.target.responseText;if(i){try{e=JSON.parse(i)}catch(t){e=i}n(e)}else n("")},error:function(t){o&&o(t),h.error({url:l,method:r,response:t})}})},ki._registerMethod=function(t,e){var i=this._get("api",!0);if(t){i=this;this[t]=function(){e.call(i,arguments)}}},P._protoOn(ki,"error",function(t,e,i){("undefined"!=typeof window&&!window.navigator.onLine||i&&i.target&&0===i.target.status&&""===i.target.response)&&this.internetConnectionLost({url:t,method:e,response:i})}),ki.$c=function(t){Si.$c.call(this,t.$b={});var e=new P.Request(this);(t._this$child0=e).$c(t.$c$_this$child0={}),e._setId("apiRequest"),this.addChild(e)},ki.$s=function(t){Si.$s.call(this,t.$b),delete t.$b;var e=t._this$child0;e.$s(t.$c$_this$child0),delete t.$c$_this$child0,e.completed(),this.completed()};var Ai=u.Rest,Oi=Ai.prototype,Ii=l.TwitchApi=function(t,e){Ai.apply(this,arguments)},Ui=Ii.prototype=Object.create(Oi);Ui.constructor=Ii,Ui.componentName="src.common.TwitchApi",d.addProperty(Ui,"string","clientId","h1k5zmt0khmhmt8y8o7xp44xp9x5d8"),d.addProperty(Ui,"string","accessToken","0rgd3ppq7bb9w5v63lh1x5714lcml7"),Ui.headers=function(t){t.Authorization="Bearer "+this.accessToken,t["Client-ID"]=this.clientId},Ui.$c=function(t){var e=this;Oi.$c.call(this,t.$b={});var i=new u.Method(e);(t._this$child0=i).$c(t.$c$_this$child0={}),e.addChild(i);var n=new u.Method(e);(t._this$child1=n).$c(t.$c$_this$child1={}),e.addChild(n);var o=new u.Method(e);(t._this$child2=o).$c(t.$c$_this$child2={}),e.addChild(o);var r=new u.Method(e);(t._this$child3=r).$c(t.$c$_this$child3={}),e.addChild(r);var a=new u.Method(e);(t._this$child4=a).$c(t.$c$_this$child4={}),e.addChild(a);var s=new u.Method(e);(t._this$child5=s).$c(t.$c$_this$child5={}),e.addChild(s);var c=new u.Method(e);(t._this$child6=c).$c(t.$c$_this$child6={}),e.addChild(c);var l=new u.Method(e);(t._this$child7=l).$c(t.$c$_this$child7={}),e.addChild(l);var h=new u.Method(e);(t._this$child8=h).$c(t.$c$_this$child8={}),e.addChild(h);var d=new u.Method(e);(t._this$child9=d).$c(t.$c$_this$child9={}),e.addChild(d);var p=new u.Method(e);(t._this$child10=p).$c(t.$c$_this$child10={}),e.addChild(p)},Ui.$s=function(t){Oi.$s.call(this,t.$b),delete t.$b,this._removeUpdater("baseUrl"),this.baseUrl="https://api.twitch.tv";var e=t._this$child0;e.$s(t.$c$_this$child0),delete t.$c$_this$child0,e._removeUpdater("path"),e.path="/helix/games?name={query}",e._removeUpdater("name"),e.name="searchGame",e.completed();var i=t._this$child1;i.$s(t.$c$_this$child1),delete t.$c$_this$child1,i._removeUpdater("path"),i.path="/helix/games/top?first={limit}",i._removeUpdater("name"),i.name="getTopGames",i.completed();var n=t._this$child2;n.$s(t.$c$_this$child2),delete t.$c$_this$child2,n._removeUpdater("path"),n.path="/helix/streams",n._removeUpdater("name"),n.name="getStreams",n.completed();var o=t._this$child3;o.$s(t.$c$_this$child3),delete t.$c$_this$child3,o._removeUpdater("path"),o.path="/helix/videos?id={videoId}",o._removeUpdater("name"),o.name="getVideos",o.completed();var r=t._this$child4;r.$s(t.$c$_this$child4),delete t.$c$_this$child4,r._removeUpdater("path"),r.path="/helix/videos?user_id={userId}&after={cursor}",r._removeUpdater("name"),r.name="getUserVideos",r.completed();var a=t._this$child5;a.$s(t.$c$_this$child5),delete t.$c$_this$child5,a._removeUpdater("path"),a.path="/helix/videos?game_id={gameId}&after={cursor}",a._removeUpdater("name"),a.name="getGameVideos",a.completed();var s=t._this$child6;s.$s(t.$c$_this$child6),delete t.$c$_this$child6,s._removeUpdater("path"),s.path="/helix/users?login={name}",s._removeUpdater("name"),s.name="getUsers",s.completed();var c=t._this$child7;c.$s(t.$c$_this$child7),delete t.$c$_this$child7,c._removeUpdater("path"),c.path="/helix/clips?broadcaster_id={broadcasterId}",c._removeUpdater("name"),c.name="getUserClips",c.completed();var l=t._this$child8;l.$s(t.$c$_this$child8),delete t.$c$_this$child8,l._removeUpdater("path"),l.path="/helix/clips?game_id={gameId}",l._removeUpdater("name"),l.name="getGameClips",l.completed();var h=t._this$child9;h.$s(t.$c$_this$child9),delete t.$c$_this$child9,h._removeUpdater("path"),h.path="/helix/streams?user_id={broadcasterId}",h._removeUpdater("name"),h.name="getUserStreams",h.completed();var d=t._this$child10;d.$s(t.$c$_this$child10),delete t.$c$_this$child10,d._removeUpdater("path"),d.path="/helix/streams?game_id={gameId}",d._removeUpdater("name"),d.name="getGameStreams",d.completed(),this.completed()};var Ti=P.GridView,zi=Ti.prototype,Ei=l.VideoGrid=function(t,e){Ti.apply(this,arguments)},Li=Ei.prototype=Object.create(zi);Li.constructor=Ei,Li.componentName="src.common.VideoGrid",Li.selected=P.createSignal("selected"),d.addProperty(Li,"bool","busy"),d.addProperty(Li,"bool","userMode"),d.addProperty(Li,"int","currentRow"),d.addProperty(Li,"string","contentId"),Li.clear=function(){this.model.clear()},Li.findVideos=function(t,e,i){this.busy=!0;var n=this;this.contentId=t,(this.method=i)(this.contentId,this._next?this._next:"",function(t){n._next=t.pagination.cursor,e?n.append(t):n.fill(t),n.busy=!1},function(){n.busy=!1})},Li.append=function(t){this.model.append(t.data)},Li.fill=function(t){this.model.assign(t.data)},P._protoOnChanged(Li,"currentRow",function(t){t>=this.rows-3&&this._next&&!this.busy&&this.method&&this.findVideos(this.contentId,!0,this.method)}),P._protoOnChanged(Li,"currentIndex",function(t){this.currentRow=Math.floor(t/this.columns)}),P._protoOnKey(Li,"Key",function(t,e){if(!this.recursiveVisible||0==this.count)return!1;var i=this.columns,n=this.currentIndex%i;switch(t){case"Up":return this.moveUp();case"Down":return this.moveDown();case"Left":return 0!=n&&this.moveLeft();case"Right":return!(i-1<=n)&&this.moveRight()}}),Li.$c=function(t){zi.$c.call(this,t.$b={}),this.delegate=function(t,e){var i,n={delegate:i=new l.VideoDelegate(t,e)};return i.$c(n.$c$delegate={}),(i=n.delegate).$s(n.$c$delegate),delete n.$c$delegate,i.on("pressed",function(t){this.parent.selected(t)}.bind(i)),i.completed(),i};var e=new P.ListModel(this);(t._this$model=e).$c(t.$c$_this$model={}),this.model=e},Li.$s=function(t){var e=this;zi.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("cellWidth",function(){e.cellWidth=250*e._context.virtualScale},[e._context,"virtualScale"]),e._removeUpdater("keyNavigationWraps"),e.keyNavigationWraps=!1,e._removeUpdater("cssTranslatePositioning"),e.cssTranslatePositioning=!0,e._replaceUpdater("spacing",function(){e.spacing=10*e._context.virtualScale},[e._context,"virtualScale"]),e._removeUpdater("contentFollowsCurrentItem"),e.contentFollowsCurrentItem=!1,e._replaceUpdater("height",function(){e.height=500*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("width",function(){e.width=1100*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("contentY",function(){e.contentY=Math.floor(e.currentIndex/e.columns)*(e.cellHeight+e.spacing)},[e,"columns",e,"spacing",e,"cellHeight",e,"currentIndex"]),e._replaceUpdater("animationDuration",function(){e.animationDuration=e._get("consts").animationDuration},[e._get("consts"),"animationDuration"]);var i=t._this$model;i.$s(t.$c$_this$model),delete t.$c$_this$model,i.completed(),e._removeUpdater("handleNavigationKeys"),e.handleNavigationKeys=!1,e._replaceUpdater("cellHeight",function(){e.cellHeight=200*e._context.virtualScale},[e._context,"virtualScale"]),e.completed()};var Ri=P.Object,Mi=Ri.prototype,Di=P.Transform=function(t,e){Ri.apply(this,arguments),this._transforms=new P.transform.Transform},Fi=Di.prototype=Object.create(Mi);Fi.constructor=Di,Fi.componentName="core.Transform",d.addProperty(Fi,"int","perspective"),d.addProperty(Fi,"int","translateX"),d.addProperty(Fi,"int","translateY"),d.addProperty(Fi,"int","translateZ"),d.addProperty(Fi,"real","rotateX"),d.addProperty(Fi,"real","rotateY"),d.addProperty(Fi,"real","rotateZ"),d.addProperty(Fi,"real","rotate"),d.addProperty(Fi,"real","scaleX"),d.addProperty(Fi,"real","scaleY"),d.addProperty(Fi,"real","skewX"),d.addProperty(Fi,"real","skewY"),Fi._updateTransform=function(){this.parent.style("transform",this._transforms)},Fi._animateAll=function(i){var n=this;["perspective","translateX","translateY","translateZ","rotateX","rotateY","rotateZ","rotate","scaleX","scaleY","skewX","skewY"].forEach(function(t){var e=new P.Animation(n);P.core.createObject(e),e.delay=i.delay,e.duration=i.duration,e.easing=i.easing,n.setAnimation(t,e)})},Fi.getAnimation=function(t){var e=P.Object.prototype.getAnimation.call(this,t);return e||(e=P.Object.prototype.getAnimation.call(this.parent,"transform")),e},P._protoOnChanged(Fi,"perspective",function(t){this._transforms.add("perspective",t,"px"),this._updateTransform()}),P._protoOnChanged(Fi,"rotate",function(t){this._transforms.add("rotate",t,"deg"),this._updateTransform()}),P._protoOnChanged(Fi,"rotateX",function(t){this._transforms.add("rotateX",t,"deg"),this._updateTransform()}),P._protoOnChanged(Fi,"rotateY",function(t){this._transforms.add("rotateY",t,"deg"),this._updateTransform()}),P._protoOnChanged(Fi,"rotateZ",function(t){this._transforms.add("rotateZ",t,"deg"),this._updateTransform()}),P._protoOnChanged(Fi,"scaleX",function(t){this._transforms.add("scaleX",t),this._updateTransform()}),P._protoOnChanged(Fi,"scaleY",function(t){this._transforms.add("scaleY",t),this._updateTransform()}),P._protoOnChanged(Fi,"skewX",function(t){this._transforms.add("skewX",t,"deg"),this._updateTransform()}),P._protoOnChanged(Fi,"skewY",function(t){this._transforms.add("skewY",t,"deg"),this._updateTransform()}),P._protoOnChanged(Fi,"translateX",function(t){this._transforms.add("translateX",t,"px"),this._updateTransform()}),P._protoOnChanged(Fi,"translateY",function(t){this._transforms.add("translateY",t,"px"),this._updateTransform()}),P._protoOnChanged(Fi,"translateZ",function(t){this._transforms.add("translateZ",t,"px"),this._updateTransform()}),Fi.$c=function(t){Mi.$c.call(this,t.$b={})},Fi.$s=function(t){Mi.$s.call(this,t.$b),delete t.$b,this.completed()};var Hi=P.Object,ji=Hi.prototype,Ni=P.BorderSide=function(t,e){Hi.apply(this,arguments)},Vi=Ni.prototype=Object.create(ji);Vi.constructor=Ni,Vi.componentName="core.BorderSide",d.addProperty(Vi,"string","name"),d.addProperty(Vi,"int","width"),d.addProperty(Vi,"color","color"),d.addProperty(Vi,"int","style"),Vi._updateStyle=function(){if(this.parent&&this.parent.parent&&this.name){var t;P.Border;switch(this.style){case S.core.Border.prototype.None:t="none";break;case S.core.Border.prototype.Hidden:t="hidden";break;case S.core.Border.prototype.Dotted:t="dotted";break;case S.core.Border.prototype.Dashed:t="dashed";break;case S.core.Border.prototype.Solid:t="solid";break;case S.core.Border.prototype.Double:t="double";break;case S.core.Border.prototype.Groove:t="groove";break;case S.core.Border.prototype.Ridge:t="ridge";break;case S.core.Border.prototype.Inset:t="inset";break;case S.core.Border.prototype.Outset:t="outset"}var e=this.width+"px "+t+" "+P.Color.normalize(this.color);this.parent.parent.style("border-"+this.name,e)}};k=function(t){this._updateStyle()};P._protoOnChanged(Vi,"width",k),P._protoOnChanged(Vi,"color",k),P._protoOnChanged(Vi,"style",k),Vi.$c=function(t){ji.$c.call(this,t.$b={})},Vi.$s=function(t){var e=this;ji.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("color",function(){e.color=e.parent.color},[e.parent,"color"]),e._replaceUpdater("width",function(){e.width=e.parent.width},[e.parent,"width"]),e._replaceUpdater("style",function(){e.style=e.parent.style},[e.parent,"style"]),e.completed()};var Wi=P.Object,Bi=Wi.prototype,Yi=P.Model=function(t,e){Wi.apply(this,arguments)},qi=Yi.prototype=Object.create(Bi);qi.constructor=Yi,qi.componentName="core.Model",qi.reset=P.createSignal("reset"),qi.rowsChanged=P.createSignal("rowsChanged"),qi.rowsRemoved=P.createSignal("rowsRemoved"),qi.rowsInserted=P.createSignal("rowsInserted"),d.addProperty(qi,"int","count"),qi.$c=function(t){Bi.$c.call(this,t.$b={})},qi.$s=function(t){Bi.$s.call(this,t.$b),delete t.$b,this.completed()};var Xi=P.Model,Gi=Xi.prototype,Ki=P.ListModel=function(t,e){Xi.apply(this,arguments),this._rows=[]},Ji=Ki.prototype=Object.create(Gi);Ji.constructor=Ki,Ji.componentName="core.ListModel",d.addProperty(Ji,"array","data"),Ji.clear=function(){this.assign([])},Ji.forEach=function(t){return this._rows.forEach(t)},Ji.addChild=function(t){this.append(t)},Ji.get=function(t){if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");var e=this._rows[t];if(!(e instanceof Object))throw new Error("row is non-object");return e.index=t,e},Ji.remove=function(t,e){if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds");void 0===e&&(e=1),this._rows.splice(t,e),this.count=this._rows.length,this.rowsRemoved(t,t+e)},Ji.setProperty=function(t,e,i){if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");var n=this._rows[t];if(!(n instanceof Object))throw new Error("row is non-object, invalid index? ("+t+")");n[e]!==i&&(n[e]=i,this.rowsChanged(t,t+1))},Ji.insert=function(t,e){if(t<0||t>this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");this._rows.splice(t,0,e),this.count=this._rows.length,this.rowsInserted(t,t+1)},Ji.set=function(t,e){if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");if(!(e instanceof Object))throw new Error("row is non-object");this._rows[t]=e,this.rowsChanged(t,t+1)},Ji.append=function(t){var e=this._rows.length;Array.isArray(t)?(Array.prototype.push.apply(this._rows,t),this.count=this._rows.length,this.rowsInserted(e,e+t.length)):(this._rows.push(t),this.count=this._rows.length,this.rowsInserted(e,e+1))},Ji.assign=function(t){this._rows=t,this.count=this._rows.length,this.reset()},P._protoOnChanged(Ji,"data",function(t){this.assign(t)}),Ji.$c=function(t){Gi.$c.call(this,t.$b={})},Ji.$s=function(t){Gi.$s.call(this,t.$b),delete t.$b,this.completed()};var Zi=P.Object,Qi=Zi.prototype,tn=P.Location=function(t,e){Zi.apply(this,arguments);var i=P.__locationBackend;if(!i)throw new Error("no backend found");this.impl=i().createLocation(this)},en=tn.prototype=Object.create(Qi);en.constructor=tn,en.componentName="core.Location",d.addProperty(en,"string","hash"),d.addProperty(en,"string","host"),d.addProperty(en,"string","href"),d.addProperty(en,"string","port"),d.addProperty(en,"string","origin"),d.addProperty(en,"string","hostname"),d.addProperty(en,"string","pathname"),d.addProperty(en,"string","protocol"),d.addProperty(en,"string","search"),d.addProperty(en,"Object","state"),en.changeHref=function(t){this.impl.changeHref(t)},en.pushState=function(t,e,i){this.impl.pushState(t,e,i)},en.$c=function(t){Qi.$c.call(this,t.$b={})},en.$s=function(t){Qi.$s.call(this,t.$b),delete t.$b,this.completed()};var nn=e.ContentPage,on=nn.prototype,rn=r.VideosPage=function(t,e){nn.apply(this,arguments)},an=rn.prototype=Object.create(on);an.constructor=rn,an.componentName="src.videos.VideosPage",an.init=function(){var t=this._get("api",!0);this.initContentPage(t.getUserVideos,t.getGameVideos)},an.$c=function(t){on.$c.call(this,t.$b={})},an.$s=function(t){on.$s.call(this,t.$b),delete t.$b,this._removeUpdater("name"),this.name="videos",this.completed()};var sn=P.Object,cn=sn.prototype,ln=P.Anchors=function(t,e){sn.apply(this,arguments),this._items=[],this._grabX=!1,this._grabY=!1},hn=ln.prototype=Object.create(cn);hn.constructor=ln,hn.componentName="core.Anchors",d.addProperty(hn,"AnchorLine","bottom"),d.addProperty(hn,"AnchorLine","verticalCenter"),d.addProperty(hn,"AnchorLine","top"),d.addProperty(hn,"AnchorLine","left"),d.addProperty(hn,"AnchorLine","horizontalCenter"),d.addProperty(hn,"AnchorLine","right"),d.addProperty(hn,"Item","fill"),d.addProperty(hn,"Item","centerIn"),d.addProperty(hn,"int","margins"),d.addProperty(hn,"int","bottomMargin"),d.addProperty(hn,"int","topMargin"),d.addProperty(hn,"int","leftMargin"),d.addProperty(hn,"int","rightMargin"),hn._scheduleUpdate=function(){this._context.delayedAction("update-anchors",this,this._updateAll)},hn._updateAll=function(){var t=this,e=t.parent;if(null!==e){var i,n,o,r,a,s,c=e.parent.toScreen(),l=c[0],h=c[1],d=t.fill,p=t._getAnchor("left")||(d?d.left:null),u=t._getAnchor("right")||(d?d.right:null),f=t._getAnchor("top")||(d?d.top:null),g=t._getAnchor("bottom")||(d?d.bottom:null),_=t.centerIn,m=t._getAnchor("horizontalCenter")||(_?_.horizontalCenter:null),v=t._getAnchor("verticalCenter")||(_?_.verticalCenter:null),y=t.leftMargin||t.margins,$=t.rightMargin||t.margins,b=t.topMargin||t.margins,w=t.bottomMargin||t.margins,x=[],C=[],S=function(t){var e,i=t[0],n=t[1],o=x.indexOf(i);return o<0?(e=i.toScreen(),x.push(i),C.push(e)):e=C[o],e[n]};p&&u?(i=S(p),o=S(u),e.x=i+y-l-e.viewX,e.width=o-i-$-y):p&&m?(i=S(p),a=S(m),e.x=i+y-l-e.viewX,e.width=2*(a-i)-$-y):m&&u?(a=S(m),o=S(u),e.width=2*(o-a)-$-y,e.x=a-(e.width+y-$)/2-l-e.viewX):p?(i=S(p),e.x=i+y-l-e.viewX):u?(o=S(u),e.x=o-l-$-e.width-e.viewX):m?(a=S(m),e.x=a-(e.width+y-$)/2-l-e.viewX):this._grabX&&(e.x=y),f&&g?(n=S(f),r=S(g),e.y=n+b-h-e.viewY,e.height=r-n-w-b):f&&v?(n=S(f),s=S(v),e.y=n+b-h-e.viewY,e.height=2*(s-n)-w-b):v&&g?(s=S(v),r=S(g),e.height=2*(r-s)-w-b,e.y=s-(e.height+b-w)/2-h-e.viewY):f?(n=S(f),e.y=n+b-h-e.viewY):g?(r=S(g),e.y=r-h-w-e.height-e.viewY):v?(s=S(v),e.y=s-(e.height+b-w)/2-h-e.viewY):this._grabY&&(e.y=b)}},hn._grab=function(t,e){"x"===e&&(this._grabX=!0),"y"===e&&(this._grabY=!0),t._removeUpdater(e)},hn._getAnchor=function(t){var e=this[t];return e?Array.isArray(e)?e:e[t]:null},hn._subscribe=function(t){var e=this._items;e.indexOf(t)<0&&(e.push(t),this.connectOn(t,"newBoundingBox",this._scheduleUpdate.bind(this)))},P._protoOnChanged(hn,"fill",function(t){if(this._scheduleUpdate(),null!==t){var e=this.parent;this._grab(e,"x"),this._grab(e,"width"),this._grab(e,"y"),this._grab(e,"height"),this._subscribe(t)}}),P._protoOnChanged(hn,"centerIn",function(t){if(this._scheduleUpdate(),null!==t){var e=this.parent;this._grab(e,"x"),this._grab(e,"y"),this._subscribe(t),this._subscribe(e)}}),P._protoOnChanged(hn,"bottom",function(t){this._scheduleUpdate();var e=this._getAnchor("bottom");if(null!==e){var i=this.parent;this._grab(i,"y"),(this.top||this.verticalCenter)&&this._grab(i,"height"),this._subscribe(i),this._subscribe(e[0])}}),P._protoOnChanged(hn,"horizontalCenter",function(t){this._scheduleUpdate();var e=this._getAnchor("horizontalCenter");if(null!==e){var i=this.parent;this._grab(i,"x"),(this.left||this.right)&&this._grab(i,"width"),this._subscribe(i),this._subscribe(e[0])}}),P._protoOnChanged(hn,"left",function(t){this._scheduleUpdate();var e=this._getAnchor("left");if(null!==e){var i=this.parent;this._grab(i,"x"),(this.right||this.horizontalCenter)&&(this._grab(i,"width"),this._subscribe(i)),this._subscribe(e[0])}}),P._protoOnChanged(hn,"right",function(t){this._scheduleUpdate();var e=this._getAnchor("right");if(null!==e){var i=this.parent;this._grab(i,"x"),(this.left||this.horizontalCenter)&&this._grab(i,"width"),this._subscribe(i),this._subscribe(e[0])}}),P._protoOnChanged(hn,"top",function(t){this._scheduleUpdate();var e=this._getAnchor("top");if(null!==e){var i=this.parent;this._grab(i,"y"),(this.bottom||this.verticalCenter)&&(this._grab(i,"height"),this._subscribe(i)),this._subscribe(e[0])}}),P._protoOnChanged(hn,"verticalCenter",function(t){this._scheduleUpdate();var e=this._getAnchor("verticalCenter");if(null!==e){var i=this.parent;this._grab(i,"y"),(this.top||this.bottom)&&this._grab(i,"height"),this._subscribe(i),this._subscribe(e[0])}});k=function(t){this.parent.anchorsMarginsUpdated(),this._scheduleUpdate()};P._protoOnChanged(hn,"bottomMargin",k),P._protoOnChanged(hn,"leftMargin",k),P._protoOnChanged(hn,"topMargin",k),P._protoOnChanged(hn,"rightMargin",k),P._protoOnChanged(hn,"margin",k),hn.$c=function(t){cn.$c.call(this,t.$b={})},hn.$s=function(t){cn.$s.call(this,t.$b),delete t.$b,this.completed()};var dn=P.Object,pn=dn.prototype,un=P.BaseLayoutContentPadding=function(t,e){dn.apply(this,arguments),this.parent._padding=this},fn=un.prototype=Object.create(pn);fn.defaultProperty="all",fn.constructor=un,fn.componentName="core.BaseLayoutContentPadding",d.addProperty(fn,"int","top"),d.addProperty(fn,"int","left"),d.addProperty(fn,"int","right"),d.addProperty(fn,"int","bottom"),d.addProperty(fn,"int","all");k=function(t){this.parent._scheduleLayout()};P._protoOnChanged(fn,"right",k),P._protoOnChanged(fn,"left",k),P._protoOnChanged(fn,"top",k),P._protoOnChanged(fn,"bottom",k),fn.$c=function(t){pn.$c.call(this,t.$b={})},fn.$s=function(t){var e=this;pn.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("top",function(){e.top=e.all},[e,"all"]),e._replaceUpdater("right",function(){e.right=e.all},[e,"all"]),e._replaceUpdater("bottom",function(){e.bottom=e.all},[e,"all"]),e._replaceUpdater("left",function(){e.left=e.all},[e,"all"]),e.completed()};var gn=P.Object,_n=gn.prototype,mn=h.PlaceholderFont=function(t,e){gn.apply(this,arguments)},vn=mn.prototype=Object.create(_n);vn.constructor=mn,vn.componentName="controls.core.PlaceholderFont",d.addProperty(vn,"string","family"),d.addProperty(vn,"bool","italic"),d.addProperty(vn,"bool","bold"),d.addProperty(vn,"bool","underline"),d.addProperty(vn,"bool","strike"),d.addProperty(vn,"int","pixelSize"),d.addProperty(vn,"int","pointSize"),d.addProperty(vn,"int","lineHeight"),d.addProperty(vn,"int","weight"),vn.getClass=function(){var t;return this._placeholderClass?t=this._placeholderClass:(t=this._placeholderClass=this._context.stylesheet.allocateClass("placeholderFont"),this.parent.parent.element.addClass(t)),t},vn.updateProperty=function(e,i){var n=this.getClass();["::-webkit-input-placeholder","::-moz-placeholder",":-moz-placeholder",":-ms-input-placeholder"].forEach(function(t){try{this._context.stylesheet.addRule("."+n+t,e+":"+i),log("added rule for ."+n+t)}catch(t){}}.bind(this))},P._protoOnChanged(vn,"family",function(t){this.updateProperty("font-family",t),this.parent.parent._updateSize()}),P._protoOnChanged(vn,"pointSize",function(t){this.updateProperty("font-size",t+"pt"),this.parent.parent._updateSize()}),P._protoOnChanged(vn,"pixelSize",function(t){this.updateProperty("font-size",t+"px"),this.parent.parent._updateSize()}),P._protoOnChanged(vn,"italic",function(t){this.updateProperty("font-style",t?"italic":"normal"),this.parent.parent._updateSize()}),P._protoOnChanged(vn,"weight",function(t){this.updateProperty("font-weight",t),this.parent.parent._updateSize()}),P._protoOnChanged(vn,"bold",function(t){this.updateProperty("font-weight",t?"bold":"normal"),this.parent.parent._updateSize()}),P._protoOnChanged(vn,"lineHeight",function(t){this.updateProperty("line-height",t+"px"),this.parent.parent._updateSize()}),P._protoOnChanged(vn,"strike",function(t){this.updateProperty("text-decoration",t?"line-through":""),this.parent._updateSize()}),P._protoOnChanged(vn,"underline",function(t){this.updateProperty("text-decoration",t?"underline":""),this.parent.parent._updateSize()}),vn.$c=function(t){_n.$c.call(this,t.$b={})},vn.$s=function(t){_n.$s.call(this,t.$b),delete t.$b,this.completed()};var yn=P.EventEmitter,$n=yn.prototype,bn=P.RAIIEventEmitter=function(t,e){yn.apply(this,arguments),this._onListener={}},wn=bn.prototype=Object.create($n);wn.constructor=bn,wn.componentName="core.RAIIEventEmitter",wn.removeAllListeners=function(t){P.EventEmitter.prototype.removeAllListeners.call(this,t),t in this._onListener?this._onListener[t][1](t):""in this._onListener&&this._onListener[""][1](t)},wn.on=function(t,e){if(!(t in this._eventHandlers)&&(t in this._onListener?this._onListener[t][0](t):""in this._onListener&&this._onListener[""][0](t),this._eventHandlers[t]))throw new Error("listener callback added event handler");P.EventEmitter.prototype.on.call(this,t,e)},wn.onListener=function(t,e,i){this._onListener[t]=[e,i]},wn.$c=function(t){$n.$c.call(this,t.$b={})},wn.$s=function(t){$n.$s.call(this,t.$b),delete t.$b,this.completed()};var xn=P.Object,Cn=xn.prototype,Sn=P.Font=function(t,e){xn.apply(this,arguments)},Pn=Sn.prototype=Object.create(Cn);Pn.constructor=Sn,Pn.componentName="core.Font",d.addProperty(Pn,"string","family",$manifest$style$font$family),d.addProperty(Pn,"bool","italic"),d.addProperty(Pn,"bool","bold"),d.addProperty(Pn,"bool","underline"),d.addProperty(Pn,"bool","overline"),d.addProperty(Pn,"bool","strike"),d.addProperty(Pn,"bool","strikeout"),d.addProperty(Pn,"real","letterSpacing"),d.addProperty(Pn,"real","wordSpacing"),d.addProperty(Pn,"int","pixelSize",$manifest$style$font$pixelSize),d.addProperty(Pn,"int","pointSize"),d.addProperty(Pn,"real","lineHeight",$manifest$style$font$lineHeight),d.addProperty(Pn,"int","weight"),Pn.MixedCase=0,Sn.MixedCase=0,Pn.AllUppercase=1,Sn.AllUppercase=1,Pn.AllLowercase=2,Sn.AllLowercase=2,Pn.SmallCaps=3,Sn.SmallCaps=3,Pn.Capitalize=4,Sn.Capitalize=4,d.addProperty(Pn,"enum","capitalization"),Pn._updateTextDecoration=function(){var t=(this.underline?" underline":"")+(this.overline?" overline":"")+(this.strike||this.strikeout?" line-through":"");this.parent.style("text-decoration",t),this.parent._updateSize()},P._protoOnChanged(Pn,"capitalization",function(t){switch(this.parent.style("text-transform","none"),this.parent.style("font-variant","normal"),t){case this.AllUppercase:this.parent.style("text-transform","uppercase");break;case this.AllLowercase:this.parent.style("text-transform","lowercase");break;case this.SmallCaps:this.parent.style("font-variant","small-caps");break;case this.Capitalize:this.parent.style("text-transform","capitalize")}}),P._protoOnChanged(Pn,"pointSize",function(t){0<t&&(this.pixelSize=0),this.parent.style("font-size",0<t?t+"pt":""),this.parent._updateSize()}),P._protoOnChanged(Pn,"pixelSize",function(t){0<t&&(this.pointSize=0),this.parent.style("font-size",0<t?t+"px":""),this.parent._updateSize()});k=function(t){this._updateTextDecoration()};P._protoOnChanged(Pn,"strike",k),P._protoOnChanged(Pn,"overline",k),P._protoOnChanged(Pn,"strikeout",k),P._protoOnChanged(Pn,"underline",k),P._protoOnChanged(Pn,"family",function(t){this.parent.style("font-family",t),this.parent._updateSize()}),P._protoOnChanged(Pn,"italic",function(t){this.parent.style("font-style",t?"italic":"normal"),this.parent._updateSize()}),P._protoOnChanged(Pn,"weight",function(t){this.parent.style("font-weight",t),this.parent._updateSize()}),P._protoOnChanged(Pn,"bold",function(t){this.parent.style("font-weight",t?"bold":"normal"),this.parent._updateSize()}),P._protoOnChanged(Pn,"letterSpacing",function(t){this.parent.style("letter-spacing",t+"px"),this.parent._updateSize()}),P._protoOnChanged(Pn,"lineHeight",function(t){this.parent.style("line-height",t),this.parent._updateSize()}),P._protoOnChanged(Pn,"wordSpacing",function(t){this.parent.style("word-spacing",t+"px"),this.parent._updateSize()}),Pn.$c=function(t){Cn.$c.call(this,t.$b={})},Pn.$s=function(t){Cn.$s.call(this,t.$b),delete t.$b,this.completed()};var kn=P.Object,An=kn.prototype,On=c.Stylesheet=function(t,e){kn.apply(this,arguments);var i=this._context,n=i.options,o=this.style=i.createElement("style");o.dom.type="text/css",this.prefix=n.prefix;var r=n.id,a=null===document.getElementById(i,r),s=window.Modernizr.prefixedCSS("user-select")+": none; ",c=S.core.os,l="android"===c||"androidttk"===c||"hisense"===c;o.setHtml("div#"+r+" { position: absolute; visibility: hidden; left: 0px; top: 0px; }"+("webOS"===c||l?this.mangleRule("div","{ "+s+" }"):"")+(l?this.mangleRule("div","{ -webkit-tap-highlight-color: rgba(255, 255, 255, 0); -webkit-focus-ring-color: rgba(255, 255, 255, 0); outline: none; }"):"")+(a?"body { padding: 0; margin: 0; border: 0px; overflow: hidden; }":"")+this.mangleRule("video","{ position: absolute; }")+this.mangleRule("img","{ position: absolute; -webkit-touch-callout: none; "+s+" }"));var h=S.html5.html.getElement(i,"head");h.append(o),h.updateStyle(),this._addRule=S.html5.html.createAddRule(o.dom).bind(this),this._lastId=0},In=On.prototype=Object.create(An);In.constructor=On,In.componentName="html5.Stylesheet",In.allocateClass=function(t){var e=this.prefix;return(e||"")+t+"-"+this._lastId++},In.mangleSelector=function(t){var e=this.prefix;return e?t+"."+e+"core-item":t},In.mangleRule=function(t,e){return this.mangleSelector(t)+" "+e+" "},In.addRule=function(t,e){this._addRule(t,e)},In.$c=function(t){An.$c.call(this,t.$b={})},In.$s=function(t){An.$s.call(this,t.$b),delete t.$b,this.completed()};var Un,Tn,zn,En,Ln,Rn,Mn,Dn,Fn,Hn,jn=P.Object,Nn=jn.prototype,Vn=P.ClickMixin=function(t,e){jn.apply(this,arguments),this.element=this.parent.element,this._bindClick(this.enabled)},Wn=Vn.prototype=Object.create(Nn);return Wn.constructor=Vn,Wn.componentName="core.ClickMixin",d.addProperty(Wn,"bool","enabled",!0),Wn._bindClick=function(t){t&&!this._cmClickBinder&&(this._cmClickBinder=new P.EventBinder(this.element),this._cmClickBinder.on("click",P.createSignalForwarder(this.parent,"clicked").bind(this))),this._cmClickBinder&&this._cmClickBinder.enable(t)},P._protoOnChanged(Wn,"enabled",function(t){this._bindClick(t)}),Wn.$c=function(t){Nn.$c.call(this,t.$b={})},Wn.$s=function(t){Nn.$s.call(this,t.$b),delete t.$b,this.completed()},S.core.model=function(){var t={},l=function(t,e){this.type=t,this.length=e};t.ModelUpdate=function(){this.count=0,this._reset()},t.ModelUpdate.prototype.constructor=t.ModelUpdate,t.ModelUpdate.prototype._reset=function(){this._ranges=[new l(0,this.count)],this._updateIndex=this.count},t.ModelUpdate.prototype._setUpdateIndex=function(t){t<this._updateIndex&&(this._updateIndex=t)},t.ModelUpdate.prototype._find=function(t){var e,i=this._ranges;for(e=0;e<i.length;++e){var n=i[e];if(t<n.length)return{index:e,offset:t};0<n.length&&(t-=n.length)}if(0!=t)throw new Error("invalid index "+t);return{index:e-1,offset:n.length}},t.ModelUpdate.prototype.reset=function(t){this.update(t,0,Math.min(t.count,this.count)),this.count<t.count?this.insert(t,this.count,t.count):this.remove(t,t.count,this.count)},t.ModelUpdate.prototype._merge=function(){for(var t=this._ranges,e=1;e<t.length;){var i=t[e-1],n=t[e];if(i.type===n.type)if(1===i.type&&i.length<0&&0<n.length){var o=Math.min(-i.length,n.length);i.type=2,n.length+=i.length,i.length=o,1<e&&--e}else i.length+=n.length,t.splice(e,1);else 1===i.type&&0===i.length?t.splice(e,1):++e}},t.ModelUpdate.prototype._split=function(t,e,i,n){var o=this._ranges;if(0===e)return o.splice(t,0,new l(i,n)),t+1;var r=o[t],a=r.length-e;return r.length=e,0!=a?o.splice(t+1,0,new l(i,n),new l(r.type,a)):o.splice(t+1,0,new l(i,n)),t+2},t.ModelUpdate.prototype.insert=function(t,e,i){if(!(i<=e)){this._setUpdateIndex(e);var n=this._ranges,o=i-e;if(this.count+=o,this.count!=t.count)throw new Error("unbalanced insert "+this.count+" + ["+e+"-"+i+"], model reported "+t.count);var r=this._find(e),a=n[r.index];0===a.length?(a.type=1,a.length+=o):0<=r.offset?this._split(r.index,r.offset,1,o):this._split(r.index+1,0,1,o),this._merge()}},t.ModelUpdate.prototype.remove=function(t,e,i){if(!(i<=e)){this._setUpdateIndex(e);var n=this._ranges,o=i-e;if(this.count-=o,this.count!=t.count)throw new Error("unbalanced remove "+this.count+" + ["+e+"-"+i+"], model reported "+t.count);var r=this._find(e);if(1===(s=n[r.index]).type)s.length-=o;else for(var a=this._split(r.index,r.offset,1,-o);0<o;){var s;(s=n[a]).length<=o?(n.splice(a,1),o-=s.length):(s.length-=o,o=0)}this._merge()}},t.ModelUpdate.prototype.update=function(t,e,i){if(!(i<=e)){var n=this._ranges,o=i-e,r=this._find(e),a=r.index,s=n[a];if(0<r.offset&&(n.splice(a+1,0,new l(s.type,s.length-r.offset)),s.length=r.offset,++a,0===s.length))throw new Error("invalid offset");for(;0<o;){var c=(s=n[a]).length;switch(s.type){case 0:o<c?(s.length-=o,n.splice(a,0,new l(2,o))):s.type=2,o-=c;break;case 1:0<c&&(o-=c),++a;break;case 2:o-=c,++a}}this._merge()}},t.ModelUpdate.prototype.clear=function(){this.count=0,this._reset()},t.ModelUpdate.prototype.apply=function(i,t){var n=0;if(this._ranges.forEach(function(t){var e=t.length;switch(t.type){case 1:0<e?(i._insertItems(n,n+e),n+=e):e<0&&i._removeItems(n,n-e);break;case 2:i._updateItems(n,n+e),n+=e;break;default:n+=t.length}}),!t&&i._items.length!=this.count)throw new Error("unbalanced items update, view: "+i._items.length+", update:"+this.count);for(var e=this._updateIndex;e<this.count;++e)i._updateDelegateIndex(e);this._reset()};var e=t.ArrayModelWrapper=function(t){this.data=t,this.count=t.length};return e.prototype.get=function(t){return{value:this.data[t]}},e.prototype.on=function(){},e.prototype.removeListener=function(){},t}(),S.core.gradient=function(){var t={},e=function(t,e){this.color=P.Color.normalize(t),this.position=e},i=e.prototype;i.constructor=e,i.toString=function(){return this.color+" "+Math.floor(100*this.position)+"%"};var n=function(t){this.orientation=t,this.stops=[]},o=n.prototype;return o.constructor=n,o.add=function(t){this.stops.push(t)},o.toString=function(){return"linear-gradient("+this.orientation+","+this.stops.join()+")"},t.GradientStop=e,t.Gradient=n,t}(),S.core.transform=function(){var t={},n=function(t,e){this.value=t,this.unit=e},e=n.prototype;e.constructor=n,e.toString=function(){var t=this.unit;return null!=t?this.value+t:this.value};var i=function(){this.transforms={}},o=i.prototype;return o.constructor=i,o.add=function(t,e,i){this.transforms[t]=new n(e,i)},o.toString=function(){var t=this.transforms,e="";for(var i in t){e+=i+"("+t[i]+") "}return e},t.Transform=i,t}(),S.html5.localstorage=(Un={},(Tn=function(t){if(t&&t.name,this._storage=window.localStorage,!this._storage)throw new Error("no local storage support")}).prototype.get=function(t,e,i){var n=this._storage.getItem(t);null!==n?e(n):i(new Error("no item with name "+t))},Tn.prototype.set=function(t,e){this._storage.setItem(t,e)},Tn.prototype.erase=function(t,e){this._storage.removeItem(t)},Un.createLocalStorage=function(t){return new Tn(t)},Un.LocalStorage=Tn,Un),S.html5.html=function(){var g={},p=window.Modernizr;g.capabilities={csstransforms3d:p.csstransforms3d,csstransforms:p.csstransforms,csstransitions:p.csstransitions,mouseEnterLeaveSupported:"netcast"!=S.core.os};var u=null;g.createAddRule=function(t){if((t.sheet||{}).insertRule){i=t.sheet;return function(e,t){try{i.insertRule(e+"{"+t+"}",i.cssRules.length)}catch(t){log("insertRule failed on rule "+e)}}}var i=t.styleSheet||t.sheet;return function(e,t){try{i.addRule(e,t)}catch(t){log("addRule failed on rule "+e)}}};var f=function(){this._cache={}},t=f.prototype;t.constructor=f,t.update=function(t,e,i){var n=this._cache,o=t._uniqueId,r=n[o];if(void 0!==r)r.data[e]=i,++r.size;else{var a={};a[e]=i,n[o]={data:a,element:t,size:1}}},t.pop=function(t){var e=t._uniqueId,i=this._cache[e];if(void 0!==i)return delete this._cache[e],i},t.apply=function(){var t=this._cache;for(var e in this._cache={},t){var i=t[e];i.element.updateStyle(i)}};var _=function(t){var e=document.createElement("style");e.type="text/css",document.head.appendChild(e),this.prefix=t+"C-",this.style=e,this.total=0,this.stats={},this.classes={},this.classes_total=0,this._addRule=g.createAddRule(e)},e=_.prototype;e.constructor=_,e.add=function(t){this.stats[t]=(this.stats[t]||0)+1,++this.total},e.register=function(t){var e=t.join(";"),i=this.classes,n=i[e];return void 0!==n||(n=i[e]=this.prefix+this.classes_total++,this._addRule("."+n,e)),n},e.classify=function(i){var n=this.total;if(n<10)return"";i.sort();var o=[],r=[],a=this.stats;return i.forEach(function(t,e){.05<a[t]/n&&(o.push(t),r.push(e))}),r.length<2?"":(r.forEach(function(t,e){i.splice(t-e,1)}),this.register(o))};var i={};0<=S.core.userAgent.toLowerCase().indexOf("webkit")&&(i.appearance="-webkit-appearance");var l=function(t){var e=i[t];return void 0===e&&(i[t]=e=window.Modernizr.prefixedCSS(t)),e};g.getPrefixedName=l;var r=["touchstart","touchmove","touchend","wheel","mousewheel","scroll"],a=!!p.passiveeventlisteners&&{passive:!0},s=["mousedown","mouseup","click","dblclick","mousemove","mouseover","mousewheel","mouseout","contextmenu","mouseenter","mouseleave"],c=["touchstart","touchmove","touchend","touchcancel"],h=function(n){var o=n.__domEventListeners;void 0===o&&(o=n.__domEventListeners={}),n.onListener("",function(t){var e=o[t]=n._context.wrapNativeCallback(function(){n.emitWithArgs(t,arguments)}),i=[t,e];(0<=r.indexOf(t)&&i.push(a),0<=s.indexOf(t))&&(1===(n.__mouseHandlerCount=1+~~n.__mouseHandlerCount)&&n.style("pointer-events","auto"));0<=c.indexOf(t)&&(1===(n.__touchHandlerCount=1+~~n.__touchHandlerCount)&&n.style("touch-action","auto"));n.dom.addEventListener.apply(n.dom,i)},function(t){0<=s.indexOf(t)&&((n.__mouseHandlerCount=~~n.__mouseHandlerCount-1)<=0&&n.style("pointer-events","none"));0<=c.indexOf(t)&&((n.__touchHandlerCount=~~n.__touchHandlerCount-1)<=0&&n.style("touch-action","none"));n.dom.removeEventListener(t,o[t])})},n={};g.loadExternalStylesheet=function(t){if(!n[t]){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.head.appendChild(e),n[t]=!0}};var d=0,m={};function v(t){return $manifest$html5$prefix+t}g.Element=function(t,e,i){if("string"==typeof e){void 0===i&&(i="");var n=e+"."+i;if(!m[n]){var o=document.createElement(e);($manifest$html5$prefix||i)&&o.classList.add(v(i)),$manifest$html5$prefix&&i&&o.classList.add(v("")),m[n]=o}this.dom=m[n].cloneNode(!1)}else this.dom=e;S.core.RAIIEventEmitter.apply(this),this._context=t,this._transitions={},this._class="",this._uniqueId=(++d).toString(36),this._firstChildIndex=0,h(this)};var o=g.Element.prototype=Object.create(S.core.RAIIEventEmitter.prototype);o.constructor=g.Element,o.addClass=function(t){this.dom.classList.add(t)},o.appendChildren=function(t){if(0<t.length){var e=document.createDocumentFragment();t.forEach(function(t){e.appendChild(t)}),this.dom.appendChild(e)}},o.removeChildren=function(t){var n=[],o=this.dom;return t.children.forEach(function(t){var e=t.element;if(void 0!==e){var i=e.dom;i.parentNode===o&&(o.removeChild(i),n.push(i))}}),n},o.setHtml=function(t,e){var i,n=this.dom;i=void 0!==e?this.removeChildren(e):[],n.innerHTML=t,this.appendChildren(i)},o.width=function(){return this.updateStyle(),this.dom.clientWidth},o.height=function(){return this.updateStyle(),this.dom.clientHeight},o.fullWidth=function(){return this.updateStyle(),this.dom.scrollWidth},o.fullHeight=function(){return this.updateStyle(),this.dom.scrollHeight};var y=["overflow","overflow-x","overflow-y"];o.style=function(t,e){var i=this._context._styleCache;if(void 0!==e)i.update(this,t,e),0<=y.indexOf(t)&&(i.update(this,"pointer-events","auto"),i.update(this,"touch-action","auto"));else{if("object"!=typeof t)throw new Error("cache is write-only");for(var n in t)0<=y.indexOf(t)&&(i.update(this,"pointer-events","auto"),i.update(this,"touch-action","auto")),i.update(this,n,t[n])}},o.setAttribute=function(t,e){return this.dom.setAttribute(t,e)},o.getAttribute=function(t){return this.dom.getAttribute(t)},o.setProperty=function(t,e){return this.dom[t]=e},o.getProperty=function(t){return this.dom[t]};var $={left:"px",top:"px",width:"px",height:"px","border-radius":"px","border-width":"px","margin-left":"px","margin-top":"px","margin-right":"px","margin-bottom":"px","padding-left":"px","padding-top":"px","padding-right":"px","padding-bottom":"px",padding:"px"};o.forceLayout=function(){return this.updateStyle(),this.dom.offsetWidth|this.dom.offsetHeight},o.updateStyle=function(t){var e=this.dom;if(e&&(void 0!==t||void 0!==(t=this._context._styleCache.pop(this)))){var i=t.data,n=e.style;for(var o in i){var r=i[o],a=l(o),s=!1!==a?a:o;if(r instanceof S.core.Color?r=r.rgba():Array.isArray(r)&&(r=r.join(",")),"number"==typeof r){var c=$[o];void 0!==c&&(r+=c)}n[s]=r}}},o.append=function(t){this.dom.appendChild(t instanceof g.Element?t.dom:t)},o.prepend=function(t){this.dom.insertBefore(t instanceof g.Element?t.dom:t,this.dom.childNodes[0])},o.discard=function(){S.core.RAIIEventEmitter.prototype.discard.apply(this),this.remove()},o.remove=function(){var t=this.dom;t.parentNode&&t.parentNode.removeChild(t)},o.focus=function(){var t=this.dom;t.focus(),t.select()},o.blur=function(){this.dom.blur()},o.getScrollX=function(){return this.dom.scrollLeft},o.getScrollY=function(){return this.dom.scrollTop},o.setScrollX=function(t){var e=this.dom;setTimeout(function(){e.scrollLeft=t},1)},o.setScrollY=function(t){var e=this.dom;setTimeout(function(){e.scrollTop=t},1)},g.Document=function(t,e){S.core.RAIIEventEmitter.apply(this),this._context=t,this.dom=e,h(this)},(g.Document.prototype=Object.create(S.core.RAIIEventEmitter.prototype)).constructor=g.Document,g.Window=function(t,e){S.core.RAIIEventEmitter.apply(this),this._context=t,this.dom=e,h(this)};var b=g.Window.prototype=Object.create(S.core.RAIIEventEmitter.prototype);b.constructor=g.Window,b.width=function(){return this.dom.innerWidth},b.height=function(){return this.dom.innerHeight},b.scrollY=function(){return this.dom.scrollY},b.style=function(){},g.getElement=function(t,e){var i=document.getElementsByTagName(e);if(1!=i.length)throw new Error("no tag "+e+"/multiple tags");return new g.Element(t,i[0])},g.init=function(n){u=new S.html5.cache.Cache(w),n._styleCache=new f;var t=n.options,e=n._prefix,i=t.id,o=t.tag||"div";e&&log("Context: using prefix",e+="-");var r=new S.html5.html.Document(n,document);n.document=r;var a,s,c=new S.html5.html.Window(n,window);n.window=c;var l=g,h=document.getElementById(i);null===h?(a=c.width(),s=c.height(),log("Context: window size: "+a+"x"+s),(h=l.createElement(n,o)).dom.id=i,c.on("resize",function(){n.width=c.width(),n.height=c.height()}),l.getElement(n,"body").append(h)):(a=(h=new l.Element(n,h)).width(),s=h.height(),log("Context: found element by id, size: "+a+"x"+s),c.on("resize",function(){n.width=h.width(),n.height=h.height()}));p.canvastext?(n._textCanvas=l.createElement(n,"canvas"),n._textCanvas.style("width",0),n._textCanvas.style("height",0),h.append(n._textCanvas),n._textCanvasContext="getContext"in n._textCanvas.dom?n._textCanvas.dom.getContext("2d"):null):n._textCanvasContext=null,n.element=h,n.width=a,n.height=s,c.on("scroll",function(t){n.scrollY=c.scrollY()});var d=function(t){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;log("fullscreen change event:",e),n.fullscreen=e};new Array("webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange").forEach(function(t){h.on(t,d,!0)}),c.on("keydown",n.wrapNativeCallback(function(t){var e=t.which||t.keyCode,i=P.keyCodes[e];void 0!==i?n.processKey(i,t)&&t.preventDefault():log("unhandled keycode "+e+": ["+t.charCode+" "+t.keyCode+" "+t.which+" "+t.key+" "+t.code+" "+t.location+"]")})),c.on("orientationchange",function(t){log("orientation changed event"),n.system.screenWidth=window.screen.width,n.system.screenHeight=window.screen.height}),n._styleClassifier=$manifest$cssAutoClassificator?new _(n._prefix):null},g.initSystem=function(t){var e=t._context.window;e.on("focus",function(){t.pageActive=!0}),e.on("blur",function(){t.pageActive=!1}),t.screenWidth=window.screen.width,t.screenHeight=window.screen.height},g.createElement=function(t,e,i){return new g.Element(t,e,i)},g.initRectangle=function(t){};var w=function(t,e){var i=new Image;i.onerror=function(){i.onload=null,i.onerror=null,e(null)},i.onload=function(){i.onload=null,i.onerror=null,e({width:i.naturalWidth,height:i.naturalHeight})},i.src=t};g.initImage=function(t){},g.loadImage=function(t,e){t.source.indexOf("?")<0?u.get(t.source,e):w(t.source,e)},g.initText=function(t){};var x=function(t,e){switch(t.verticalAlignment){case t.AlignTop:t._topPadding=0;break;case t.AlignBottom:t._topPadding=t.height-t.paintedHeight;break;case t.AlignVCenter:t._topPadding=(t.height-t.paintedHeight)/2}e["padding-top"]=t._topPadding,e.height=t.height-t._topPadding,t.style(e)};g.setText=function(t,e){t.element.setHtml(e,t)},g.layoutText=function(t){var e=t._context._textCanvasContext,i=t.wrapMode!==S.core.Text.NoWrap,n=t.element,o=(n.dom,t.textFormat===t.Html||0<=t.text.search(/[\<\&]/));if(!i&&null!==e&&!o){var r,a=t.font;r=a.pointSize?Math.round(96*a.pointSize/72):a.pixelSize,e.font=r+"px "+a.family;var s=e.measureText(t.text);return t.paintedWidth=s.width,t.paintedHeight=r*a.lineHeight,void x(t,{})}var c=n.removeChildren(t);i?t.style({height:"auto","padding-top":0}):t.style({width:"auto",height:"auto","padding-top":0});var l,h=n.fullWidth()+1,d=n.fullHeight()+1;h+1!==t.paintedWidth&&(t.paintedWidth=h),d+1!==t.paintedHeight&&(t.paintedHeight=d),l=i?{}:{width:t.width},x(t,l),n.appendChildren(c)},g.run=function(e,t){e.window.on("message",function(t){log("Context: received message from "+t.origin,t),e.message(t)}),e.window.on($manifest$expectRunContextEvent?"runContext":"load",function(){t()})},g.tick=function(t){t._styleCache.apply()};var C={width:"width",height:"height",x:"left",y:"top",viewX:"left",viewY:"top",opacity:"opacity",border:"border",radius:"border-radius",rotate:"transform",boxshadow:"box-shadow",transform:"transform",visible:"visibility",visibleInView:"visibility",background:"background",color:"color",backgroundImage:"background-image",font:"font"};return g.setAnimation=function(t,e,i){if(!g.capabilities.csstransitions||$manifest$cssDisableTransitions||i&&!i.cssTransition)return!1;var n=C[e];return void 0!==n&&function(t,e,i){var n=g,o=n.getPrefixedName("transition-property"),r=n.getPrefixedName("transition-delay"),a=n.getPrefixedName("transition-duration"),s=n.getPrefixedName("transition-timing-function"),c=t.element;c.forceLayout(),e=n.getPrefixedName(e)||e;var l=c._transitions,h=l[o]||[],d=l[a]||[],p=l[s]||[],u=l[r]||[],f=h.indexOf(e);return-1===f?i&&(h.push(e),d.push(i.duration+"ms"),p.push(i.easing),u.push(i.delay+"ms")):i&&i.active()?(d[f]=i.duration+"ms",p[f]=i.easing,u[f]=i.delay+"ms"):(h.splice(f,1),d.splice(f,1),p.splice(f,1),u.splice(f,1)),l[o]=h,l[a]=d,l[s]=p,l[r]=u,"orsay"!==t._context.system.os&&"netcast"!==t._context.system.os||(l["transition-property"]=h,l["transition-duration"]=d,l["transition-delay"]=u,l["transition-timing-function"]=p),t.style(l),!0}(t,n,i)},g.requestAnimationFrame=p.prefixed("requestAnimationFrame",window)||function(t){return setTimeout(t,0)},g.cancelAnimationFrame=p.prefixed("cancelAnimationFrame",window)||function(t){return clearTimeout(t)},g.enterFullscreenMode=function(t){try{return p.prefixed("requestFullscreen",t.dom)()}catch(t){log("enterFullscreenMode failed",t)}},g.exitFullscreenMode=function(){try{return window.Modernizr.prefixed("exitFullscreen",document)()}catch(t){log("exitFullscreenMode failed",t)}},g.inFullscreenMode=function(){return!!window.Modernizr.prefixed("fullscreenElement",document)},g.ajax=function(t,e){var i=e.url,n=e.error,o=e.headers,r=e.done,a=e.settings,s=new XMLHttpRequest;for(var c in n&&s.addEventListener("error",n),r&&s.addEventListener("load",r),s.open(e.method||"GET",i),a)s[c]=a[c];for(var c in o)s.setRequestHeader(c,o[c]);e.data?s.send(e.data):s.send()},g.fingerprint=function(t,e){var i=g;try{var n=i.createElement(t,"canvas");n.dom.width=2e3,n.dom.height=32;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZ /0123456789 abcdefghijklmnopqrstuvwxyz £©µÀÆÖÞßéöÿ –—‘“”„†•…‰™œŠŸž€ ΑΒΓΔΩαβγδω АБВГДабвгд ∀∂∈ℝ∧∪≡∞ ↑↗↨↻⇣ ┐┼╔╘░►☺♀ ﬁ�⑀₂ἠḂӥẄɐː⍎אԱა",r=n.dom.getContext("2d");r.textBaseline="top",r.font="20px 'Arial'",r.textBaseline="alphabetic",r.fillStyle="#fedcba",r.fillRect(0,0,2e3,32),r.fillStyle="#12345678",r.fillText(o,1.5,23.5,2e3),r.font="19.5px 'Arial'",r.fillStyle="#789abcde",r.fillText(o,1,22,2e3),e.update(n.dom.toDataURL())}catch(t){log("canvas test failed: "+t)}try{e.update(window.navigator.userAgent)}catch(t){log(t)}try{e.update(window.navigator.plugins)}catch(t){log(t)}try{e.update(window.navigator.mimeTypes)}catch(t){log(t)}try{e.update(window.navigator.language)}catch(t){log(t)}try{e.update(window.navigator.platform)}catch(t){log(t)}try{e.update(window.navigator.product)}catch(t){log(t)}try{e.update(window.navigator.productSub)}catch(t){log(t)}try{e.update(window.navigator.vendorSub)}catch(t){log(t)}try{e.update(window.navigator.hardwareConcurrency)}catch(t){log(t)}try{e.update(window.screen.availWidth)}catch(t){log(t)}try{e.update(window.screen.availHeight)}catch(t){log(t)}try{e.update(window.screen.colorDepth)}catch(t){log(t)}},g}(),S.html5.cache=function(){var t={},n=function(){return Math.floor((new Date).getTime()/1e3)},o=function(){this.created=n(),this.waiters=[],this.invoker=null};o.prototype.expired=function(t){return n()-this.created>=t},o.prototype.set=function(t){this.created=n();for(var e=this.invoker=S.core.safeCall(null,[t],function(t){log("cache entry callback failed: ",t,t.stack)});this.waiters.length;){var i=this.waiters;this.waiters=[],i.forEach(e)}this.waiters=null},o.prototype.wait=function(t){null!==this.invoker?this.invoker(t):this.waiters.push(t)};var e=function(t,e){if(!t)throw new Error("create callback is required");this._create=t,this._ttl=e||3600,this._cache={},setInterval(this.cleanup.bind(this),this._ttl/2*1e3)};return e.prototype.get=function(t,e){var i=this._cache[t];(void 0===i||i.expired(this._ttl))&&(this._cache[t]=i=new o,this._create(t,function(t){i.set(t)})),i.wait(e)},e.prototype.cleanup=function(){for(var t in this._cache){this._cache[t].expired(this._ttl)&&delete this._cache[t]}},t.Cache=e,t}(),S.html5.location=(zn={},(En=function(t){this._ui=t;var e=window.location;this.updateActualValues();var i=this,n=t._context;n.window.on("hashchange",function(){i._ui.hash=e.hash}.bind(this)),n.window.on("popstate",function(){i.updateActualValues()}.bind(this))}).prototype.updateActualValues=function(){var t=this._ui,e=t._context.window.dom;t.hash=e.location.hash,t.href=e.location.href,t.port=e.location.port,t.host=e.location.host,t.origin=e.location.origin,t.hostname=e.location.hostname,t.pathname=e.location.pathname,t.protocol=e.location.protocol,t.search=e.location.search,t.state=e.history.state},En.prototype.changeHref=function(t){this._ui._context.window.dom.location.href=t,this.updateActualValues()},En.prototype.pushState=function(t,e,i){var n=this._ui,o=n._context.window.dom;o.location.hostname?(o.history.pushState(t,e,i),this.updateActualValues()):(n._context.document.title=e,this._ui.state=t)},zn.createLocation=function(t){return new En(t)},zn.Location=En,zn),S.video.html5.backend=(Ln={},(Rn=function(t){var e=t._context.createElement("video");e.dom.preload="metadata",this.element=e,this.ui=t,this.setEventListeners(),t.element.remove(),t.element=e,t.parent.element.append(t.element),this._xhr=new XMLHttpRequest,this._xhr.addEventListener("load",this.parseManifest.bind(this))}).prototype.setEventListeners=function(){var t=this.element,e=t.dom,i=this.ui;t.on("play",function(){i.waiting=!1,i.paused=e.paused}.bind(i)),t.on("pause",function(){i.paused=e.paused}.bind(i)),t.on("ended",function(){i.finished()}.bind(i)),t.on("seeked",function(){log("seeked"),i.seeking=!1,i.waiting=!1}.bind(i)),t.on("canplay",function(){log("canplay",e.readyState),i.ready=e.readyState}.bind(i)),t.on("seeking",function(){log("seeking"),i.seeking=!0,i.waiting=!0}.bind(i)),t.on("waiting",function(){log("waiting"),i.waiting=!0}.bind(i)),t.on("stalled",function(){log("Was stalled",e.networkState),i.stalled=!0}.bind(i)),t.on("emptied",function(){log("Was emptied",e.networkState)}.bind(i)),t.on("volumechange",function(){i.muted=e.muted}.bind(i)),t.on("canplaythrough",function(){log("ready to play"),i.paused=e.paused}.bind(i)),t.on("suspend",function(){log("suspended"),i.paused=!0}),t.on("error",function(){if(log("Player error occurred",e.error,"src",i.source),e.error&&i.source)switch(i.error(e.error),log("player.error",e.error),e.error.code){case 1:log("MEDIA_ERR_ABORTED error occurred");break;case 2:log("MEDIA_ERR_NETWORK error occurred");break;case 3:log("MEDIA_ERR_DECODE error occurred");break;case 4:log("MEDIA_ERR_SRC_NOT_SUPPORTED error occurred");break;default:log("UNDEFINED error occurred")}}.bind(i)),t.on("timeupdate",function(){i.waiting=!1,i.stalled=!1,i.seeking||(i.progress=e.currentTime)}.bind(i)),t.on("durationchange",function(){var t=e.duration;log("Duration",t),i.duration=isFinite(t)?t:0}.bind(i)),t.on("progress",function(){var t=e.buffered.length-1;i.waiting=!1,0<=t&&(i.buffered=e.buffered.end(t)-e.buffered.start(t))}.bind(i)),this.setOption("autoplay",i.autoPlay)},Rn.prototype.parseManifest=function(t){var e=t.target.responseText.split("\n"),i=this.ui.source,n=i.substring(0,i.lastIndexOf("/")+1),o=0;this._videoTracks=[{name:"auto",url:this.ui.source,id:o}],this._totalTracks={},this._audioTracksInfo=[];for(var r=0;r<e.length-1;++r){var a=e[r],s=e[r+1];if(0==a.indexOf("#EXT-X-STREAM-INF")){for(var c=a.split(","),l={url:0===s.indexOf("http")?s:n+s},h=0;h<c.length;++h)if(1<(f=c[h].split("=")).length)switch(f[0].trim().toLowerCase()){case"bandwidth":l.bandwidth=f[1].trim();break;case"audio":l.audio=f[1].trim().replace(/"/g,"");break;case"resolution":var d=f[1].split("x");l.width=d[0],l.height=d[1]}var p=l.width+"x"+l.height;this._totalTracks[p]||(this._totalTracks[p]=[]),this._totalTracks[p].push(l)}else if(0==a.indexOf("#EXT-X-MEDIA:TYPE=AUDIO")){c=a.split(",");var u={};for(h=0;h<c.length;++h){var f;if(1<(f=c[h].split("=")).length)switch(f[0].trim().toLowerCase()){case"group-id":u.id=f[1].trim().replace(/"/g,"");break;case"name":u.label=f[1].trim().replace(/"/g,"");break;case"language":u.language=f[1].trim().replace(/"/g,"");break;case"uri":u.url=f[1].trim()}}this._audioTracksInfo.push(u)}}for(var r in this._totalTracks){var g=this._totalTracks[r][0];g.id=++o,this._videoTracks.push(g)}},Rn.prototype.getFileExtension=function(t){if(!t)return"";var e=t.toLowerCase(),i=t.indexOf("?");0<=i&&(e=e.substring(0,i));var n=e.lastIndexOf(".");return e.substring(n,e.length)},Rn.prototype.setSource=function(t){this.ui.ready=!1,this._extension=this.getFileExtension(t),t&&this._xhr&&(".m3u8"===this._extension||".m3u"===this._extension)&&(this._xhr.open("GET",t),this._xhr.send());var e=t;this.ui.startPosition&&(e+="#t="+this.ui.startPosition),this.element.dom.src=e},Rn.prototype.play=function(){this.element.dom.play()},Rn.prototype.pause=function(){this.element.dom.pause()},Rn.prototype.stop=function(){this.pause()},Rn.prototype.seek=function(t){this.element.dom.currentTime+=t},Rn.prototype.seekTo=function(t){this.element.dom.currentTime=t},Rn.prototype.setVolume=function(t){this.element.dom.volume=t},Rn.prototype.setMute=function(t){this.element.dom.muted=t},Rn.prototype.setLoop=function(t){this.element.dom.loop=t},Rn.prototype.setOption=function(t,e){"autoplay"===t?e?this.element.dom.setAttribute("autoplay",""):this.element.dom.removeAttribute("autoplay"):this.element.dom.setAttribute(t,e)},Rn.prototype.setRect=function(t,e,i,n){},Rn.prototype.setVisibility=function(t){log("VISIBILITY LOGIC MISSING HERE, visible:",t)},Rn.prototype.setupDrm=function(t,e,i,n){log("Not implemented")},Rn.prototype.getAudioTracks=function(){return log("Not implemented"),[]},Rn.prototype.getVideoTracks=function(){return this._videoTracks||[]},Rn.prototype.getAudioTracks=function(){for(var t=this.element.dom.audioTracks,e=[],i=0;i<t.length;++i){var n=t[i],o=this._audioTracksInfo[i];e.push({id:i,name:n.label?n.label:o.name,language:n.language?n.language:o.language})}return log("getAudioTracks",e),e},Rn.prototype.setAudioTrack=function(t){var e=this.element.dom.audioTracks;if(t<0||t>=e.length)log("Where is no track",t);else{log("Set audio track",e[t]);for(var i=0;i<e.length;++i)e[i].enabled=i===t}},Rn.prototype.setVideoTrack=function(t){if(!this._videoTracks||this._videoTracks.length<=0)log("There is no available video track",this._videoTracks);else if(t<0||t>=this._videoTracks.length)log("Track with id",t,"not found");else{this.ui.waiting=!0;var e=this.ui.progress;log("Set video",this._videoTracks[t]),this.element.dom.src=this._videoTracks[t].url,this.seekTo(e)}},Rn.prototype.setVideoTrack=function(t){if(!this._videoTracks||this._videoTracks.length<=0)log("There is no available video track",this._videoTracks);else if(t<0||t>=this._videoTracks.length)log("Track with id",t,"not found");else{this.ui.waiting=!0;var e=this.ui.progress;log("Set video",this._videoTracks[t]),this.element.dom.src=this._videoTracks[t].url,this.seekTo(e)}},Rn.prototype.setBackgroundColor=function(t){var e=S.core.Color;this.element.dom.style.backgroundColor=new e(t).rgba()},Ln.createPlayer=function(t){return new Rn(t)},Ln.probeUrl=function(t){return 50},Ln.Player=Rn,Ln),S.webos.device=(Mn={},(Dn=function(e){this._ui=e;var i=this;this.lunaGetSystemInfo(function(t){log("Device info",t),i.fillSystemInfo(t)},function(t){log("Failed to get device info",t)}),this.getDeviceId(function(t){log("Get ID",t),e.deviceId=t}.bind(this))}).prototype.lunaRequestImpl=function(t,e){window.webOS?window.webOS.service.request(t,e):log("webOS not found! Maybe you forget to include webOS.js.")},Dn.prototype.lunaFillRequest=function(t,e,i,n,o){var r={method:t,parameters:e,onSuccess:function(t){i(t)}};return n&&(r.onFailure=function(t){n(t)}),o&&(r.onComplete=function(t){o(t)}),e.subscribe&&(r.subscribe=e.subscribe),e.resubscribeStatus&&(r.resubscribeStatus=e.resubscribeStatus),r},Dn.prototype.lunaGetSystemInfo=function(t,e){var i=this.lunaFillRequest("getSystemInfo",{keys:["modelName","firmwareVersion","UHD","sdkVersion","_3d"]},t,e);this.lunaRequestImpl("luna://com.webos.service.tv.systemproperty",i)},Dn.prototype.generateId=function(e){log("Generate id..."),this.lunaKeyManager("generate",{keyname:"deviceid",type:"AES",size:16,nohide:!0},function(t){log("Id was generated")},function(t){log("Failed to generate id:",t)}),this.lunaKeyManager("fetchKey",{keyname:"deviceid"},function(t){e(t.keydata)},function(t){log("Failed to fetch id:",t)})},Dn.prototype.getDeviceId=function(e){var i=this;this.lunaGetDeviceId(function(t){t.returnValue&&t.idList&&t.idList.length?(log("Succss, deviceId:",t.idList[0].idValue),e(t.idList[0].idValue)):(log("Bad response, device Id will be generated",t),i.generateId(e))},function(t){log("Failed to get device id directly"),i.generateId(e)})},Dn.prototype.lunaRequestImpl=function(t,e){window.webOS?window.webOS.service.request(t,e):log("webOS not found! Maybe you forget to include webOS.js.")},Dn.prototype.lunaGetDeviceId=function(t,e){var i=this.lunaFillRequest("deviceid/getIDs",{idType:["LGUDID"]},t,e);this.lunaRequestImpl("luna://com.webos.service.sm",i)},Dn.prototype.lunaKeyManager=function(t,e,i,n,o){var r=this.lunaFillRequest(t,e,i,n,o);this.lunaRequestImpl("luna://com.palm.keymanager",r)},Dn.prototype.fillSystemInfo=function(t){if(this._ui.supportingUhd=t.UHD,this._ui.supporting3d=t._3d,this._ui.firmware=t.firmwareVersion,this._ui.modelName=t.modelName,this._ui.sdk=t.sdkVersion,window.PalmSystem&&(this._ui.language=window.PalmSystem.locale,window.PalmSystem.country))try{var e=JSON.parse(window.PalmSystem.country);this._ui.country=e.country}catch(t){}},Mn.createDevice=function(t){return new Dn(t)},Mn.Device=Dn,Mn),S.webos.video=(Fn={},((Hn=function(t){var e=t._context.createElement("video");e.dom.preload="metadata";var i=e.dom,n=this;this.element=e,this.ui=t,this.setEventListeners(),this._startBitrate=0,t.setStartBitrate=function(t){n._startBitrate=t}.bind(this),e.on("canplay",function(){log("canplay",i.readyState),t.ready=i.readyState,t.waiting=!1,n._seekAfterSwitchProgress&&(n.seekTo(n._seekAfterSwitchProgress),n._seekAfterSwitchProgress=void 0)}.bind(t)),t.element.remove(),t.element=e,t.parent.element.append(t.element),this._xhr=new XMLHttpRequest,this._xhr.addEventListener("load",this.parseManifest.bind(this)),t._context.document.on("visibilitychange",function(){n._drmClientId&&document.hidden&&n.unloadDrmClient(n._drmClientId,function(){log("DRM client unloaded")},function(t){log("Failed to unload DRM client",t)})})}).prototype=Object.create(S.video.html5.backend.Player.prototype)).parseManifest=function(t){var e=t.target.responseText.split("\n"),i=this.ui.source,n=i.substring(0,i.lastIndexOf("/")+1),o=0;this._videoTracks=[{name:"auto",url:this.ui.source,id:o}],this._totalTracks={},this._audioTracksInfo=[];for(var r=0;r<e.length-1;++r){var a=e[r],s=e[r+1];if(0==a.indexOf("#EXT-X-STREAM-INF")){for(var c=a.split(","),l={url:0===s.indexOf("http")?s:n+s},h=0;h<c.length;++h)if(1<(f=c[h].split("=")).length)switch(f[0].trim().toLowerCase()){case"bandwidth":l.bandwidth=f[1].trim();break;case"audio":l.audio=f[1].trim().replace(/"/g,"");break;case"resolution":var d=f[1].split("x");l.width=d[0],l.height=d[1]}var p=l.width+"x"+l.height;this._totalTracks[p]||(this._totalTracks[p]=[]),this._totalTracks[p].push(l)}else if(0==a.indexOf("#EXT-X-MEDIA:TYPE=AUDIO")){c=a.split(",");var u={};for(h=0;h<c.length;++h){var f;if(1<(f=c[h].split("=")).length)switch(f[0].trim().toLowerCase()){case"group-id":u.id=f[1].trim().replace(/"/g,"");break;case"name":u.label=f[1].trim().replace(/"/g,"");break;case"language":u.language=f[1].trim().replace(/"/g,"");break;case"uri":u.url=f[1].trim()}}this._audioTracksInfo.push(u)}}for(var r in this._totalTracks){var g=this._totalTracks[r][0];g.id=++o,this._videoTracks.push(g)}},Hn.prototype.setDrmSource=function(t){log("playDrmSource",this._drmClientId,"type",this._drmType);var e={option:{}};e.option.drm={};var i=this._extension,n="";".m3u8"===i||".m3u"===i?(e.mediaTransportType="HLS",n="application/x-mpegURL"):".mpd"===i?n="application/dash+xml":".mp4"===i?(n="video/mp4",e.mediaTransportType="URI"):n="application/vnd.ms-sstr+xml","widevine"==this._drmType?(e.mediaTransportType="WIDEVINE",e.option.drm.type="widevine",e.option.drm.clientId=this._drmClientId):"playready"==this._drmType&&(e.option.drm.type="playready",e.option.drm.clientId=this._drmClientId),this._startBitrate&&(e.option.adaptiveStreaming={},e.option.adaptiveStreaming.bps={},e.option.adaptiveStreaming.bps.start=this._startBitrate);var o=encodeURIComponent(JSON.stringify(e)),r=this.ui,a=this._sourceElement?this._sourceElement:r._context.createElement("source");a.setAttribute("src",t+(r.startPosition?"#t="+r.startPosition:"")),a.setAttribute("type",n+";mediaOption="+o),this._sourceElement||r.element.append(a),this._sourceElement=a,this.element.dom.load(),this.element.dom.play()},Hn.prototype.getVideoTracks=function(){return this._videoTracks||[]},Hn.prototype.getAudioTracks=function(){for(var t=this.element.dom.audioTracks,e=[],i=0;i<t.length;++i){var n=t[i],o=this._audioTracksInfo?this._audioTracksInfo[i]:null;e.push({id:i,name:n.label?n.label:o?o.name:"Unknown",language:n.language?n.language:o?o.language:"Unknown"})}return log("getAudioTracks",e),e},Hn.prototype.setAudioTrack=function(t){var e=this.element.dom.audioTracks;if(t<0||t>=e.length)log("Where is no track",t);else{log("Set audio track",e[t]);for(var i=0;i<e.length;++i)e[i].enabled=i===t}},Hn.prototype.setVideoTrack=function(t){if(!this._videoTracks||this._videoTracks.length<=0)log("There is no available video track",this._videoTracks);else if(t<0||t>=this._videoTracks.length)log("Track with id",t,"not found");else{var e=this.ui;e.waiting=!0;var i=this.ui.progress;log("Set video",this._videoTracks[t]),this.element.dom.src=this._videoTracks[t].url+(e.startPosition?"#t="+e.startPosition:""),this._seekAfterSwitchProgress=i}},Hn.prototype.playOptionType=function(t,e){log("playOptionType",e,"Src",t);var i=this.ui,n=this._sourceElement?this._sourceElement:i._context.createElement("source"),o="";if(this._startBitrate){var r={option:{}};r.option.drm={},r.option.adaptiveStreaming={},r.option.adaptiveStreaming.bps={},r.option.adaptiveStreaming.bps.start=this._startBitrate,o=encodeURIComponent(JSON.stringify(r))}n.setAttribute("src",t+(i.startPosition?"#t="+i.startPosition:"")),n.setAttribute("type",e+(o?";mediaOption="+o:"")),this._sourceElement||i.element.append(n),this._sourceElement=n,this.element.dom.load(),this.element.dom.play()},Hn.prototype.playDashUrl=function(t){this.playOptionType(t,"application/dash+xml")},Hn.prototype.playSmoothStreamsingUrl=function(t){this.playOptionType(t,"application/vnd.ms-sstr+xml")},Hn.prototype.getFileExtension=function(t){if(!t)return"";var e=t.toLowerCase(),i=t.indexOf("?");0<=i&&(e=e.substring(0,i));var n=e.lastIndexOf(".");return e.substring(n,e.length)},Hn.prototype.setSource=function(t){var e=this.ui;e.ready=!1,e.seeking=!1,e.waiting=!1,e.duration=0,this._extension=this.getFileExtension(t),log("Set source",t,"ext",this._extension),t?this._drmClientId?this.setDrmSource(t):".mpd"===this._extension?this.playDashUrl(t):".m3u8"===this._extension||".m3u"===this._extension?(t&&(this._xhr.open("GET",t),this._xhr.send()),this.element.dom.src=t+(e.startPosition?"#t="+e.startPosition:"")):0<=this._extension.indexOf("manifest")?this.playSmoothStreamsingUrl(t):this.element.dom.src=t+(e.startPosition?"#t="+e.startPosition:""):this.element.dom.removeAttribute("src")},Hn.prototype.pause=function(){var t=this.ui;t&&(log("Player pause waiting:",t.waiting,"seeking",t.seeking),t.waiting||t.seeking||this.element.dom.pause())},Hn.prototype.lunaRequestImpl=function(t,e){window.webOS?window.webOS.service.request(t,e):log("webOS not found! Maybe you forget to include webOS.js.")},Hn.prototype.lunaFillRequest=function(t,e,i,n,o){var r={method:t,parameters:e,onSuccess:function(t){i(t)}};return n&&(r.onFailure=function(t){n(t)}),o&&(r.onComplete=function(t){o(t)}),e.subscribe&&(r.subscribe=e.subscribe),e.resubscribeStatus&&(r.resubscribeStatus=e.resubscribeStatus),r},Hn.prototype.createDrmClient=function(t,e,i){var n=this.lunaFillRequest("load",t,e,i);this.lunaRequestImpl("luna://com.webos.service.drm",n)},Hn.prototype.sendDrmMessage=function(t,e,i){var n=this.lunaFillRequest("sendDrmMessage",t,e,i);this.lunaRequestImpl("luna://com.webos.service.drm",n)},Hn.prototype.unloadDrmClient=function(t,e,i){var n=this.lunaFillRequest("unload",{clientId:t},e,i);this.lunaRequestImpl("luna://com.webos.service.drm",n)},Hn.prototype.subscribeLicensingError=function(t,e,i){var n=this.lunaFillRequest("getRightsError",t,e,i);this.lunaRequestImpl("luna://com.webos.service.drm",n)},Hn.prototype.getDrmClientId=function(e,i){var n=this,t="com."+($manifest$title||"pureqml")+".app";this.createDrmClient({drmType:e,appId:t},function(t){log("DRM Client created",t),n._drmClientId=t.clientId,n._drmType=e,i(t.clientId)}.bind(this),function(t){log("Failed to create client id Error["+t.errorCode+"]",t.errorText)})},Hn.prototype.setupDrm=function(r,n,a){var s=this;this.getDrmClientId(r,function(o){var t,e,i;if("playready"==r)t='<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+(n.laServer||"")+"</LA_URL><KID>"+(n.contentId||"")+"</KID></LicenseServerUriOverride></PlayReadyInitiator>",e="application/vnd.ms-playready.initiator+xml",i="urn:dvb:casystemid:19219";else{if("widevine"!=r)throw new Error("Unknown or unsupported DRM type",r);t='<?xml version="1.0" encoding="utf-8"?><WidevineCredentialsInfo xmlns="http://www.smarttv-alliance.org/DRM/widevine/2012/protocols/"><ContentURL>'+(n.contentUrl||"")+"</ContentURL><DeviceID></DeviceID><StreamID></StreamID><ClientIP></ClientIP><DRMServerURL>"+(n.laServer||"")+"</DRMServerURL><DRMAckServerURL></DRMAckServerURL><DRMHeartBeatURL></DRMHeartBeatURL><DRMHeartBeatPeriod>0</DRMHeartBeatPeriod><UserData></UserData><Portal></Portal><StoreFront></StoreFront><BandwidthCheckURL></BandwidthCheckURL><BandwidthCheckInterval></BandwidthCheckInterval></WidevineCredentialsInfo >",e="application/widevine+xml",i="urn:dvb:casystemid:19156"}settings={clientId:o,msgType:e,msg:t,drmSystemId:i},s.sendDrmMessage(settings,function(t){if(log("sendDrmMessage succeeded",t,"type",r),"widevine"!=r){var e=t.msgId,i=t.resultCode,n=t.resultMsg;switch(log("Message ID: "+e),log("["+i+"] "+n),i){case 0:log("The action(s) requested by sendDrmMessage() completed successfully"),a&&a(o);break;case 2:log("Cannot Process Request: sendDrmMessage() failed because the DRM agent was unable to complete the necessary computations in the time allotted");break;case 3:log("Unknown MIME Type: sendDrmMessage() failed, because the specified MIME type is unknown for the specified DRM system indicated in the MIME type");break;case 4:log("User Consent Needed sendDrmMessage() failed because user consent is needed for that action");break;case 1:default:log("Unknown Error: sendDrmMessage() failed because an unspecified error occurred.")}}else a&&a(o)})}.bind(this))},Fn.createPlayer=function(t){return new Hn(t)},Fn.probeUrl=function(t){return 175},Fn),S.controls.pure.format={currency:function(t,e,i){var n="\\d(?=(\\d{"+(i||3)+"})+"+(0<e?"\\.":"$")+")";return t.toFixed(Math.max(0,~~e)).replace(new RegExp(n,"g"),"$&,")},format:function(){var t=[].slice.call(arguments),e=t.shift();return t.reduce(function(t,e){return t.replace("%s",e)},e)}},t}(),l10n={},context=qml._context=new qml.core.Context(null,!1,{id:"qml-context-app",l10n:l10n,nativeContext:null});context.init(),context.start(new qml.src.UiApp(context)),context.run();
